(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{1021:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1022),o=function(){function e(){this.importTask={}}return e.prototype.load=function(e,t){void 0===t&&(t=window.fetch);var n=e.url,r=e.name;if(this.importTask[r])return this.importTask[r];var o=Array.isArray(n)?n:[n],i=Promise.all(o.map((function(e){return t(e).then((function(e){return e.text()})).then((function(t){return t+" \n //# sourceURL="+e}))})));return this.importTask[r]=i,i},e.prototype.removeTask=function(e){delete this.importTask[e]},e.prototype.clearTask=function(){this.importTask={}},e.prototype.execModule=function(e,t,n){return this.load(e).then((function(o){var i=null;(null==t?void 0:t.getSandbox)?(t.createProxySandbox(n),i=t.getSandbox()):i=window;var s=e.name,a="";try{o.forEach((function(e,n){var s=n===o.length-1;s&&r.noteGlobalProps(i),(null==t?void 0:t.execScriptInSandbox)?t.execScriptInSandbox(e):(0,eval)(e),s&&(a=r.getGlobalProp(i))}))}catch(e){console.error(e)}var c=a?i[a]:i[s]||{};return i[a]&&delete i[a],c}))},e}();t.default=o},1022:function(e,t,n){"use strict";var r,o,i;Object.defineProperty(t,"__esModule",{value:!0}),t.noteGlobalProps=t.getGlobalProp=void 0;var s=[],a="undefined"!=typeof navigator&&-1!==navigator.userAgent.indexOf("Trident");function c(e,t){return!t.hasOwnProperty(e)||!isNaN(e)&&e<t.length||a&&t[e]&&"undefined"!=typeof window&&t[e].parent===window}t.getGlobalProp=function(e){var t,n=0;for(var a in e)if(!c(a,e)){if(0===n&&a!==r||1===n&&a!==o)return a;n++,t=a}if(t!==i)return t;for(var a in e)s.includes(a)||(t=a);return t},t.noteGlobalProps=function(e){for(var t in r=void 0,o=void 0,s=Object.keys(e),e)c(t,e)||(r?o||(o=t):r=t,i=t);return i}},1023:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.parseRuntime=t.parseImmediately=t.fetchRuntimeJson=t.cacheDeps=t.updateRuntimeState=t.execute=void 0;var s=n(946),a=n(1024),c=n(851);!function(){if("function"==typeof window.CustomEvent)return!1;window.CustomEvent=function(e,t){t=t||{bubbles:!1,cancelable:!1,detail:null};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n}}();var u={};function l(e,t,n){void 0===n&&(n=new s.default({multiMode:!0})),n.createProxySandbox(t),a.any2AnyArray(e).forEach((function(e){return n.execScriptInSandbox(e)}));var r=n.getAddedProperties();return n.clear(),r}function p(e,t){u[e]||(u[e]={}),u[e].state=t}function f(e,t,n){var r,s,a;return void 0===n&&(n=window.fetch),o(this,void 0,void 0,(function(){var o,f,d,h,m,g,y,b;return i(this,(function(i){switch(i.label){case 0:return o=e.id,f=e.url,"LOADING"!==(null===(r=u[d=o])||void 0===r?void 0:r.state)?[3,2]:[4,new Promise((function(e){return window.addEventListener(d,e)}))];case 1:i.sent(),i.label=2;case 2:if("LOADED"===(null===(s=u[d])||void 0===s?void 0:s.state))return[2,null===(a=u[d])||void 0===a?void 0:a.deps];p(d,"LOADING"),h=c.parseUrlAssets(f),m=h.cssList,g=h.jsList,Promise.all(m.map((function(e){return c.appendCSS("runtime-"+o,e)}))),i.label=3;case 3:return i.trys.push([3,5,,6]),y=u[d],[4,Promise.all(g.map((function(e){return n(e).then((function(e){return e.text()}))}))).then((function(e){return l(e,t)}))];case 4:return y.deps=i.sent(),p(d,"LOADED"),window.dispatchEvent(new CustomEvent(d,{detail:{state:"LOADED"}})),[2,u[d].deps];case 5:return b=i.sent(),p(d,"LOAD_ERROR"),window.dispatchEvent(new CustomEvent(d,{detail:{state:"LOAD_ERROR"}})),console.error("[icestark module] "+o+" fetch or excute js assets error",b),[2,Promise.reject(b)];case 6:return[2]}}))}))}function d(e,t){return void 0===t&&(t=window.fetch),/.json/.test(e)||console.warn("[icestark-module] runtime url should be a json file."),t(e).then((function(e){return e.json()}))}function h(e,t){return void 0===t&&(t=window.fetch),o(this,void 0,void 0,(function(){var n=this;return i(this,(function(s){switch(s.label){case 0:return[4,e.reduce((function(e,s){return o(n,void 0,void 0,(function(){var n,o;return i(this,(function(i){switch(i.label){case 0:return[4,e];case 1:return n=i.sent(),o=[r({},n)],[4,f(s,n,t)];case 2:return[2,r.apply(void 0,o.concat([i.sent()]))]}}))}))}),Promise.resolve({}))];case 1:return[2,s.sent()]}}))}))}t.execute=l,t.updateRuntimeState=p,t.cacheDeps=f,t.fetchRuntimeJson=d,t.parseImmediately=h,t.parseRuntime=function(e,t){return void 0===t&&(t=window.fetch),o(this,void 0,void 0,(function(){return i(this,(function(n){switch(n.label){case 0:return e?"string"!=typeof e?[3,2]:[4,d(e,t)]:[2,null];case 1:return[2,h(n.sent())];case 2:return Array.isArray(e)?[2,h(e)]:[2]}}))}))}},1024:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.any2AnyArray=void 0,t.any2AnyArray=function(e){return Array.isArray(e)?e:[e]}},1025:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},s=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},c=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};Object.defineProperty(t,"__esModule",{value:!0}),t.renderModules=t.renderComponent=void 0;var u=n(0),l=n(851),p=n(1026);function f(e,t){return void 0===t&&(t={}),u.isValidElement(e)?u.cloneElement(e,t):u.createElement(e,i({},t))}t.renderComponent=f;var d=function(e){function t(t){var n=e.call(this,t)||this;return n.moduleInfo=null,n.mountNode=null,n.unmout=!1,n.state={loading:!1},n}return o(t,e),t.prototype.componentDidMount=function(){this.mountModule()},t.prototype.componentDidUpdate=function(e){p.shallowCompare(e.moduleInfo||{},this.props.moduleInfo||{})||this.mountModule()},t.prototype.componentWillUnmount=function(){try{this.validateRender()||l.unmoutModule(this.moduleInfo,this.mountNode),this.unmout=!0}catch(e){console.log("[icestark] error occurred when unmount module",e)}},t.prototype.getModuleInfo=function(){var e=this,t=this.props.moduleInfo;this.moduleInfo=t||l.getModules().filter((function(t){return t.name===e.props.moduleName}))[0],this.moduleInfo||console.error("[icestark] Can't find "+this.props.moduleName+" module in modules config")},t.prototype.validateRender=function(){var e=(this.moduleInfo||{}).render;return e&&"function"!=typeof e&&console.error("[icestark]: render should be funtion"),e&&"function"==typeof e},t.prototype.mountModule=function(){return s(this,void 0,void 0,(function(){var e,t,n,r,o,i,s,u,p;return a(this,(function(a){switch(a.label){case 0:if(e=this.props,t=e.sandbox,e.moduleInfo,e.wrapperClassName,e.wrapperStyle,e.loadingComponent,n=e.handleError,r=c(e,["sandbox","moduleInfo","wrapperClassName","wrapperStyle","loadingComponent","handleError"]),!this.moduleInfo)return console.error("Can't find "+this.props.moduleName+" module in modules config"),[2];if(this.validateRender())return[3,4];this.setState({loading:!0}),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,l.loadModule(this.moduleInfo,t)];case 2:return o=a.sent(),i=o.mount,s=o.component,u=i,!this.unmout&&this.setState({loading:!1}),u&&s&&(this.unmout?l.unmoutModule(this.moduleInfo,this.mountNode):u(s,this.mountNode,r)),[3,4];case 3:return p=a.sent(),this.setState({loading:!1}),n(p),[3,4];case 4:return[2]}}))}))},t.prototype.render=function(){var e=this;this.getModuleInfo();var t=this.state.loading,n=(this.moduleInfo||{}).render,r=this.props,o=r.wrapperClassName,i=r.wrapperStyle,s=r.loadingComponent;return t?s:u.createElement("div",{className:o,style:i,ref:function(t){e.mountNode=t}},this.moduleInfo&&this.validateRender()&&n())},t.defaultProps={loadingComponent:null,handleError:function(){}},t}(u.Component);t.default=d,t.renderModules=function(e,t,n,r){var o;return l.registerModules(e),t?f(t,i(i({modules:e},n),{sandbox:r})):(console.warn("Please set render Component, try use MicroModule and mount first module"),u.createElement(d,i({moduleName:null===(o=e[0])||void 0===o?void 0:o.name},n)))}},1026:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.shallowCompare=void 0,t.shallowCompare=function(e,t){return Object.keys(e).every((function(n){return e[n]===t[n]}))}},1027:function(e,t,n){"use strict";var r=t;function o(){r.util._configure(),r.Writer._configure(r.BufferWriter),r.Reader._configure(r.BufferReader)}r.build="minimal",r.Writer=n(947),r.BufferWriter=n(1036),r.Reader=n(948),r.BufferReader=n(1037),r.util=n(601),r.rpc=n(1038),r.roots=n(1040),r.configure=o,o()},1028:function(e,t,n){"use strict";e.exports=function(e,t){var n=new Array(arguments.length-1),r=0,o=2,i=!0;for(;o<arguments.length;)n[r++]=arguments[o++];return new Promise((function(o,s){n[r]=function(e){if(i)if(i=!1,e)s(e);else{for(var t=new Array(arguments.length-1),n=0;n<t.length;)t[n++]=arguments[n];o.apply(null,t)}};try{e.apply(t||null,n)}catch(e){i&&(i=!1,s(e))}}))}},1029:function(e,t,n){"use strict";var r=t;r.length=function(e){var t=e.length;if(!t)return 0;for(var n=0;--t%4>1&&"="===e.charAt(t);)++n;return Math.ceil(3*e.length)/4-n};for(var o=new Array(64),i=new Array(123),s=0;s<64;)i[o[s]=s<26?s+65:s<52?s+71:s<62?s-4:s-59|43]=s++;r.encode=function(e,t,n){for(var r,i=null,s=[],a=0,c=0;t<n;){var u=e[t++];switch(c){case 0:s[a++]=o[u>>2],r=(3&u)<<4,c=1;break;case 1:s[a++]=o[r|u>>4],r=(15&u)<<2,c=2;break;case 2:s[a++]=o[r|u>>6],s[a++]=o[63&u],c=0}a>8191&&((i||(i=[])).push(String.fromCharCode.apply(String,s)),a=0)}return c&&(s[a++]=o[r],s[a++]=61,1===c&&(s[a++]=61)),i?(a&&i.push(String.fromCharCode.apply(String,s.slice(0,a))),i.join("")):String.fromCharCode.apply(String,s.slice(0,a))};r.decode=function(e,t,n){for(var r,o=n,s=0,a=0;a<e.length;){var c=e.charCodeAt(a++);if(61===c&&s>1)break;if(void 0===(c=i[c]))throw Error("invalid encoding");switch(s){case 0:r=c,s=1;break;case 1:t[n++]=r<<2|(48&c)>>4,r=c,s=2;break;case 2:t[n++]=(15&r)<<4|(60&c)>>2,r=c,s=3;break;case 3:t[n++]=(3&r)<<6|c,s=0}}if(1===s)throw Error("invalid encoding");return n-o},r.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}},1030:function(e,t,n){"use strict";function r(){this._listeners={}}e.exports=r,r.prototype.on=function(e,t,n){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:t,ctx:n||this}),this},r.prototype.off=function(e,t){if(void 0===e)this._listeners={};else if(void 0===t)this._listeners[e]=[];else for(var n=this._listeners[e],r=0;r<n.length;)n[r].fn===t?n.splice(r,1):++r;return this},r.prototype.emit=function(e){var t=this._listeners[e];if(t){for(var n=[],r=1;r<arguments.length;)n.push(arguments[r++]);for(r=0;r<t.length;)t[r].fn.apply(t[r++].ctx,n)}return this}},1031:function(e,t,n){"use strict";function r(e){return"undefined"!=typeof Float32Array?function(){var t=new Float32Array([-0]),n=new Uint8Array(t.buffer),r=128===n[3];function o(e,r,o){t[0]=e,r[o]=n[0],r[o+1]=n[1],r[o+2]=n[2],r[o+3]=n[3]}function i(e,r,o){t[0]=e,r[o]=n[3],r[o+1]=n[2],r[o+2]=n[1],r[o+3]=n[0]}function s(e,r){return n[0]=e[r],n[1]=e[r+1],n[2]=e[r+2],n[3]=e[r+3],t[0]}function a(e,r){return n[3]=e[r],n[2]=e[r+1],n[1]=e[r+2],n[0]=e[r+3],t[0]}e.writeFloatLE=r?o:i,e.writeFloatBE=r?i:o,e.readFloatLE=r?s:a,e.readFloatBE=r?a:s}():function(){function t(e,t,n,r){var o=t<0?1:0;if(o&&(t=-t),0===t)e(1/t>0?0:2147483648,n,r);else if(isNaN(t))e(2143289344,n,r);else if(t>34028234663852886e22)e((o<<31|2139095040)>>>0,n,r);else if(t<11754943508222875e-54)e((o<<31|Math.round(t/1401298464324817e-60))>>>0,n,r);else{var i=Math.floor(Math.log(t)/Math.LN2);e((o<<31|i+127<<23|8388607&Math.round(t*Math.pow(2,-i)*8388608))>>>0,n,r)}}function n(e,t,n){var r=e(t,n),o=2*(r>>31)+1,i=r>>>23&255,s=8388607&r;return 255===i?s?NaN:o*(1/0):0===i?1401298464324817e-60*o*s:o*Math.pow(2,i-150)*(s+8388608)}e.writeFloatLE=t.bind(null,o),e.writeFloatBE=t.bind(null,i),e.readFloatLE=n.bind(null,s),e.readFloatBE=n.bind(null,a)}(),"undefined"!=typeof Float64Array?function(){var t=new Float64Array([-0]),n=new Uint8Array(t.buffer),r=128===n[7];function o(e,r,o){t[0]=e,r[o]=n[0],r[o+1]=n[1],r[o+2]=n[2],r[o+3]=n[3],r[o+4]=n[4],r[o+5]=n[5],r[o+6]=n[6],r[o+7]=n[7]}function i(e,r,o){t[0]=e,r[o]=n[7],r[o+1]=n[6],r[o+2]=n[5],r[o+3]=n[4],r[o+4]=n[3],r[o+5]=n[2],r[o+6]=n[1],r[o+7]=n[0]}function s(e,r){return n[0]=e[r],n[1]=e[r+1],n[2]=e[r+2],n[3]=e[r+3],n[4]=e[r+4],n[5]=e[r+5],n[6]=e[r+6],n[7]=e[r+7],t[0]}function a(e,r){return n[7]=e[r],n[6]=e[r+1],n[5]=e[r+2],n[4]=e[r+3],n[3]=e[r+4],n[2]=e[r+5],n[1]=e[r+6],n[0]=e[r+7],t[0]}e.writeDoubleLE=r?o:i,e.writeDoubleBE=r?i:o,e.readDoubleLE=r?s:a,e.readDoubleBE=r?a:s}():function(){function t(e,t,n,r,o,i){var s=r<0?1:0;if(s&&(r=-r),0===r)e(0,o,i+t),e(1/r>0?0:2147483648,o,i+n);else if(isNaN(r))e(0,o,i+t),e(2146959360,o,i+n);else if(r>17976931348623157e292)e(0,o,i+t),e((s<<31|2146435072)>>>0,o,i+n);else{var a;if(r<22250738585072014e-324)e((a=r/5e-324)>>>0,o,i+t),e((s<<31|a/4294967296)>>>0,o,i+n);else{var c=Math.floor(Math.log(r)/Math.LN2);1024===c&&(c=1023),e(4503599627370496*(a=r*Math.pow(2,-c))>>>0,o,i+t),e((s<<31|c+1023<<20|1048576*a&1048575)>>>0,o,i+n)}}}function n(e,t,n,r,o){var i=e(r,o+t),s=e(r,o+n),a=2*(s>>31)+1,c=s>>>20&2047,u=4294967296*(1048575&s)+i;return 2047===c?u?NaN:a*(1/0):0===c?5e-324*a*u:a*Math.pow(2,c-1075)*(u+4503599627370496)}e.writeDoubleLE=t.bind(null,o,0,4),e.writeDoubleBE=t.bind(null,i,4,0),e.readDoubleLE=n.bind(null,s,0,4),e.readDoubleBE=n.bind(null,a,4,0)}(),e}function o(e,t,n){t[n]=255&e,t[n+1]=e>>>8&255,t[n+2]=e>>>16&255,t[n+3]=e>>>24}function i(e,t,n){t[n]=e>>>24,t[n+1]=e>>>16&255,t[n+2]=e>>>8&255,t[n+3]=255&e}function s(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function a(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}e.exports=r(r)},1032:function(module,exports,__webpack_require__){"use strict";function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}module.exports=inquire},1033:function(e,t,n){"use strict";var r=t;r.length=function(e){for(var t=0,n=0,r=0;r<e.length;++r)(n=e.charCodeAt(r))<128?t+=1:n<2048?t+=2:55296==(64512&n)&&56320==(64512&e.charCodeAt(r+1))?(++r,t+=4):t+=3;return t},r.read=function(e,t,n){if(n-t<1)return"";for(var r,o=null,i=[],s=0;t<n;)(r=e[t++])<128?i[s++]=r:r>191&&r<224?i[s++]=(31&r)<<6|63&e[t++]:r>239&&r<365?(r=((7&r)<<18|(63&e[t++])<<12|(63&e[t++])<<6|63&e[t++])-65536,i[s++]=55296+(r>>10),i[s++]=56320+(1023&r)):i[s++]=(15&r)<<12|(63&e[t++])<<6|63&e[t++],s>8191&&((o||(o=[])).push(String.fromCharCode.apply(String,i)),s=0);return o?(s&&o.push(String.fromCharCode.apply(String,i.slice(0,s))),o.join("")):String.fromCharCode.apply(String,i.slice(0,s))},r.write=function(e,t,n){for(var r,o,i=n,s=0;s<e.length;++s)(r=e.charCodeAt(s))<128?t[n++]=r:r<2048?(t[n++]=r>>6|192,t[n++]=63&r|128):55296==(64512&r)&&56320==(64512&(o=e.charCodeAt(s+1)))?(r=65536+((1023&r)<<10)+(1023&o),++s,t[n++]=r>>18|240,t[n++]=r>>12&63|128,t[n++]=r>>6&63|128,t[n++]=63&r|128):(t[n++]=r>>12|224,t[n++]=r>>6&63|128,t[n++]=63&r|128);return n-i}},1034:function(e,t,n){"use strict";e.exports=function(e,t,n){var r=n||8192,o=r>>>1,i=null,s=r;return function(n){if(n<1||n>o)return e(n);s+n>r&&(i=e(r),s=0);var a=t.call(i,s,s+=n);return 7&s&&(s=1+(7|s)),a}}},1035:function(e,t,n){"use strict";e.exports=o;var r=n(601);function o(e,t){this.lo=e>>>0,this.hi=t>>>0}var i=o.zero=new o(0,0);i.toNumber=function(){return 0},i.zzEncode=i.zzDecode=function(){return this},i.length=function(){return 1};var s=o.zeroHash="\0\0\0\0\0\0\0\0";o.fromNumber=function(e){if(0===e)return i;var t=e<0;t&&(e=-e);var n=e>>>0,r=(e-n)/4294967296>>>0;return t&&(r=~r>>>0,n=~n>>>0,++n>4294967295&&(n=0,++r>4294967295&&(r=0))),new o(n,r)},o.from=function(e){if("number"==typeof e)return o.fromNumber(e);if(r.isString(e)){if(!r.Long)return o.fromNumber(parseInt(e,10));e=r.Long.fromString(e)}return e.low||e.high?new o(e.low>>>0,e.high>>>0):i},o.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var t=1+~this.lo>>>0,n=~this.hi>>>0;return t||(n=n+1>>>0),-(t+4294967296*n)}return this.lo+4294967296*this.hi},o.prototype.toLong=function(e){return r.Long?new r.Long(0|this.lo,0|this.hi,Boolean(e)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(e)}};var a=String.prototype.charCodeAt;o.fromHash=function(e){return e===s?i:new o((a.call(e,0)|a.call(e,1)<<8|a.call(e,2)<<16|a.call(e,3)<<24)>>>0,(a.call(e,4)|a.call(e,5)<<8|a.call(e,6)<<16|a.call(e,7)<<24)>>>0)},o.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},o.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this},o.prototype.zzDecode=function(){var e=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this},o.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return 0===n?0===t?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:n<128?9:10}},1036:function(e,t,n){"use strict";e.exports=i;var r=n(947);(i.prototype=Object.create(r.prototype)).constructor=i;var o=n(601);function i(){r.call(this)}function s(e,t,n){e.length<40?o.utf8.write(e,t,n):t.utf8Write?t.utf8Write(e,n):t.write(e,n)}i._configure=function(){i.alloc=o._Buffer_allocUnsafe,i.writeBytesBuffer=o.Buffer&&o.Buffer.prototype instanceof Uint8Array&&"set"===o.Buffer.prototype.set.name?function(e,t,n){t.set(e,n)}:function(e,t,n){if(e.copy)e.copy(t,n,0,e.length);else for(var r=0;r<e.length;)t[n++]=e[r++]}},i.prototype.bytes=function(e){o.isString(e)&&(e=o._Buffer_from(e,"base64"));var t=e.length>>>0;return this.uint32(t),t&&this._push(i.writeBytesBuffer,t,e),this},i.prototype.string=function(e){var t=o.Buffer.byteLength(e);return this.uint32(t),t&&this._push(s,t,e),this},i._configure()},1037:function(e,t,n){"use strict";e.exports=i;var r=n(948);(i.prototype=Object.create(r.prototype)).constructor=i;var o=n(601);function i(e){r.call(this,e)}i._configure=function(){o.Buffer&&(i.prototype._slice=o.Buffer.prototype.slice)},i.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))},i._configure()},1038:function(e,t,n){"use strict";t.Service=n(1039)},1039:function(e,t,n){"use strict";e.exports=o;var r=n(601);function o(e,t,n){if("function"!=typeof e)throw TypeError("rpcImpl must be a function");r.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=Boolean(t),this.responseDelimited=Boolean(n)}(o.prototype=Object.create(r.EventEmitter.prototype)).constructor=o,o.prototype.rpcCall=function e(t,n,o,i,s){if(!i)throw TypeError("request must be specified");var a=this;if(!s)return r.asPromise(e,a,t,n,o,i);if(a.rpcImpl)try{return a.rpcImpl(t,n[a.requestDelimited?"encodeDelimited":"encode"](i).finish(),(function(e,n){if(e)return a.emit("error",e,t),s(e);if(null!==n){if(!(n instanceof o))try{n=o[a.responseDelimited?"decodeDelimited":"decode"](n)}catch(e){return a.emit("error",e,t),s(e)}return a.emit("data",n,t),s(null,n)}a.end(!0)}))}catch(e){return a.emit("error",e,t),void setTimeout((function(){s(e)}),0)}else setTimeout((function(){s(Error("already ended"))}),0)},o.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},1040:function(e,t,n){"use strict";e.exports={}},440:function(e,t,n){"use strict";e.exports=function(e,t){return t||(t={}),"string"!=typeof(e=e&&e.__esModule?e.default:e)?e:(/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),t.hash&&(e+=t.hash),/["'() \t\n]/.test(e)||t.needQuotes?'"'.concat(e.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):e)}},601:function(e,t,n){"use strict";var r=t;function o(e,t,n){for(var r=Object.keys(t),o=0;o<r.length;++o)void 0!==e[r[o]]&&n||(e[r[o]]=t[r[o]]);return e}function i(e){function t(e,n){if(!(this instanceof t))return new t(e,n);Object.defineProperty(this,"message",{get:function(){return e}}),Error.captureStackTrace?Error.captureStackTrace(this,t):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),n&&o(this,n)}return(t.prototype=Object.create(Error.prototype)).constructor=t,Object.defineProperty(t.prototype,"name",{get:function(){return e}}),t.prototype.toString=function(){return this.name+": "+this.message},t}r.asPromise=n(1028),r.base64=n(1029),r.EventEmitter=n(1030),r.float=n(1031),r.inquire=n(1032),r.utf8=n(1033),r.pool=n(1034),r.LongBits=n(1035),r.global="undefined"!=typeof window&&window||"undefined"!=typeof global&&global||"undefined"!=typeof self&&self||this,r.emptyArray=Object.freeze?Object.freeze([]):[],r.emptyObject=Object.freeze?Object.freeze({}):{},r.isNode=Boolean(r.global.process&&r.global.process.versions&&r.global.process.versions.node),r.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},r.isString=function(e){return"string"==typeof e||e instanceof String},r.isObject=function(e){return e&&"object"==typeof e},r.isset=r.isSet=function(e,t){var n=e[t];return!(null==n||!e.hasOwnProperty(t))&&("object"!=typeof n||(Array.isArray(n)?n.length:Object.keys(n).length)>0)},r.Buffer=function(){try{var e=r.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch(e){return null}}(),r._Buffer_from=null,r._Buffer_allocUnsafe=null,r.newBuffer=function(e){return"number"==typeof e?r.Buffer?r._Buffer_allocUnsafe(e):new r.Array(e):r.Buffer?r._Buffer_from(e):"undefined"==typeof Uint8Array?e:new Uint8Array(e)},r.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,r.Long=r.global.dcodeIO&&r.global.dcodeIO.Long||r.global.Long||r.inquire("long"),r.key2Re=/^true|false|0|1$/,r.key32Re=/^-?(?:0|[1-9][0-9]*)$/,r.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,r.longToHash=function(e){return e?r.LongBits.from(e).toHash():r.LongBits.zeroHash},r.longFromHash=function(e,t){var n=r.LongBits.fromHash(e);return r.Long?r.Long.fromBits(n.lo,n.hi,t):n.toNumber(Boolean(t))},r.merge=o,r.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)},r.newError=i,r.ProtocolError=i("ProtocolError"),r.oneOfGetter=function(e){for(var t={},n=0;n<e.length;++n)t[e[n]]=1;return function(){for(var e=Object.keys(this),n=e.length-1;n>-1;--n)if(1===t[e[n]]&&void 0!==this[e[n]]&&null!==this[e[n]])return e[n]}},r.oneOfSetter=function(e){return function(t){for(var n=0;n<e.length;++n)e[n]!==t&&delete this[e[n]]}},r.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},r._configure=function(){var e=r.Buffer;e?(r._Buffer_from=e.from!==Uint8Array.from&&e.from||function(t,n){return new e(t,n)},r._Buffer_allocUnsafe=e.allocUnsafe||function(t){return new e(t)}):r._Buffer_from=r._Buffer_allocUnsafe=null}},787:function(e,t,n){"use strict";var r=n(0),o=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s};t.a=function(){var e=o(Object(r.useState)({}),2)[1];return Object(r.useCallback)((function(){return e({})}),[])}},837:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.unmoutModule=t.mountModule=t.getModules=t.clearModules=t.registerModules=t.registerModule=t.MicroModule=void 0;var r=n(851);Object.defineProperty(t,"registerModule",{enumerable:!0,get:function(){return r.registerModule}}),Object.defineProperty(t,"registerModules",{enumerable:!0,get:function(){return r.registerModules}}),Object.defineProperty(t,"getModules",{enumerable:!0,get:function(){return r.getModules}}),Object.defineProperty(t,"mountModule",{enumerable:!0,get:function(){return r.mountModule}}),Object.defineProperty(t,"unmoutModule",{enumerable:!0,get:function(){return r.unmoutModule}}),Object.defineProperty(t,"clearModules",{enumerable:!0,get:function(){return r.clearModules}});var o=n(1025);t.MicroModule=o.default},851:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.unmoutModule=t.mountModule=t.loadModule=t.getImportedModule=t.getAllImportedModules=t.getModules=t.removeCSS=t.appendCSS=t.parseUrlAssets=t.registerModules=t.registerModule=t.clearModules=t.removeModule=t.registerRuntimes=t.moduleLoader=void 0;var s=n(946),a=n(1021),c=n(1023),u=[],l={},p={},f=/\.css(\?((?!\.js$).)+)?$/;t.moduleLoader=new a.default,t.registerRuntimes=function(e){return c.parseRuntime(e)},t.removeModule=function(e){u=u.filter((function(t){return t.name!==e})),delete l[e],t.moduleLoader.removeTask(e)},t.clearModules=function(){u=[],l={},t.moduleLoader.clearTask()},t.registerModule=function(e){e.url||e.render?(u.filter((function(t){return t.name===e.name})).length&&t.removeModule(e.name),u.push(e)):console.error("[icestark module] url and render cannot both be empty. name: %s",e.name)},t.registerModules=function(e){e.forEach((function(e){return t.registerModule(e)}))};function d(e,t,n){return void 0===n&&(n=document.getElementsByTagName("head")[0]),new Promise((function(r,o){n||o(new Error("no root element for css assert: "+t));var i=document.createElement("link");i.setAttribute("module",e),i.rel="stylesheet",i.href=t,i.addEventListener("error",(function(){return console.error("css asset loaded error: "+t),r()}),!1),i.addEventListener("load",(function(){return r()}),!1),n.appendChild(i)}))}function h(e,t,n){(t||document).querySelectorAll("link[module="+e+"]").forEach((function(e){(n&&n.includes(e.getAttribute("href"))||!n)&&e.parentNode.removeChild(e)}))}t.parseUrlAssets=function(e){var t=[],n=[];return(Array.isArray(e)?e:[e]).forEach((function(e){f.test(e)?n.push(e):t.push(e)})),{jsList:t,cssList:n}},t.appendCSS=d,t.removeCSS=h,t.getModules=function(){return u||[]},t.getAllImportedModules=function(){return l},t.getImportedModule=function(e){if("string"==typeof e)return l[e];console.error("[icestark-module]: should be string, but get "+typeof e)},t.loadModule=function(e,n){return o(void 0,void 0,void 0,(function(){var o,a,u,f,h,m,g,y,b,v,w,T,O,S,k,M,_;return i(this,(function(i){switch(i.label){case 0:return o=e.name,a=e.url,u=e.runtime,f=null,l[o]?[3,4]:(h=null,u?[4,c.parseRuntime(u)]:[3,2]);case 1:h=i.sent(),i.label=2;case 2:return m=t.parseUrlAssets(a),g=m.jsList,y=m.cssList,f=function(e,t){var n=null;if(t||e)if(e)if("function"==typeof e)n=new e;else{var r="boolean"==typeof e?{}:e;n=new s.default(r)}else n=new s.default;return n}(n,h),[4,t.moduleLoader.execModule({name:o,url:g},f,h)];case 3:b=i.sent(),l[o]={moduleInfo:b,moduleSandbox:f,moduleCSS:y},i.label=4;case 4:return v=l[o],w=v.moduleInfo,T=v.moduleCSS,w?(S=e.mount||(null==w?void 0:w.mount),k=e.unmount||(null==w?void 0:w.unmount),M=w.default||w,S&&k||console.error("[icestark module] Please export mount/unmount function"),(_=function(e){return(e||[]).filter((function(e){return p[e]?(p[e]+=1,!1):(p[e]=1,!0)}))}(T)).length?[4,Promise.all(_.map((function(e){return d(o,e)})))]:[3,6]):(O="load or exec module faild",console.error(O),[2,Promise.reject(new Error(O))]);case 5:i.sent(),i.label=6;case 6:return void 0!==w.component&&console.warn("[icestark module] The export function name called component is conflict, please change it or it will be ignored."),[2,r(r({},w),{mount:S,unmount:k,component:M})]}}))}))},t.mountModule=function(e,n,r,s){return void 0===r&&(r={}),o(void 0,void 0,void 0,(function(){var o,a,c;return i(this,(function(i){switch(i.label){case 0:return[4,t.loadModule(e,s)];case 1:return o=i.sent(),a=o.mount,c=o.component,[2,a(c,n,r)]}}))}))},t.unmoutModule=function(e,t){var n,r,o,i=e.name,s=null===(n=l[i])||void 0===n?void 0:n.moduleInfo,a=null===(r=l[i])||void 0===r?void 0:r.moduleSandbox,c=e.unmount||(null==s?void 0:s.unmount),u=function(e){return(e||[]).filter((function(e){return p[e]>1?(p[e]-=1,!1):(delete p[e],!0)}))}(null===(o=l[i])||void 0===o?void 0:o.moduleCSS);if(h(i,document,u),(null==a?void 0:a.clear)&&a.clear(),c&&t)return c(t)}},867:function(e,t,n){"use strict";function r(e){if(!e)return"";var t,n,r,o,i,s,a;e=e.toString();var c=new Array(-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1);for(s=e.length,i=0,a="";i<s;){do{t=c[255&e.charCodeAt(i++)]}while(i<s&&-1==t);if(-1==t)break;do{n=c[255&e.charCodeAt(i++)]}while(i<s&&-1==n);if(-1==n)break;a+=String.fromCharCode(t<<2|(48&n)>>4);do{if(61==(r=255&e.charCodeAt(i++)))return a;r=c[r]}while(i<s&&-1==r);if(-1==r)break;a+=String.fromCharCode((15&n)<<4|(60&r)>>2);do{if(61==(o=255&e.charCodeAt(i++)))return a;o=c[o]}while(i<s&&-1==o);if(-1==o)break;a+=String.fromCharCode((3&r)<<6|o)}return a}function o(e){if(!e)return"";var t,n,r,o,i,s,a=e.toString(),c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(r=a.length,n=0,t="";n<r;){if(o=255&a.charCodeAt(n++),n==r){t+=c.charAt(o>>2),t+=c.charAt((3&o)<<4),t+="==";break}if(i=a.charCodeAt(n++),n==r){t+=c.charAt(o>>2),t+=c.charAt((3&o)<<4|(240&i)>>4),t+=c.charAt((15&i)<<2),t+="=";break}s=a.charCodeAt(n++),t+=c.charAt(o>>2),t+=c.charAt((3&o)<<4|(240&i)>>4),t+=c.charAt((15&i)<<2|(192&s)>>6),t+=c.charAt(63&s)}return t}function i(e){var t,n,r,o,i,s;for(t="",r=e.length,n=0;n<r;)switch((o=e.charCodeAt(n++))>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:t+=e.charAt(n-1);break;case 12:case 13:i=e.charCodeAt(n++),t+=String.fromCharCode((31&o)<<6|63&i);break;case 14:i=e.charCodeAt(n++),s=e.charCodeAt(n++),t+=String.fromCharCode((15&o)<<12|(63&i)<<6|(63&s)<<0)}return t}var s={rc4:function(e,t){for(var n,r=[],o=0,i="",s=0;s<256;s++)r[s]=s;for(s=0;s<256;s++)o=(o+r[s]+e.charCodeAt(s%e.length))%256,n=r[s],r[s]=r[o],r[o]=n;s=0,o=0;for(var a=0;a<t.length;a++)o=(o+r[s=(s+1)%256])%256,n=r[s],r[s]=r[o],r[o]=n,i+=String.fromCharCode(t.charCodeAt(a)^r[(r[s]+r[o])%256]);return i},decode64:r,decode64buf:function(e){return i(String.fromCharCode.apply(null,new Uint8Array(e)))},encode64:o,encode64buf:function(e){for(var t="",n=new Uint8Array(e),r=n.byteLength,i=0;i<r;i++)t+=String.fromCharCode(n[i]);return o(t)},utf16to8:function(e){var t,n,r,o;for(t="",r=e.length,n=0;n<r;n++)(o=e.charCodeAt(n))>=1&&o<=127?t+=e.charAt(n):o>2047?(t+=String.fromCharCode(224|o>>12&15),t+=String.fromCharCode(128|o>>6&63),t+=String.fromCharCode(128|o>>0&63)):(t+=String.fromCharCode(192|o>>6&31),t+=String.fromCharCode(128|o>>0&63));return t},utf8to16:i,encodeUid:function(e){if(!e)return"";if(e<<2>0)var t="U".concat(o(e<<2));else t="U".concat(o(4*e));return t}},a=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s},c=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},u=new(function(){function e(){this.available=!1}return e.prototype.init=function(e){this.available=e},e.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.available&&console.log.apply(console,c(["[@ali/lib-powermsg-sdk]"],a(e),!1))},e}());var l=["utf-8","utf8","unicode-1-1-utf-8"];function p(){}function f(e,t){if(void 0===e&&(e="utf-8"),void 0===t&&(t={fatal:!1}),-1===l.indexOf(e.toLowerCase()))throw new RangeError("Failed to construct 'TextDecoder': The encoding label provided ('".concat(e,"') is invalid."));if(t.fatal)throw new Error("Failed to construct 'TextDecoder': the 'fatal' option is unsupported.")}function d(e){for(var t=0,n=Math.min(65536,e.length+1),r=new Uint16Array(n),o=[],i=0;;){var s=t<e.length;if(!s||i>=n-1){if(o.push(String.fromCharCode.apply(null,r.subarray(0,i))),!s)return o.join("");e=e.subarray(t),t=0,i=0}var a=e[t++];if(0==(128&a))r[i++]=a;else if(192==(224&a)){var c=63&e[t++];r[i++]=(31&a)<<6|c}else if(224==(240&a)){c=63&e[t++];var u=63&e[t++];r[i++]=(31&a)<<12|c<<6|u}else if(240==(248&a)){var l=(7&a)<<18|(c=63&e[t++])<<12|(u=63&e[t++])<<6|63&e[t++];l>65535&&(l-=65536,r[i++]=l>>>10&1023|55296,l=56320|1023&l),r[i++]=l}}}Object.defineProperty(p.prototype,"encoding",{value:"utf-8"}),p.prototype.encode=function(e,t){if(void 0===t&&(t={stream:!1}),t.stream)throw new Error("Failed to encode: the 'stream' option is unsupported.");for(var n=0,r=e.length,o=0,i=Math.max(32,r+(r>>>1)+7),s=new Uint8Array(i>>>3<<3);n<r;){var a=e.charCodeAt(n++);if(a>=55296&&a<=56319){if(n<r){var c=e.charCodeAt(n);56320==(64512&c)&&(++n,a=((1023&a)<<10)+(1023&c)+65536)}if(a>=55296&&a<=56319)continue}if(o+4>s.length){i+=8,i=(i*=1+n/e.length*2)>>>3<<3;var u=new Uint8Array(i);u.set(s),s=u}if(0!=(4294967168&a)){if(0==(4294965248&a))s[o++]=a>>>6&31|192;else if(0==(4294901760&a))s[o++]=a>>>12&15|224,s[o++]=a>>>6&63|128;else{if(0!=(4292870144&a))continue;s[o++]=a>>>18&7|240,s[o++]=a>>>12&63|128,s[o++]=a>>>6&63|128}s[o++]=63&a|128}else s[o++]=a}return s.slice?s.slice(0,o):s.subarray(0,o)},Object.defineProperty(f.prototype,"encoding",{value:"utf-8"}),Object.defineProperty(f.prototype,"fatal",{value:!1}),Object.defineProperty(f.prototype,"ignoreBOM",{value:!1});var h=d;"function"==typeof Buffer&&Buffer.from?h=function(e){return Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("utf-8")}:"function"==typeof Blob&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&(h=function(e){var t=new Blob([e],{type:"text/plain;charset=UTF-8"}),n=URL.createObjectURL(t);try{var r=new XMLHttpRequest;return r.open("GET",n,!1),r.send(),r.responseText}catch(t){return d(e)}finally{URL.revokeObjectURL(n)}}),f.prototype.decode=function(e,t){if(void 0===t&&(t={stream:!1}),t.stream)throw new Error("Failed to decode: the 'stream' option is unsupported.");var n;return n=e instanceof Uint8Array?e:e.buffer instanceof ArrayBuffer?new Uint8Array(e.buffer):new Uint8Array(e),h(n)};(null===window||void 0===window?void 0:window.TextEncoder)&&window.TextEncoder,(null===window||void 0===window?void 0:window.TextDecoder)&&window.TextDecoder;function m(e){try{if("undefined"!=typeof window&&"function"==typeof(null===window||void 0===window?void 0:window.atob))return null===window||void 0===window?void 0:window.atob(e)}catch(e){console.log("atob error > ",e)}var t=String(e).replace(/[=]+$/,"");if(t.length%4==1)throw new Error("'atob' failed: The string to be decoded is not correctly encoded.");for(var n="",r=0,o=void 0,i=void 0,s=0;i=t.charAt(s++);~i&&(o=r%4?64*o+i:i,r++%4)?n+=String.fromCharCode(255&o>>(-2*r&6)):0)i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(i);return n}function g(e){try{if("undefined"!=typeof window&&"function"==typeof(null===window||void 0===window?void 0:window.btoa))return null===window||void 0===window?void 0:window.btoa(e)}catch(e){console.log(e)}for(var t,n,r,o,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",s="",a=0,c=(e=String(e)).length%3;a<e.length;){if((n=e.charCodeAt(a++))>255||(r=e.charCodeAt(a++))>255||(o=e.charCodeAt(a++))>255)throw new TypeError("Failed to execute 'btoa' on 'Window': The string to be encoded contains characters outside of the Latin1 range.");s+=i.charAt((t=n<<16|r<<8|o)>>18&63)+i.charAt(t>>12&63)+i.charAt(t>>6&63)+i.charAt(63&t)}return c?s.slice(0,c-3)+"===".substring(c):s}function y(e){var t,n;t=Array.prototype.forEach,n=Array.prototype.map,this.each=function(e,n,r){if(null!==e)if(t&&e.forEach===t)e.forEach(n,r);else if(e.length===+e.length){for(var o=0,i=e.length;o<i;o++)if(n.call(r,e[o],o,e)==={})return}else for(var s in e)if(e.hasOwnProperty(s)&&n.call(r,e[s],s,e)==={})return},this.map=function(e,t,r){var o=[];return null==e?o:n&&e.map===n?e.map(t,r):(this.each(e,(function(e,n,i){o[o.length]=t.call(r,e,n,i)})),o)},"object"==typeof e?(this.hasher=e.hasher,this.screen_resolution=e.screen_resolution,this.canvas=e.canvas,this.ie_activex=e.ie_activex):"function"==typeof e&&(this.hasher=e)}function b(){return!!T()||"undefined"!=typeof window&&"undefined"!=typeof document&&!v()&&!w()}function v(){return"undefined"!=typeof my}function w(){return"undefined"!=typeof wx}function T(){var e="undefined"!=typeof my&&void 0===my.connectSocket,t="undefined"!=typeof wx&&void 0===wx.connectSocket;return e||t}y.prototype={get:function(){var e=[];(e.push(navigator.userAgent),e.push(navigator.language),e.push(screen.colorDepth),this.screen_resolution)&&(void 0!==this.getScreenResolution()&&e.push(this.getScreenResolution().join("x")));return e.push((new Date).getTimezoneOffset()),e.push(this.hasSessionStorage()),e.push(this.hasLocalStorage()),e.push(!!window.indexedDB),document.body?e.push(typeof document.body.addBehavior):e.push("undefined"),e.push(typeof window.openDatabase),e.push(navigator.cpuClass),e.push(navigator.platform),e.push(navigator.doNotTrack),e.push(this.getPluginsString()),this.canvas&&this.isCanvasSupported()&&e.push(this.getCanvasFingerprint()),this.hasher?this.hasher(e.join("###"),31):this.murmurhash3_32_gc(e.join("###"),31)},murmurhash3_32_gc:function(e,t){var n,r,o,i,s,a,c,u;for(n=3&e.length,r=e.length-n,o=t,s=3432918353,a=461845907,u=0;u<r;)c=255&e.charCodeAt(u)|(255&e.charCodeAt(++u))<<8|(255&e.charCodeAt(++u))<<16|(255&e.charCodeAt(++u))<<24,++u,o=27492+(65535&(i=5*(65535&(o=(o^=c=(65535&(c=(c=(65535&c)*s+(((c>>>16)*s&65535)<<16)&4294967295)<<15|c>>>17))*a+(((c>>>16)*a&65535)<<16)&4294967295)<<13|o>>>19))+((5*(o>>>16)&65535)<<16)&4294967295))+((58964+(i>>>16)&65535)<<16);switch(c=0,n){case 3:c^=(255&e.charCodeAt(u+2))<<16;case 2:c^=(255&e.charCodeAt(u+1))<<8;case 1:o^=c=(65535&(c=(c=(65535&(c^=255&e.charCodeAt(u)))*s+(((c>>>16)*s&65535)<<16)&4294967295)<<15|c>>>17))*a+(((c>>>16)*a&65535)<<16)&4294967295}return o^=e.length,o=2246822507*(65535&(o^=o>>>16))+((2246822507*(o>>>16)&65535)<<16)&4294967295,o=3266489909*(65535&(o^=o>>>13))+((3266489909*(o>>>16)&65535)<<16)&4294967295,(o^=o>>>16)>>>0},hasLocalStorage:function(){try{return!!window.localStorage}catch(e){return!0}},hasSessionStorage:function(){try{return!!window.sessionStorage}catch(e){return!0}},isCanvasSupported:function(){var e=document.createElement("canvas");return!(!e.getContext||!e.getContext("2d"))},isIE:function(){return"Microsoft Internet Explorer"===navigator.appName||!("Netscape"!==navigator.appName||!/Trident/.test(navigator.userAgent))},getPluginsString:function(){return this.isIE()&&this.ie_activex?this.getIEPluginsString():this.getRegularPluginsString()},getRegularPluginsString:function(){return this.map(navigator.plugins,(function(e){var t=this.map(e,(function(e){return[e.type,e.suffixes].join("~")})).join(",");return[e.name,e.description,t].join("::")}),this).join(";")},getIEPluginsString:function(){if(window.ActiveXObject){return this.map(["ShockwaveFlash.ShockwaveFlash","AcroPDF.PDF","PDF.PdfCtrl","QuickTime.QuickTime","rmocx.RealPlayer G2 Control","rmocx.RealPlayer G2 Control.1","RealPlayer.RealPlayer(tm) ActiveX Control (32-bit)","RealVideo.RealVideo(tm) ActiveX Control (32-bit)","RealPlayer","SWCtl.SWCtl","WMPlayer.OCX","AgControl.AgControl","Skype.Detection"],(function(e){try{return new ActiveXObject(e),e}catch(e){return null}})).join(";")}return""},getScreenResolution:function(){return[screen.height,screen.width]},getCanvasFingerprint:function(){var e=document.createElement("canvas"),t=e.getContext("2d"),n="http://valve.github.io";return t.textBaseline="top",t.font="14px 'Arial'",t.textBaseline="alphabetic",t.fillStyle="#f60",t.fillRect(125,1,62,20),t.fillStyle="#069",t.fillText(n,2,15),t.fillStyle="rgba(102, 204, 0, 0.7)",t.fillText(n,4,17),e.toDataURL()}};var O="";new(function(){function e(){}return e.prototype.init=function(e){this.insertMtop=e},e.prototype.miniAppMtop=function(e){return new Promise((function(t,n){var r=my.getSystemInfoSync&&my.getSystemInfoSync();r&&r.app&&("alipay"===r.app||"wealth"===r.app)||"alipay"===O?my.call("mtop",Object.assign(e,{apiName:e.api,apiVersion:e.v,data:e.data,complete:t,fail:n})):((e=e||{}).success=t,e.fail=n,my.sendMtop(e))}))},e.prototype.wxAppMtop=function(e){return this.insertMtop?this.insertMtop.request(e):Promise.reject("微信环境请传通过 accs.init 入参传入 mtop")},e.prototype.h5Mtop=function(e){return this.insertMtop?this.insertMtop.request(e):lib.mtop?lib.mtop.request(e):Promise.reject("Not find lib.mtop, 请使用mtop包或手动在 accs.init 参数中传入")},e.prototype.request=function(e){return T()?this.h5Mtop(e):v()?this.miniAppMtop(e):w()?this.wxAppMtop(e):this.h5Mtop(e)},e}());var S=function(e){null==e&&(e=(new Date).getTime()),this.N=624,this.M=397,this.MATRIX_A=2567483615,this.UPPER_MASK=2147483648,this.LOWER_MASK=2147483647,this.mt=new Array(this.N),this.mti=this.N+1,e.constructor==Array?this.init_by_array(e,e.length):this.init_seed(e)};S.prototype.init_seed=function(e){for(this.mt[0]=e>>>0,this.mti=1;this.mti<this.N;this.mti++){e=this.mt[this.mti-1]^this.mt[this.mti-1]>>>30;this.mt[this.mti]=(1812433253*((4294901760&e)>>>16)<<16)+1812433253*(65535&e)+this.mti,this.mt[this.mti]>>>=0}},S.prototype.init_by_array=function(e,t){var n,r,o;for(this.init_seed(19650218),n=1,r=0,o=this.N>t?this.N:t;o;o--){var i=this.mt[n-1]^this.mt[n-1]>>>30;this.mt[n]=(this.mt[n]^(1664525*((4294901760&i)>>>16)<<16)+1664525*(65535&i))+e[r]+r,this.mt[n]>>>=0,r++,++n>=this.N&&(this.mt[0]=this.mt[this.N-1],n=1),r>=t&&(r=0)}for(o=this.N-1;o;o--){i=this.mt[n-1]^this.mt[n-1]>>>30;this.mt[n]=(this.mt[n]^(1566083941*((4294901760&i)>>>16)<<16)+1566083941*(65535&i))-n,this.mt[n]>>>=0,++n>=this.N&&(this.mt[0]=this.mt[this.N-1],n=1)}this.mt[0]=2147483648},S.prototype.random_int=function(){var e,t=new Array(0,this.MATRIX_A);if(this.mti>=this.N){var n;for(this.mti==this.N+1&&this.init_seed(5489),n=0;n<this.N-this.M;n++)e=this.mt[n]&this.UPPER_MASK|this.mt[n+1]&this.LOWER_MASK,this.mt[n]=this.mt[n+this.M]^e>>>1^t[1&e];for(;n<this.N-1;n++)e=this.mt[n]&this.UPPER_MASK|this.mt[n+1]&this.LOWER_MASK,this.mt[n]=this.mt[n+(this.M-this.N)]^e>>>1^t[1&e];e=this.mt[this.N-1]&this.UPPER_MASK|this.mt[0]&this.LOWER_MASK,this.mt[this.N-1]=this.mt[this.M-1]^e>>>1^t[1&e],this.mti=0}return e=this.mt[this.mti++],e^=e>>>11,e^=e<<7&2636928640,e^=e<<15&4022730752,(e^=e>>>18)>>>0},S.prototype.random_int31=function(){return this.random_int()>>>1},S.prototype.random_incl=function(){return this.random_int()*(1/4294967295)},S.prototype.random=function(){return this.random_int()*(1/4294967296)},S.prototype.random_excl=function(){return(this.random_int()+.5)*(1/4294967296)},S.prototype.random_long=function(){return(67108864*(this.random_int()>>>5)+(this.random_int()>>>6))*(1/9007199254740992)};var k=new S(Math.random()*Number.MAX_SAFE_INTEGER);function M(e){for(var t=e.length;t--;)e[t]=Math.floor(256*k.random());return e}var _,P,x,A;T()?window.crypto:v()||w()||window.crypto;!function(e){e.OFFLINE="offline",e.WIFI="wifi",e.G_2="2g",e.G_3="3g",e.G_4="4g",e.G_5="5g",e.UNKNOWN="unknown"}(_||(_={})),function(e){e.OFFLINE="none",e.WIFI="wifi",e.G_2="2g",e.G_3="3g",e.G_4="4g",e.G_5="5g",e.UNKNOWN="unknown"}(P||(P={})),function(e){e.OFFLINE="NOTREACHABLE",e.WIFI="WIFI",e.G_2="2g",e.G_3="3g",e.G_4="4g",e.UNKNOWN="UNKNOWN"}(x||(x={})),function(e){e.OFFLINE="NONE",e.WIFI="WIFI",e.G_2="2g",e.G_3="3g",e.G_4="4g",e.CELL="CELL",e.UNKNOWN="UNKNOWN"}(A||(A={}));function N(e){var t=typeof e;return"string"===t||"object"===t&&null!=e&&!Array.isArray(e)&&"[object String]"==function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}(e)}function I(e){var t=typeof e;return null!=e&&("object"===t||"function"===t)}function E(e){return"function"==typeof e}var C;var j,R=b()?window.sessionStorage:(C=C||{},{setItem:function(e,t){C[e]=t},getItem:function(e){return C[e]}}),L={TOKEN:{type:"TOKEN_CLOSE",message:"关闭链接, 获取 token 不合法",reconnectAble:!1},RECONNECT:{type:"CLOSE_RECONNECT",message:"关闭链接, webSocket 重连结束",reconnectAble:!1},NORMAL:{type:"CLOSE",message:"关闭链接, webSocket onClose 触发"}},D=function(){return(D=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};!function(e){e[e.INITIALIZED=0]="INITIALIZED",e[e.ONOPEN=1]="ONOPEN",e[e.CLOSE=2]="CLOSE",e[e.ONCLOSE=3]="ONCLOSE",e[e.CONNECT_FAILED=4]="CONNECT_FAILED",e[e.ON_SOCKET_ERROR=5]="ON_SOCKET_ERROR"}(j||(j={}));var U=function(){function e(e){var t=this;this.onopen=null,this.onclose=null,this.onmessage=null,this.onerror=null,my.connectSocket({url:e,success:function(){},fail:function(e){t.readyState=j.CONNECT_FAILED,t&&t._onError&&E(t._onError)&&t._onError(e)}}),this.readyState=j.INITIALIZED,my.onSocketOpen((function(e){t&&(t.readyState=j.ONOPEN,t.onopen&&E(t.onopen)&&t.onopen(e))})),my.onSocketClose((function(e){t&&(t.readyState=j.ONCLOSE,t.onclose&&E(t.onclose)&&t.onclose(D(D({},e),{accsMessage:L.NORMAL})))})),my.onSocketError((function(e){t&&(t.readyState=j.ON_SOCKET_ERROR,t._onError&&E(t._onError)&&t._onError(e))})),my.onSocketMessage((function(e){t&&t.onmessage&&E(t.onmessage)&&t.onmessage(e)}))}return e.prototype._onError=function(e){this&&this.onerror&&E(this.onerror)&&this.onerror(e)},e.prototype.close=function(){this.readyState=j.CLOSE,my.closeSocket()},e.prototype.send=function(e){this.readyState===j.ONOPEN&&my.sendSocketMessage({data:e,fail:function(e){throw e}})},e}(),B=function(){function e(e){var t=this;this.onopen=null,this.onclose=null,this.onmessage=null,this.onerror=null,this.socketTask=wx.connectSocket({url:e,success:function(){},fail:function(e){t.readyState=j.CONNECT_FAILED,t&&t._onError&&E(t._onError)&&t._onError(e)}}),this.readyState=j.INITIALIZED,this.socketTask.onOpen((function(e){t&&(t.readyState=j.ONOPEN,t.onopen&&E(t.onopen)&&t.onopen(e))})),this.socketTask.onClose((function(e){t&&(t.readyState=j.ONCLOSE,t.onclose&&E(t.onclose)&&t.onclose(D(D({},e),{accsMessage:L.NORMAL})))})),this.socketTask.onError((function(e){t&&(t.readyState=j.ON_SOCKET_ERROR,t._onError&&E(t._onError)&&t._onError(e))})),this.socketTask.onMessage((function(e){t&&t.onmessage&&E(t.onmessage)&&t.onmessage(e)}))}return e.prototype._onError=function(e){this&&this.onerror&&E(this.onerror)&&this.onerror(e)},e.prototype.close=function(){this.readyState=j.CLOSE,this.socketTask.close()},e.prototype.send=function(e){this.readyState===j.ONOPEN&&this.socketTask.send({data:e,fail:function(e){throw e}})},e}();var V,G=function(){if(b()&&window.WebSocket)return window.WebSocket;if(v()&&"function"==typeof my.connectSocket)return U;if(w()&&"function"==typeof wx.connectSocket)return B;throw"Not find WebSocket API!"}();!function(e){!function(e){e.ACCS_H5="ACCS_H5",e.ACCS_WV="ACCS_WV"}(e.Protocol||(e.Protocol={})),function(e){e.RES="RES",e.DATA="DATA"}(e.Type||(e.Type={})),function(e){e.COMMON="COMMON",e.GZIP="GZIP",e.ZLIB="ZLIB",e.INVALID="INVALID"}(e.CompressType||(e.CompressType={}))}(V||(V={}));var K=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},z=null;!function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){(function(e){var t=function(e){return e&&e.__esModule?e:{default:e}}(n(1));z=t.default}).call(t,function(){return this}())},function(e,t,n){!function(){function t(e,t){t.push(255&e)}function r(e,t){t.push(255&e),t.push(e>>>8)}function o(e,t){r(65535&e,t),r(e>>>16,t)}function i(e){return e.shift()}function s(e){return e.shift()|e.shift()<<8}function a(e){var t=s(e),n=s(e);return n>32768?((n-=32768)<<16|t)+32768*Math.pow(2,16):n<<16|t}function c(e){for(var t=[];0!==e[0];)t.push(String.fromCharCode(e.shift()));return e.shift(),t.join("")}var u=n(2),l=n(3),p=31,f=139,d={deflate:8},h={FTEXT:1,FHCRC:2,FEXTRA:4,FNAME:8,FCOMMENT:16},m={fat:0,amiga:1,vmz:2,unix:3,"vm/cms":4,atari:5,hpfs:6,macintosh:7,"z-system":8,cplm:9,"tops-20":10,ntfs:11,qdos:12,acorn:13,vfat:14,vms:15,beos:16,tandem:17,theos:18},g="unix",y=6;e.exports={zip:function(e,n){var r,i=0,s=[];return n||(n={}),r=n.level||y,"string"==typeof e&&(e=Array.prototype.map.call(e,(function(e){return e.charCodeAt(0)}))),t(p,s),t(f,s),t(d.deflate,s),n.name&&(i|=h.FNAME),t(i,s),o(n.timestamp||parseInt(Date.now()/1e3,10),s),t(1===r?4:9===r?2:0,s),t(m[g],s),n.name&&(function(e,n){var r,o=e.length;for(r=0;o>r;r+=1)t(e.charCodeAt(r),n)}(n.name.substring(n.name.lastIndexOf("/")+1),s),t(0,s)),l.deflate(e,r).forEach((function(e){t(e,s)})),o(parseInt(u(e),16),s),o(e.length,s),s},unzip:function(e,t){var n=t.dataId;t=K(t,["dataId"]);var r,o,g,y,b=Array.prototype.slice.call(e,0);if(i(b)!==p||i(b)!==f)throw"Not a GZIP file";if(r=i(b),!(r=Object.keys(d).some((function(e){return o=e,d[e]===r}))))throw"Unsupported compression method";if(g=i(b),a(b),i(b),r=i(b),Object.keys(m).some((function(e){return m[e]===r?(e,!0):void 0})),Object.keys(h),g&h.FEXTRA&&function(e,t){var n,r=[];for(n=0;t>n;n+=1)r.push(e.shift())}(b,r=s(b)),g&h.FNAME&&c(b),g&h.FCOMMENT&&c(b),g&h.FHCRC&&s(b),"deflate"===o&&(y=l.inflate(b.splice(0,b.length-8))),g&h.FTEXT&&(y=Array.prototype.map.call(y,(function(e){return String.fromCharCode(e)})).join("")),a(b)!==parseInt(u(y),16))throw"Checksum does not match, dataId:"+n;if(a(b)!==y.length)throw"Size of decompressed file not correct";return y},get DEFAULT_LEVEL(){return y}}}()},function(e,t){!function(){function t(e){var t,n,r,i,s=-1;for(t=0,r=e.length;r>t;t+=1){for(i=255&(s^e[t]),n=0;8>n;n+=1)1==(1&i)?i=i>>>1^o:i>>>=1;s=s>>>8^i}return-1^s}function n(e,t){var o,i,s;if(void 0!==n.crc&&t&&e||(n.crc=-1,e)){for(o=n.crc,i=0,s=e.length;s>i;i+=1)o=o>>>8^r[255&(o^e[i])];return n.crc=o,-1^o}}var r=[],o=3988292384;(function(){var e,t,n;for(t=0;256>t;t+=1){for(e=t,n=0;8>n;n+=1)1&e?e=o^e>>>1:e>>>=1;r[t]=e>>>0}})(),e.exports=function(e,r){e="string"==typeof e?function(e){return Array.prototype.map.call(e,(function(e){return e.charCodeAt(0)}))}(e):e;return((r?t(e):n(e))>>>0).toString(16)},e.exports.direct=t,e.exports.table=n}()},function(e,t,n){e.exports={inflate:n(4),deflate:n(5)}},function(e,t){!function(){function t(){this.next=null,this.list=null}function n(){this.e=0,this.b=0,this.n=0,this.t=null}function r(e,r,o,i,s,a){this.BMAX=16,this.N_MAX=288,this.status=0,this.root=null,this.m=0;var c,u,l,p,f,d,h,m,g,y,b,v,w,T,O,S,k,M=[],_=[],P=new n,x=[],A=[],N=[];for(k=this.root=null,d=0;d<this.BMAX+1;d++)M[d]=0;for(d=0;d<this.BMAX+1;d++)_[d]=0;for(d=0;d<this.BMAX;d++)x[d]=null;for(d=0;d<this.N_MAX;d++)A[d]=0;for(d=0;d<this.BMAX+1;d++)N[d]=0;u=r>256?e[256]:this.BMAX,g=e,y=0,d=r;do{M[g[y]]++,y++}while(--d>0);if(M[0]===r)return this.root=null,this.m=0,void(this.status=0);for(h=1;h<=this.BMAX&&0===M[h];h++);for(m=h,h>a&&(a=h),d=this.BMAX;0!==d&&0===M[d];d--);for(p=d,a>d&&(a=d),T=1<<h;d>h;h++,T<<=1)if((T-=M[h])<0)return this.status=2,void(this.m=a);if((T-=M[d])<0)return this.status=2,void(this.m=a);for(M[d]+=T,N[1]=h=0,g=M,y=1,w=2;--d>0;)N[w++]=h+=g[y++];g=e,y=0,d=0;do{0!==(h=g[y++])&&(A[N[h]++]=d)}while(++d<r);for(r=N[p],N[0]=d=0,g=A,y=0,f=-1,v=_[0]=0,b=null,O=0;p>=m;m++)for(c=M[m];c-- >0;){for(;m>v+_[1+f];){if(v+=_[1+f],f++,O=(O=p-v)>a?a:O,(l=1<<(h=m-v))>c+1)for(l-=c+1,w=m;++h<O&&!((l<<=1)<=M[++w]);)l-=M[w];for(v+h>u&&u>v&&(h=u-v),O=1<<h,_[1+f]=h,b=[],S=0;O>S;S++)b[S]=new n;(k=k?k.next=new t:this.root=new t).next=null,k.list=b,x[f]=b,f>0&&(N[f]=d,P.b=_[f],P.e=16+h,P.t=b,h=(d&(1<<v)-1)>>v-_[f],x[f-1][h].e=P.e,x[f-1][h].b=P.b,x[f-1][h].n=P.n,x[f-1][h].t=P.t)}for(P.b=m-v,y>=r?P.e=99:g[y]<o?(P.e=g[y]<256?16:15,P.n=g[y++]):(P.e=s[g[y]-o],P.n=i[g[y++]-o]),l=1<<m-v,h=d>>v;O>h;h+=l)b[h].e=P.e,b[h].b=P.b,b[h].n=P.n,b[h].t=P.t;for(h=1<<m-1;0!=(d&h);h>>=1)d^=h;for(d^=h;(d&(1<<v)-1)!==N[f];)v-=_[f],f--}this.m=_[1],this.status=0!==T&&1!==p?1:0}function o(e){for(;e>b;)y|=(P.length===x?-1:255&P[x++])<<b,b+=8}function i(e){return y&L[e]}function s(e){y>>=e,b-=e}function a(e,t,n){var r,a,c;if(0===n)return 0;for(c=0;;){for(o(M),r=(a=S.list[i(M)]).e;r>16;){if(99===r)return-1;s(a.b),o(r-=16),r=(a=a.t[i(r)]).e}if(s(a.b),16!==r){if(15===r)break;for(o(r),T=a.n+i(r),s(r),o(_),r=(a=k.list[i(_)]).e;r>16;){if(99===r)return-1;s(a.b),o(r-=16),r=(a=a.t[i(r)]).e}for(s(a.b),o(r),O=d-a.n-i(r),s(r);T>0&&n>c;)T--,O&=A-1,d&=A-1,e[t+c++]=f[d++]=f[O++];if(c===n)return n}else if(d&=A-1,e[t+c++]=f[d++]=a.n,c===n)return n}return v=-1,c}function c(e,t,n){var r;if(s(r=7&b),o(16),r=i(16),s(16),o(16),r!==(65535&~y))return-1;for(s(16),T=r,r=0;T>0&&n>r;)T--,d&=A-1,o(8),e[t+r++]=f[d++]=i(8),s(8);return 0===T&&(v=-1),r}function u(e,t,n){if(!R){var o,i,s=[];for(o=0;144>o;o++)s[o]=8;for(;256>o;o++)s[o]=9;for(;280>o;o++)s[o]=7;for(;288>o;o++)s[o]=8;if(0!==(i=new r(s,288,257,D,U,m=7)).status)return console.error("HufBuild error: "+i.status),-1;for(R=i.root,m=i.m,o=0;30>o;o++)s[o]=5;if((i=new r(s,30,0,B,V,g=5)).status>1)return R=null,console.error("HufBuild error: "+i.status),-1;h=i.root,g=i.m}return S=R,k=h,M=m,_=g,a(e,t,n)}function l(e,t,n){var c,u,l,p,f,d,h,m,g,y=[];for(c=0;316>c;c++)y[c]=0;if(o(5),h=257+i(5),s(5),o(5),m=1+i(5),s(5),o(4),d=4+i(4),s(4),h>286||m>30)return-1;for(u=0;d>u;u++)o(3),y[G[u]]=i(3),s(3);for(;19>u;u++)y[G[u]]=0;if(0!==(g=new r(y,19,19,null,null,M=7)).status)return-1;for(S=g.root,M=g.m,p=h+m,c=l=0;p>c;)if(o(M),s(u=(f=S.list[i(M)]).b),16>(u=f.n))y[c++]=l=u;else if(16===u){if(o(2),u=3+i(2),s(2),c+u>p)return-1;for(;u-- >0;)y[c++]=l}else if(17===u){if(o(3),u=3+i(3),s(3),c+u>p)return-1;for(;u-- >0;)y[c++]=0;l=0}else{if(o(7),u=11+i(7),s(7),c+u>p)return-1;for(;u-- >0;)y[c++]=0;l=0}if(g=new r(y,h,257,D,U,M=C),0===M&&(g.status=1),0!==g.status&&1!==g.status)return-1;for(S=g.root,M=g.m,c=0;m>c;c++)y[c]=y[c+h];return g=new r(y,m,0,B,V,_=j),k=g.root,0===(_=g.m)&&h>257||0!==g.status?-1:a(e,t,n)}function p(e,t,n){var r,p;for(r=0;n>r;){if(w&&-1===v)return r;if(T>0){if(v!==N)for(;T>0&&n>r;)T--,O&=A-1,d&=A-1,e[t+r++]=f[d++]=f[O++];else{for(;T>0&&n>r;)T--,d&=A-1,o(8),e[t+r++]=f[d++]=i(8),s(8);0===T&&(v=-1)}if(r===n)return r}if(-1===v){if(w)break;o(1),0!==i(1)&&(w=!0),s(1),o(2),v=i(2),s(2),S=null,T=0}switch(v){case N:p=c(e,t+r,n-r);break;case I:p=S?a(e,t+r,n-r):u(e,t+r,n-r);break;case E:p=S?a(e,t+r,n-r):l(e,t+r,n-r);break;default:p=-1}if(-1===p)return w?0:-1;r+=p}return r}var f,d,h,m,g,y,b,v,w,T,O,S,k,M,_,P,x,A=32768,N=0,I=1,E=2,C=9,j=6,R=null,L=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535],D=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],U=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,99,99],B=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],V=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],G=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];e.exports=function(e){var t,n=[];f||(f=[]),d=0,y=0,b=0,v=-1,w=!1,T=O=0,S=null,P=e,x=0;do{t=p(n,n.length,1024)}while(t>0);return P=null,n}}()},function(e,t){!function(){function t(){this.fc=0,this.dl=0}function n(){this.dyn_tree=null,this.static_tree=null,this.extra_bits=null,this.extra_base=0,this.elems=0,this.max_length=0,this.max_code=0}function r(e,t,n,r){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=r}function o(){this.next=null,this.len=0,this.ptr=[],this.off=0}function i(e){var r;if(e?1>e?e=1:e>9&&(e=9):e=Be,ie=e,L=!1,te=!1,null===ht){for(C=j=R=null,ht=[],V=[],G=[],K=[],z=[],ce=[],r=0;ft>r;r++)ce[r]=new t;for(ue=[],r=0;2*at+1>r;r++)ue[r]=new t;for(le=[],r=0;st+2>r;r++)le[r]=new t;for(pe=[],r=0;at>r;r++)pe[r]=new t;for(fe=[],r=0;2*ct+1>r;r++)fe[r]=new t;de=new n,he=new n,me=new n,ge=[],ye=[],we=[],Te=[],Oe=[],Se=[],ke=[],Me=[]}}function s(e){e.next=C,C=e}function a(e){return z[Re+e]}function c(e,t){return z[Re+e]=t}function u(e){ht[U+D++]=e,U+D===Ge&&function(){var e,t;if(0!==D){for(e=function(){var e;return null!==C?(e=C,C=C.next):e=new o,e.next=null,e.len=e.off=0,e}(),null===j?j=R=e:R=R.next=e,e.len=D-U,t=0;t<e.len;t++)e.ptr[t]=ht[U+t];D=U=0}}()}function l(e){e&=65535,Ge-2>U+D?(ht[U+D++]=255&e,ht[U+D++]=e>>>8):(u(255&e),u(e>>>8))}function p(){J=(J<<dt^255&V[$+ze-1])&Ye,Y=a(J),z[$&qe]=Y,c(J,$)}function f(e,t){N(t[e].fc,t[e].dl)}function d(e){return 255&(256>e?Oe[e]:Oe[256+(e>>7)])}function h(e,t,n){return e[t].fc<e[n].fc||e[t].fc===e[n].fc&&we[t]<=we[n]}function m(e,t,n){var r;for(r=0;n>r&&je<Ce.length;r++)e[t+r]=255&Ce[je++];return r}function g(e){var t,n,r,o,i=re,s=$,a=Z,c=$>$e?$-$e:Qe,u=$+Fe,l=V[s+a-1],p=V[s+a];Z>=se&&(i>>=2);do{if(V[(t=e)+a]===p&&V[t+a-1]===l&&V[t]===V[s]&&V[++t]===V[s+1]){for(s+=2,t++;u>s;){for(o=!1,r=0;8>r;r+=1)if(t+=1,V[s+=1]!==V[t]){o=!0;break}if(o)break}if(n=Fe-(u-s),s=u-Fe,n>a){if(ee=e,a=n,Ve){if(n>=Fe)break}else if(n>=ae)break;l=V[s+a-1],p=V[s+a]}}}while((e=z[e&qe])>c&&0!=--i);return a}function y(){var e,t,n=Ke-ne-$;if(-1===n)n--;else if($>=Re+$e){for(e=0;Re>e;e++)V[e]=V[e+Re];for(ee-=Re,$-=Re,W-=Re,e=0;Je>e;e++)c(e,(t=a(e))>=Re?t-Re:Qe);for(e=0;Re>e;e++)t=z[e],z[e]=t>=Re?t-Re:Qe;n+=Re}te||(0>=(e=m(V,$+ne,n))?te=!0:ne+=e)}function b(){te||(F=0,H=0,function(){var e,t,n,r,o;if(0===pe[0].dl){for(de.dyn_tree=ce,de.static_tree=le,de.extra_bits=mt,de.extra_base=ot+1,de.elems=st,de.max_length=tt,de.max_code=0,he.dyn_tree=ue,he.static_tree=pe,he.extra_bits=gt,he.extra_base=0,he.elems=at,he.max_length=tt,he.max_code=0,me.dyn_tree=fe,me.static_tree=null,me.extra_bits=yt,me.extra_base=0,me.elems=ct,me.max_length=nt,me.max_code=0,n=0,r=0;rt-1>r;r++)for(Se[r]=n,e=0;e<1<<mt[r];e++)Te[n++]=r;for(Te[n-1]=r,o=0,r=0;16>r;r++)for(ke[r]=o,e=0;e<1<<gt[r];e++)Oe[o++]=r;for(o>>=7;at>r;r++)for(ke[r]=o<<7,e=0;e<1<<gt[r]-7;e++)Oe[256+o++]=r;for(t=0;tt>=t;t++)ge[t]=0;for(e=0;143>=e;)le[e++].dl=8,ge[8]++;for(;255>=e;)le[e++].dl=9,ge[9]++;for(;279>=e;)le[e++].dl=7,ge[7]++;for(;287>=e;)le[e++].dl=8,ge[8]++;for(S(le,st+1),e=0;at>e;e++)pe[e].dl=5,pe[e].fc=I(e,5);T()}}(),function(){var e;for(e=0;Je>e;e++)z[Re+e]=0;if(oe=vt[ie].max_lazy,se=vt[ie].good_length,Ve||(ae=vt[ie].nice_length),re=vt[ie].max_chain,$=0,W=0,0>=(ne=m(V,0,2*Re)))return te=!0,void(ne=0);for(te=!1;Ze>ne&&!te;)y();for(J=0,e=0;ze-1>e;e++)J=(J<<dt^255&V[e])&Ye}(),j=null,D=0,U=0,3>=ie?(Z=ze-1,X=0):(X=ze-1,Q=!1),B=!1)}function v(e,t,n){var r;return L||(b(),L=!0,0!==ne)?(r=w(e,t,n))===n?n:B?r:(3>=ie?function(){for(;0!==ne&&null===j;){var e;if(p(),Y!==Qe&&$e>=$-Y&&((X=g(Y))>ne&&(X=ne)),X>=ze)if(e=x($-ee,X-ze),ne-=X,oe>=X){X--;do{$++,p()}while(0!=--X);$++}else $+=X,X=0,J=((J=255&V[$])<<dt^255&V[$+1])&Ye;else e=x(0,255&V[$]),ne--,$++;for(e&&(P(0),W=$);Ze>ne&&!te;)y()}}():function(){for(;0!==ne&&null===j;){if(p(),Z=X,q=ee,X=ze-1,Y!==Qe&&oe>Z&&$e>=$-Y&&((X=g(Y))>ne&&(X=ne),X===ze&&$-ee>Xe&&X--),Z>=ze&&Z>=X){var e;e=x($-1-q,Z-ze),ne-=Z-1,Z-=2;do{$++,p()}while(0!=--Z);Q=!1,X=ze-1,$++,e&&(P(0),W=$)}else Q?(x(0,255&V[$-1])&&(P(0),W=$),$++,ne--):(Q=!0,$++,ne--);for(;Ze>ne&&!te;)y()}}(),0===ne&&(Q&&x(0,255&V[$-1]),P(1),B=!0),r+w(e,r+t,n-r)):(B=!0,0)}function w(e,t,n){var r,o,i;for(r=0;null!==j&&n>r;){for((o=n-r)>j.len&&(o=j.len),i=0;o>i;i++)e[t+r+i]=j.ptr[j.off+i];var a;if(j.off+=o,j.len-=o,r+=o,0===j.len)a=j,j=j.next,s(a)}if(r===n)return r;if(D>U){for((o=n-r)>D-U&&(o=D-U),i=0;o>i;i++)e[t+r+i]=ht[U+i];r+=o,D===(U+=o)&&(D=U=0)}return r}function T(){var e;for(e=0;st>e;e++)ce[e].fc=0;for(e=0;at>e;e++)ue[e].fc=0;for(e=0;ct>e;e++)fe[e].fc=0;ce[it].fc=1,Ie=Ee=0,_e=Pe=xe=0,Ae=0,Ne=1}function O(e,t){for(var n=ye[t],r=t<<1;be>=r&&(be>r&&h(e,ye[r+1],ye[r])&&r++,!h(e,n,ye[r]));)ye[t]=ye[r],t=r,r<<=1;ye[t]=n}function S(e,t){var n,r,o=[],i=0;for(n=1;tt>=n;n++)i=i+ge[n-1]<<1,o[n]=i;for(r=0;t>=r;r++){var s=e[r].dl;0!==s&&(e[r].fc=I(o[s]++,s))}}function k(e){var t,n,r=e.dyn_tree,o=e.static_tree,i=e.elems,s=-1,a=i;for(be=0,ve=ft,t=0;i>t;t++)0!==r[t].fc?(ye[++be]=s=t,we[t]=0):r[t].dl=0;for(;2>be;){var c=ye[++be]=2>s?++s:0;r[c].fc=1,we[c]=0,Ie--,null!==o&&(Ee-=o[c].dl)}for(e.max_code=s,t=be>>1;t>=1;t--)O(r,t);do{t=ye[et],ye[et]=ye[be--],O(r,et),n=ye[et],ye[--ve]=t,ye[--ve]=n,r[a].fc=r[t].fc+r[n].fc,we[t]>we[n]+1?we[a]=we[t]:we[a]=we[n]+1,r[t].dl=r[n].dl=a,ye[et]=a++,O(r,et)}while(be>=2);ye[--ve]=ye[et],function(e){var t,n,r,o,i,s,a=e.dyn_tree,c=e.extra_bits,u=e.extra_base,l=e.max_code,p=e.max_length,f=e.static_tree,d=0;for(o=0;tt>=o;o++)ge[o]=0;for(a[ye[ve]].dl=0,t=ve+1;ft>t;t++)(o=a[a[n=ye[t]].dl].dl+1)>p&&(o=p,d++),a[n].dl=o,n>l||(ge[o]++,i=0,n>=u&&(i=c[n-u]),s=a[n].fc,Ie+=s*(o+i),null!==f&&(Ee+=s*(f[n].dl+i)));if(0!==d){do{for(o=p-1;0===ge[o];)o--;ge[o]--,ge[o+1]+=2,ge[p]--,d-=2}while(d>0);for(o=p;0!==o;o--)for(n=ge[o];0!==n;)(r=ye[--t])>l||(a[r].dl!==o&&(Ie+=(o-a[r].dl)*a[r].fc,a[r].fc=o),n--)}}(e),S(r,s)}function M(e,t){var n,r,o=-1,i=e[0].dl,s=0,a=7,c=4;for(0===i&&(a=138,c=3),e[t+1].dl=65535,n=0;t>=n;n++)r=i,i=e[n+1].dl,++s<a&&r===i||(c>s?fe[r].fc+=s:0!==r?(r!==o&&fe[r].fc++,fe[ut].fc++):10>=s?fe[lt].fc++:fe[pt].fc++,s=0,o=r,0===i?(a=138,c=3):r===i?(a=6,c=3):(a=7,c=4))}function _(e,t){var n,r,o=-1,i=e[0].dl,s=0,a=7,c=4;for(0===i&&(a=138,c=3),n=0;t>=n;n++)if(r=i,i=e[n+1].dl,!(++s<a&&r===i)){if(c>s)do{f(r,fe)}while(0!=--s);else 0!==r?(r!==o&&(f(r,fe),s--),f(ut,fe),N(s-3,2)):10>=s?(f(lt,fe),N(s-3,3)):(f(pt,fe),N(s-11,7));s=0,o=r,0===i?(a=138,c=3):r===i?(a=6,c=3):(a=7,c=4)}}function P(e){var t,n,r,o,i;if(o=$-W,Me[xe]=Ae,k(de),k(he),r=function(){var e;for(M(ce,de.max_code),M(ue,he.max_code),k(me),e=ct-1;e>=3&&0===fe[bt[e]].dl;e--);return Ie+=3*(e+1)+5+5+4,e}(),(t=Ie+3+7>>3)>=(n=Ee+3+7>>3)&&(t=n),t>=o+4&&W>=0)for(N((Le<<1)+e,3),E(),l(o),l(~o),i=0;o>i;i++)u(V[W+i]);else n===t?(N((De<<1)+e,3),A(le,pe)):(N((Ue<<1)+e,3),function(e,t,n){var r;for(N(e-257,5),N(t-1,5),N(n-4,4),r=0;n>r;r++)N(fe[bt[r]].dl,3);_(ce,e-1),_(ue,t-1)}(de.max_code+1,he.max_code+1,r+1),A(ce,ue));T(),0!==e&&E()}function x(e,t){if(K[_e++]=t,0===e?ce[t].fc++:(e--,ce[Te[t]+ot+1].fc++,ue[d(e)].fc++,G[Pe++]=e,Ae|=Ne),Ne<<=1,0==(7&_e)&&(Me[xe++]=Ae,Ae=0,Ne=1),ie>2&&0==(4095&_e)){var n,r=8*_e,o=$-W;for(n=0;at>n;n++)r+=ue[n].fc*(5+gt[n]);if(r>>=3,Pe<parseInt(_e/2,10)&&r<parseInt(o/2,10))return!0}return _e===He-1||Pe===We}function A(e,t){var n,r,o,i,s=0,a=0,c=0,u=0;if(0!==_e)do{0==(7&s)&&(u=Me[c++]),r=255&K[s++],0==(1&u)?f(r,e):(f((o=Te[r])+ot+1,e),0!==(i=mt[o])&&N(r-=Se[o],i),f(o=d(n=G[a++]),t),0!==(i=gt[o])&&N(n-=ke[o],i)),u>>=1}while(_e>s);f(it,e)}function N(e,t){H>wt-t?(l(F|=e<<H),F=e>>wt-H,H+=t-wt):(F|=e<<H,H+=t)}function I(e,t){var n=0;do{n|=1&e,e>>=1,n<<=1}while(--t>0);return n>>1}function E(){H>8?l(F):H>0&&u(F),F=0,H=0}var C,j,R,L,D,U,B,V,G,K,z,F,H,W,J,Y,q,Q,X,Z,$,ee,te,ne,re,oe,ie,se,ae,ce,ue,le,pe,fe,de,he,me,ge,ye,be,ve,we,Te,Oe,Se,ke,Me,_e,Pe,xe,Ae,Ne,Ie,Ee,Ce,je,Re=32768,Le=0,De=1,Ue=2,Be=6,Ve=!1,Ge=8192,Ke=2*Re,ze=3,Fe=258,He=8192,We=He,Je=32768,Ye=Je-1,qe=Re-1,Qe=0,Xe=4096,Ze=Fe+ze+1,$e=Re-Ze,et=1,tt=15,nt=7,rt=29,ot=256,it=256,st=ot+1+rt,at=30,ct=19,ut=16,lt=17,pt=18,ft=2*st+1,dt=parseInt((15+ze-1)/ze,10),ht=null;He>32768&&console.error("error: INBUFSIZ is too small"),Re<<1>65536&&console.error("error: WSIZE is too large"),258!==Fe&&console.error("error: Code too clever");var mt=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],gt=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],yt=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],bt=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],vt=[new r(0,0,0,0),new r(4,4,8,4),new r(4,5,16,8),new r(4,6,32,32),new r(4,4,16,16),new r(8,16,32,32),new r(8,16,128,128),new r(8,32,128,256),new r(32,128,258,1024),new r(32,258,258,4096)],wt=16;e.exports=function(e,t){var n,r;Ce=e,je=0,void 0===t&&(t=Be),i(t),r=[];do{n=v(r,r.length,1024)}while(n>0);return Ce=null,r},e.exports.DEFAULT_LEVEL=Be}()}]);var F,H=z,W=function(){function e(e){this.protocol=void 0,this.type=void 0,this.compressType=void 0,this.err="0",this.serviceId="",this.dataId="",this.data="",this.source="",this.target="",this.ip="";var t=JSON.parse(e);for(var n in t)t.hasOwnProperty(n)&&(this[n]=t[n])}return e.prototype.getText=function(){return this.data?function(e){if(e){var t,n,r,o=[],i=e.length;for(t=0;t<i;t++)(n=[]).push(e.charCodeAt(t)),0==(n[0]>>7&255)?o.push(e.charAt(t)):6==(n[0]>>5&255)?(n.push(e.charCodeAt(++t)),(r=[]).push(31&n[0]),r.push(63&n[1]),o.push(String.fromCharCode(r[0]<<6|r[1]))):14==(n[0]>>4&255)&&(n.push(e.charCodeAt(++t)),n.push(e.charCodeAt(++t)),(r=[]).push(n[0]<<4|n[1]>>2&15),r.push((3&n[1])<<6|63&n[2]),o.push(String.fromCharCode(r[0]<<8|r[1])));return o.join("")}}(m(this.data)):""},e.prototype.getBinaryArray=function(){var e=this;return new Promise((function(t){if(e.data){var n=m(e.data),r=e.compressType||"COMMON",o=new Uint8Array(n.split("").map((function(e){return e.charCodeAt(0)})));if("GZIP"===String(r)){var i={level:6,name:"",timestamp:parseInt("".concat(Date.now()/1e3),10),dataId:e.dataId};t(o=new Uint8Array(H.unzip(o,i)))}else t(o)}else t([])}))},e}(),J=function(){function e(){this.ackMap={},this.msgMap={},this.subscribeMap={},this.__stack__={},this.__sl__=0}return e.prototype.packMsg=function(e,t,n){var r,o;if(t instanceof Uint8Array&&t.buffer){r=g((o=t,[].map.call(o,(function(e){return String.fromCharCode(e)})).join("")))}else{if(!N(t))throw"non-binary data must be string";r=g(function(e){if(e){var t,n,r=[],o=e.length;for(t=0;t<o;t++)(n=e.charCodeAt(t))>0&&n<=127?r.push(e.charAt(t)):n>=128&&n<=2047?r.push(String.fromCharCode(192|n>>6&31),String.fromCharCode(128|63&n)):n>=2048&&n<=65535&&r.push(String.fromCharCode(224|n>>12&15),String.fromCharCode(128|n>>6&63),String.fromCharCode(128|63&n));return r.join("")}}(t))}var i={};if(I(n)&&n.headers){var s=n.headers;Object.keys(s).forEach((function(e){var t=Number(e);!isNaN(t)&&t>=0&&t<=63&&N(s[e])&&(!1!==n.base64Encode?i[e]=g(s[e]):i[e]=s[e])}))}return{type:"REQ",protocol:"ACCS_H5",dataId:Date.now()%1e8+"_"+Math.round(1e4*Math.random()),serviceId:e,target:e,source:e,data:r,extHeader:i}},e.prototype.processDownlinkMsg=function(e,t){var n=new W(e);if(n.protocol===V.Protocol.ACCS_H5||n.protocol===V.Protocol.ACCS_WV){if("1"==n.err){var r=m(n.data),o={};try{o=JSON.parse(r),console.log(o)}catch(e){console.error(e)}}switch(n.type){case"RES":var i=this.ackMap["_"+n.dataId];i&&(i(n),delete this.ackMap["_"+n.dataId],delete this.msgMap["_"+n.dataId]);break;case"DATA":if(!this.__stack__[n.dataId]){this.__stack__[n.dataId]=!0,this.__sl__++>=50&&(this.__sl__=0,this.__stack__={});var s=this.subscribeMap["_"+n.serviceId];s&&s(n)}n.extHeader&&(n.decodedExtHeader={},Object.keys(n.extHeader).forEach((function(e){n.decodedExtHeader[e]=m(n.extHeader[e])}))),t&&t(n)}}},e}();!function(e){e.INIT="INIT",e.RECONNECT="RECONNECT",e.H5_PING="H5_PING"}(F||(F={}));var Y,q=function(){return(q=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};!function(e){e.CONNECTION_ERROR="connectionError",e.GET_TOKEN_ERROR="getTokenError",e.TOKEN_EXPIRED="tokenExpired",e.NETWORK_CHANGE="networkChange",e.CLOSE="close"}(Y||(Y={}));var Q=function(){function e(e){var t=this;this.token="",this.onOpen=null,this._subscribeMap={},this._reconnectAble=!1,this.connections={},this.lastConnectTime=Date.now(),this.isReInit=!1,this.initHeartCheck=function(){t.heartCheck={stopped:!1,timeoutObj:void 0,serverTimeoutObj:void 0,errorTimes:0,stop:function(){t.heartCheck.timeoutObj&&clearTimeout(t.heartCheck.timeoutObj),t.heartCheck.serverTimeoutObj&&clearTimeout(t.heartCheck.serverTimeoutObj),t.heartCheck.stopped=!0,t.heartCheck.errorTimes=0},reset:function(e,n){t.heartCheck.timeoutObj&&clearTimeout(t.heartCheck.timeoutObj),t.heartCheck.serverTimeoutObj&&clearTimeout(t.heartCheck.serverTimeoutObj),n||(t.heartCheck.errorTimes=0),t.heartCheck.stopped||t.heartCheck.start(e)},start:function(e){var n=e||3e4;t.heartCheck.stopped||(t.heartCheck.timeoutObj=setTimeout((function(){t.send("h5_ping",JSON.stringify({})).then((function(e){if(!t.heartCheck.stopped)try{t.heartCheck.reset(1e3*JSON.parse(e.getText()).timeInterval)}catch(e){}})).catch((function(){})),t.heartCheck.serverTimeoutObj=setTimeout((function(){t.onHeartbeatError&&t.onHeartbeatError(),t.heartCheck.errorTimes++,t.heartCheck.errorTimes>=2?t.reInit(Y.CONNECTION_ERROR):t.heartCheck.reset(2e3,!0)}),3e3)}),n))}}},this.reInit=function(e){t.isReInit=!0,t._closeTimes=-1,t.setReconnectAble(),t._reconnect({isReInit:!0,type:e})},this._reconnect=function(e){var n=e.isReInit,r=e.type,o=n?F.H5_PING:F.RECONNECT,i=function(){var e=t.options.getToken,i=Date.now();e({appKey:t.options.appKey,windowId:t.options.__accs_device}).then((function(e){if(e){var s=t.token;t.token=e,t._getConnectionUrl();var a=Date.now();t._initConnection((function(e){var c,u;if(e.isSuccess){t.lastConnectTime=Date.now(),t.connections[t.token]=e.connection,null===(c=t.connections[s])||void 0===c||c.close(),t._connection=e.connection,t._sendProbe(),t._bindEventHandler(o),t.options.accsHeartbeat&&t.heartCheck.reset(3e4);var l=Date.now(),p=l-i,f=l-a;null===(u=t.onReconnect)||void 0===u||u.call(t,{token:t.token,prevToken:s,connection:t._connection,prevConnection:t.connections[s],type:r,retryTimes:n?0:t._closeTimes,duration:p,socketDuration:f,connectType:o})}else t.onError&&t.onError({type:"OPEN_CONNECTION_ERROR",retryTimes:n?0:t._closeTimes,connectType:o,customError:{windowId:t.options.__accs_device,url:t.url}}),t._reconnect({type:Y.CONNECTION_ERROR})}))}else t._reconnectAble=!1,console.log("webSocket reconnect get TOKEN response error"),t.onClose&&t.onClose({accsMessage:L.TOKEN})})).catch((function(){t._reconnect({type:Y.GET_TOKEN_ERROR})}))};n?i():++t._closeTimes<5?setTimeout((function(){i()}),t.options.reconnectInterval||2e3):(t._reconnectAble=!1,console.log("webSocket reconnect end!"),t.onClose&&t.onClose({accsMessage:L.RECONNECT}))},this.setReconnectAble=function(){t.options.reconnect&&(t._reconnectAble=t.options.reconnect)},this.listenNetworkChange=function(){!function(e){var t=function(){window.addEventListener("online",(function(){e({isConnected:!0,networkType:""})})),window.addEventListener("offline",(function(){e({isConnected:!1,networkType:""})}))};if(!T())return v()?void my.onNetworkStatusChange(e):w()?void wx.onNetworkStatusChange(e):void t();t()}((function(e){e.isConnected&&t.reInit(Y.NETWORK_CHANGE)}))},this.listenConnDuration=function(){setInterval((function(){(Date.now()-t.lastConnectTime)/1e3/60/60>3&&t.reInit(Y.TOKEN_EXPIRED)}),2e3)};var n=e.resolve,r=e.reject,o=e.options;this.options=o,this.accsMsg=new J,this.url="",this.protocol=o.protocol||"ws:",this.onClose=null,this.onError=null,this.onReconnect=null,this.onHeartbeatError=null,this._subscribeMap=this.accsMsg.subscribeMap,this._ackMap=this.accsMsg.ackMap,this._msgMap=this.accsMsg.msgMap,this._closeTimes=0,this._detectTimer=void 0,this.heartCheck={stopped:!1,timeoutObj:void 0,serverTimeoutObj:void 0,errorTimes:0,stop:function(){},reset:function(){},start:function(){}},this.setReconnectAble();var i=Date.now();this.options.getToken({appKey:this.options.appKey,windowId:this.options.__accs_device}).then((function(e){if(e){t.token=e,t._getConnectionUrl();var o=Date.now();t._initConnection((function(e){if(e.isSuccess){var s=Date.now(),a=s-i,c=s-o;setTimeout((function(){var e;null===(e=t.onOpen)||void 0===e||e.call(t,{duration:a,socketDuration:c,connectType:F.INIT})})),t.lastConnectTime=Date.now(),t.connections[t.token]=e.connection,t._connection=e.connection,t._sendProbe(),t._bindEventHandler(F.INIT),t.options.accsHeartbeat&&(t.initHeartCheck(),t.heartCheck.start()),n(t)}else r({type:"OPEN_CONNECTION_ERROR",message:"开启连接失败",error:e.error,customError:{windowId:t.options.__accs_device,url:t.url},retryTimes:t._closeTimes,connectType:F.INIT})}))}else r({type:"GET_TOKEN_ERROR",message:"获取ACCS token时出错"})})).catch((function(e){return r(e)})),this.listenNetworkChange(),this.listenConnDuration(),setTimeout((function(){t.getStatus()||r({type:"OPEN_CONNECTION_TIMEOUT",message:"开启连接超时",error:"",customError:{windowId:t.options.__accs_device,url:t.url},retryTimes:t._closeTimes,connectType:F.INIT})}),3e3)}return e.prototype._getConnectionUrl=function(){var e,t=this.options,n=t.protocol,r=t.aserverProxy,o=t.subDomain,i=function(){var e,t="m";return"undefined"!=typeof lib&&(null===(e=null===lib||void 0===lib?void 0:lib.mtop)||void 0===e?void 0:e.config)&&lib.mtop.config.subDomain&&(t=lib.mtop.config.subDomain),o&&(t=o),t}(),s=(e="ws:",b()&&"https:"===window.location.protocol&&(e="wss:"),n&&(e=n),e);this.protocol=s,this.url=r?"".concat(s,"//").concat(r,"/accs/auth?token=").concat(this.token):"".concat(s,"//ws-msgacs.").concat(i,".taobao.com/accs/auth?token=").concat(this.token)},e.prototype._initConnection=function(e){var t=G&&new G(this.url);t.onopen=function(){t.onerror=null,t.onopen=null,e&&e({isSuccess:!0,connection:t})},t.onerror=function(n){t.onerror=null,t.onopen=null,e&&e({isSuccess:!1,connection:t,error:n})}},e.prototype._bindEventHandler=function(e){var t=this;this._connection.onerror=function(n){var r=n;I(n)||(r={error:n}),t.onError&&t.onError({errorResult:r,retryTimes:t._closeTimes,connectType:e})},this._connection.onclose=function(e){clearTimeout(t._detectTimer),t.options.accsHeartbeat&&t.heartCheck.stop(),t._reconnectAble&&!t.isReInit?(t.isReInit=!1,t._reconnect({type:Y.CLOSE})):(t.isReInit=!1,t.onClose&&t.onClose(q(q({},e),{accsMessage:L.NORMAL})))},this._connection.onmessage=function(e){t._processDownlinkMsg&&t._processDownlinkMsg(e.data)}},e.prototype._sendProbe=function(){var e=this;this._detectTimer=setTimeout((function(){!0===e.options.heartbeat?(e._connection.send(JSON.stringify({type:"ACK",protocol:"HEARTBEAT_ACCS_H5",data:""})),e._sendProbe()):clearTimeout(e._detectTimer)}),3e4)},e.prototype._sendACK=function(e){this._connection.send(JSON.stringify({type:"ACK",protocol:"ACCS_H5",dataId:e.dataId,serviceId:e.serviceId,target:e.source||"",source:e.target||"",ip:e.ip||"",data:"",extHeader:e.extHeader||{}}))},e.prototype._processDownlinkMsg=function(e){var t=this;this.accsMsg.processDownlinkMsg(e,(function(e){t._sendACK(e)}))},e.prototype.onMessage=function(e,t){E(t)&&(clearTimeout(this._detectTimer),this._sendProbe(),this._subscribeMap.token=this._subscribeMap["_"+e]=t)},e.prototype.offMessage=function(e){delete this._subscribeMap["_"+e]},e.prototype.send=function(e,t,n){var r=this;return new Promise((function(o,i){try{if(!r.getStatus())throw"websocket not available";var s=r.accsMsg.packMsg(e,t,n);o&&(r._ackMap["_"+s.dataId]=o,r._msgMap["_"+s.dataId]=s,"accs_h5_binduser"===e&&(r._msgMap.binduser=s)),clearTimeout(r._detectTimer),r._sendProbe(),r._connection.send(JSON.stringify(s))}catch(e){i(e)}}))},e.prototype.close=function(){this.getStatus()&&(this._reconnectAble=!1,this._connection.close())},Object.defineProperty(e.prototype,"readyState",{get:function(){return this._connection.readyState},enumerable:!1,configurable:!0}),e.prototype.getStatus=function(){return this._connection&&1===Number(this._connection.readyState)},e.prototype.dangerouslyReconnect=function(e,t,n){var r=this;this._closeTimes=0;var o=this.token;this.token=e,this._getConnectionUrl(),this._initConnection((function(e){var i;e.isSuccess?(r.lastConnectTime=Date.now(),r.connections[r.token]=e.connection,null===(i=r.connections[o])||void 0===i||i.close(),r._connection=e.connection,r._sendProbe(),r._bindEventHandler(),r._msgMap.binduser?r.send("accs_h5_binduser",r._msgMap.binduser).then((function(e){Object.keys(r._ackMap).length>0&&Object.keys(r._ackMap).forEach((function(e){r._connection.send(JSON.stringify(r._msgMap[e]))}))})).catch((function(){})):Object.keys(r._ackMap).length>0&&Object.keys(r._ackMap).forEach((function(e){r._connection.send(JSON.stringify(r._msgMap[e]))})),t&&t(r)):n&&n()}))},e}(),X=function(){return(X=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Z=function(){if(R.getItem("__accs_device"))return R.getItem("__accs_device");var e=Math.floor(899*Math.random()+100),t=b()?new y({screen_resolution:!0,canvas:!0}).get():Math.floor(1e9*Math.random());t=t.toString().substr(0,11),t+=new Array(11-t.length).join("0");var n="".concat(t,"_").concat(e);return R.setItem("__accs_device",n),n}();var $={init:function(e){var t=X(X({},e),{__accs_device:Z}),n=t.getToken;return new Promise((function(e,r){var o=b()&&window.WebSocket||v()&&my.connectSocket||w()&&wx.connectSocket;t&&t.appKey?o?n&&E(n)?new Q({resolve:e,reject:r,options:t}):r({type:"GET_TOKEN_ERROR",message:"请传入正确的getToken方法"}):r({type:"NO_WS_SUPPORT",message:"浏览器不支持 WebSocket"}):r({type:"NO_APP_KEY",message:"请传入appKey"})}))},getAccsDeviceId:function(){return Z},VERSION:"2.1.7"};(b()?window.lib||(window.lib={}):{}).ACCS=$;var ee=$;var te=["utf-8","utf8","unicode-1-1-utf-8"];function ne(){}function re(e,t){if(void 0===e&&(e="utf-8"),void 0===t&&(t={fatal:!1}),-1===te.indexOf(e.toLowerCase()))throw new RangeError("Failed to construct 'TextDecoder': The encoding label provided ('".concat(e,"') is invalid."));if(t.fatal)throw new Error("Failed to construct 'TextDecoder': the 'fatal' option is unsupported.")}function oe(e){for(var t=0,n=Math.min(65536,e.length+1),r=new Uint16Array(n),o=[],i=0;;){var s=t<e.length;if(!s||i>=n-1){if(o.push(String.fromCharCode.apply(null,r.subarray(0,i))),!s)return o.join("");e=e.subarray(t),t=0,i=0}var a=e[t++];if(0==(128&a))r[i++]=a;else if(192==(224&a)){var c=63&e[t++];r[i++]=(31&a)<<6|c}else if(224==(240&a)){c=63&e[t++];var u=63&e[t++];r[i++]=(31&a)<<12|c<<6|u}else if(240==(248&a)){var l=(7&a)<<18|(c=63&e[t++])<<12|(u=63&e[t++])<<6|63&e[t++];l>65535&&(l-=65536,r[i++]=l>>>10&1023|55296,l=56320|1023&l),r[i++]=l}}}Object.defineProperty(ne.prototype,"encoding",{value:"utf-8"}),ne.prototype.encode=function(e,t){if(void 0===t&&(t={stream:!1}),t.stream)throw new Error("Failed to encode: the 'stream' option is unsupported.");for(var n=0,r=e.length,o=0,i=Math.max(32,r+(r>>>1)+7),s=new Uint8Array(i>>>3<<3);n<r;){var a=e.charCodeAt(n++);if(a>=55296&&a<=56319){if(n<r){var c=e.charCodeAt(n);56320==(64512&c)&&(++n,a=((1023&a)<<10)+(1023&c)+65536)}if(a>=55296&&a<=56319)continue}if(o+4>s.length){i+=8,i=(i*=1+n/e.length*2)>>>3<<3;var u=new Uint8Array(i);u.set(s),s=u}if(0!=(4294967168&a)){if(0==(4294965248&a))s[o++]=a>>>6&31|192;else if(0==(4294901760&a))s[o++]=a>>>12&15|224,s[o++]=a>>>6&63|128;else{if(0!=(4292870144&a))continue;s[o++]=a>>>18&7|240,s[o++]=a>>>12&63|128,s[o++]=a>>>6&63|128}s[o++]=63&a|128}else s[o++]=a}return s.slice?s.slice(0,o):s.subarray(0,o)},Object.defineProperty(re.prototype,"encoding",{value:"utf-8"}),Object.defineProperty(re.prototype,"fatal",{value:!1}),Object.defineProperty(re.prototype,"ignoreBOM",{value:!1});var ie=oe;"function"==typeof Buffer&&Buffer.from?ie=function(e){return Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("utf-8")}:"function"==typeof Blob&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&(ie=function(e){var t=new Blob([e],{type:"text/plain;charset=UTF-8"}),n=URL.createObjectURL(t);try{var r=new XMLHttpRequest;return r.open("GET",n,!1),r.send(),r.responseText}catch(t){return oe(e)}finally{URL.revokeObjectURL(n)}}),re.prototype.decode=function(e,t){if(void 0===t&&(t={stream:!1}),t.stream)throw new Error("Failed to decode: the 'stream' option is unsupported.");var n;return n=e instanceof Uint8Array?e:e.buffer instanceof ArrayBuffer?new Uint8Array(e.buffer):new Uint8Array(e),ie(n)};(null===window||void 0===window?void 0:window.TextEncoder)&&window.TextEncoder,(null===window||void 0===window?void 0:window.TextDecoder)&&window.TextDecoder;function se(){return"undefined"!=typeof my}function ae(){return"undefined"!=typeof wx}var ce="";var ue=function(){function e(){}return e.prototype.init=function(e){this.insertMtop=e},e.prototype.miniAppMtop=function(e){return new Promise((function(t,n){var r=my.getSystemInfoSync&&my.getSystemInfoSync();r&&r.app&&("alipay"===r.app||"wealth"===r.app)||"alipay"===ce?my.call("mtop",Object.assign(e,{apiName:e.api,apiVersion:e.v,data:e.data,complete:t,fail:n})):((e=e||{}).success=t,e.fail=n,my.sendMtop(e))}))},e.prototype.wxAppMtop=function(e){return this.insertMtop?this.insertMtop.request(e):Promise.reject("微信环境请传通过 accs.init 入参传入 mtop")},e.prototype.h5Mtop=function(e){return this.insertMtop?this.insertMtop.request(e):lib.mtop?lib.mtop.request(e):Promise.reject("Not find lib.mtop, 请使用mtop包或手动在 accs.init 参数中传入")},e.prototype.request=function(e){return se()?this.miniAppMtop(e):ae()?this.wxAppMtop(e):this.h5Mtop(e)},e}(),le=(new ue,function(e){null==e&&(e=(new Date).getTime()),this.N=624,this.M=397,this.MATRIX_A=2567483615,this.UPPER_MASK=2147483648,this.LOWER_MASK=2147483647,this.mt=new Array(this.N),this.mti=this.N+1,e.constructor==Array?this.init_by_array(e,e.length):this.init_seed(e)});le.prototype.init_seed=function(e){for(this.mt[0]=e>>>0,this.mti=1;this.mti<this.N;this.mti++){e=this.mt[this.mti-1]^this.mt[this.mti-1]>>>30;this.mt[this.mti]=(1812433253*((4294901760&e)>>>16)<<16)+1812433253*(65535&e)+this.mti,this.mt[this.mti]>>>=0}},le.prototype.init_by_array=function(e,t){var n,r,o;for(this.init_seed(19650218),n=1,r=0,o=this.N>t?this.N:t;o;o--){var i=this.mt[n-1]^this.mt[n-1]>>>30;this.mt[n]=(this.mt[n]^(1664525*((4294901760&i)>>>16)<<16)+1664525*(65535&i))+e[r]+r,this.mt[n]>>>=0,r++,++n>=this.N&&(this.mt[0]=this.mt[this.N-1],n=1),r>=t&&(r=0)}for(o=this.N-1;o;o--){i=this.mt[n-1]^this.mt[n-1]>>>30;this.mt[n]=(this.mt[n]^(1566083941*((4294901760&i)>>>16)<<16)+1566083941*(65535&i))-n,this.mt[n]>>>=0,++n>=this.N&&(this.mt[0]=this.mt[this.N-1],n=1)}this.mt[0]=2147483648},le.prototype.random_int=function(){var e,t=new Array(0,this.MATRIX_A);if(this.mti>=this.N){var n;for(this.mti==this.N+1&&this.init_seed(5489),n=0;n<this.N-this.M;n++)e=this.mt[n]&this.UPPER_MASK|this.mt[n+1]&this.LOWER_MASK,this.mt[n]=this.mt[n+this.M]^e>>>1^t[1&e];for(;n<this.N-1;n++)e=this.mt[n]&this.UPPER_MASK|this.mt[n+1]&this.LOWER_MASK,this.mt[n]=this.mt[n+(this.M-this.N)]^e>>>1^t[1&e];e=this.mt[this.N-1]&this.UPPER_MASK|this.mt[0]&this.LOWER_MASK,this.mt[this.N-1]=this.mt[this.M-1]^e>>>1^t[1&e],this.mti=0}return e=this.mt[this.mti++],e^=e>>>11,e^=e<<7&2636928640,e^=e<<15&4022730752,(e^=e>>>18)>>>0},le.prototype.random_int31=function(){return this.random_int()>>>1},le.prototype.random_incl=function(){return this.random_int()*(1/4294967295)},le.prototype.random=function(){return this.random_int()*(1/4294967296)},le.prototype.random_excl=function(){return(this.random_int()+.5)*(1/4294967296)},le.prototype.random_long=function(){return(67108864*(this.random_int()>>>5)+(this.random_int()>>>6))*(1/9007199254740992)};var pe=new le(Math.random()*Number.MAX_SAFE_INTEGER);function fe(e){for(var t=e.length;t--;)e[t]=Math.floor(256*pe.random());return e}var de,he,me,ge;se()||ae()||window.crypto;function ye(e){if(se())switch(e){case me.UNKNOWN:return de.UNKNOWN;case me.OFFLINE:return de.OFFLINE;case me.WIFI:return de.WIFI;case me.G_4:return de.G_4;case me.G_3:return de.G_3;case me.G_2:return de.G_2;default:return de.UNKNOWN}else if(ae())switch(e){case he.UNKNOWN:return de.UNKNOWN;case he.OFFLINE:return de.OFFLINE;case he.WIFI:return de.WIFI;case he.G_5:return de.G_5;case he.G_4:return de.G_4;case he.G_3:return de.G_3;case he.G_2:return de.G_2;default:return de.UNKNOWN}else switch(e){case ge.UNKNOWN:case ge.CELL:return de.UNKNOWN;case ge.OFFLINE:return de.OFFLINE;case ge.WIFI:return de.WIFI;case ge.G_4:return de.G_4;case ge.G_3:return de.G_3;case ge.G_2:return de.G_2;default:return de.UNKNOWN}}function be(){return new Promise((function(e){return se()?new Promise((function(e){my.getNetworkType({success:function(t){e(ye(t.networkType))},fail:function(){e(de.UNKNOWN)}})})).then((function(t){return e(t)})):ae()?new Promise((function(e){wx.getNetworkType({success:function(t){e(ye(t.networkType))},fail:function(){e(de.UNKNOWN)}})})).then((function(t){return e(t)})):window.WindVane&&window.WindVane.call?new Promise((function(e){window.WindVane.call("WVNetwork","getNetworkType",{},(function(t){e(ye(t.type))}),(function(){e(de.UNKNOWN)}))})).then((function(t){return e(t)})):e(window.navigator.onLine?de.UNKNOWN:de.OFFLINE)}))}!function(e){e.OFFLINE="offline",e.WIFI="wifi",e.G_2="2g",e.G_3="3g",e.G_4="4g",e.G_5="5g",e.UNKNOWN="unknown"}(de||(de={})),function(e){e.OFFLINE="none",e.WIFI="wifi",e.G_2="2g",e.G_3="3g",e.G_4="4g",e.G_5="5g",e.UNKNOWN="unknown"}(he||(he={})),function(e){e.OFFLINE="NOTREACHABLE",e.WIFI="WIFI",e.G_2="2g",e.G_3="3g",e.G_4="4g",e.UNKNOWN="UNKNOWN"}(me||(me={})),function(e){e.OFFLINE="NONE",e.WIFI="WIFI",e.G_2="2g",e.G_3="3g",e.G_4="4g",e.CELL="CELL",e.UNKNOWN="UNKNOWN"}(ge||(ge={}));var ve=n(962),we=n.n(ve),Te=[],Oe={encode:function(e){var t=0,n=0;n=((n=((n=((n=e.msgType)<<1)+e.DUP)<<2)+e.Qos)<<1)+e.retain;var r=0;r=((r=e.version)<<3)+e.serializeType;var o=e.sysCode;o=(o<<5)+e.type;var i=0;i=e.typeVersion,i<<=3;var s=e.bizCode/256;i+=s>>=5;var a,c,u=e.bizCode%256,l=e.msgHeaderBuffer.byteLength,p=this.concatBuffer([new Uint16Array([l]).buffer,e.msgHeaderBuffer]);if(e.msgBodyBuffer){var f=e.msgBodyBuffer.byteLength;a=this.concatBuffer([new Uint16Array([f]).buffer,e.msgBodyBuffer])}else{f=0;a=new Uint16Array([f]).buffer}if(e.msgDataBuffer){var d=e.msgDataBuffer.byteLength;c=this.concatBuffer([new Uint16Array([d]).buffer,e.msgDataBuffer])}else{d=0;c=new Uint16Array([d]).buffer}var h=5+p.byteLength+a.byteLength+c.byteLength,m=new Uint8Array(h);m.set([n],t++),m.set([r],t++),m.set([o],t++),m.set([i],t++),m.set([u],t++);var g=new Uint8Array(p);return m.set(g,t),t+=p.byteLength,m.set(new Uint8Array(a),t),t+=a.byteLength,m.set(new Uint8Array(c),t),t+=c.byteLength,m},decode:function(e){var t=e,n={},r=0,o=t.byteLength,i=t[r];r++,n.msgType=i>>4,n.DUP=i>>3&1,n.DUP=i>>1&3,n.retain=1&i;var s=t[r];r++,n.version=s>>3,n.serializeType=7&s;var a=t[r];r++,n.sysCode=a>>5,n.type=31&a;var c=t[r];r++,n.typeVersion=c>>3;var u=7&c,l=t[r];r++,n.bizCode=256*u+l;var p=new Uint16Array(new Uint8Array([t[r],t[r+1]]).buffer)[0];r+=2;var f=new Uint8Array(t.slice(r,r+p)).buffer;r+=p,n.msgHeaderBuffer=f;var d=new Uint16Array(new Uint8Array([t[r],t[r+1]]).buffer)[0];r+=2;var h=new Uint8Array(t.slice(r,r+d)).buffer;r+=d,n.msgBodyBuffer=h;var m=new Uint16Array(new Uint8Array([t[r],t[r+1]]).buffer)[0];r+=2;var g=new Uint8Array(t.slice(r,r+m)).buffer;if(r+=m,n.msgDataBuffer=g,Te.push(n),r<o)return this.decode(new Uint8Array(e.slice(r)));var y=Te;return Te=[],y},concatBuffer:function(e){var t=0;e.forEach((function(e){t+=e.byteLength}));var n=new Uint8Array(t),r=0;return e.forEach((function(e){n.set(new Uint8Array(e),r),r+=e.byteLength})),n}},Se=3,ke=4,Me=8,_e=9,Pe=10,xe=11,Ae=1,Ne=2,Ie=3,Ee=4,Ce=5,je=0,Re=1,Le=2,De={SYS_SUBTYPE:{MTK_MSG_SYS_COMMON:101,MTK_MSG_SYS_DIG:102,MTK_MSG_SYS_JOIN:103,MTK_MSG_SYS_JOIN_OLD:10005},COMMAND_SUBTYPE:{MKT_MSG_COMMAND_ADD_BLACKLIST:301,MKT_MSG_COMMAND_DEL_BLACKLIST:302,MKT_MSG_COMMAND_FLOWLIMIT:303,MKT_MSG_COMMAND_USERTOKEN:304},REQUEST_SUBTYPE:{MKT_REQUEST_SUBTYPE_MSG:401,MKT_REQUEST_SUBTYPE_STAT:402,MKT_REQUEST_SUBTYPE_USER:403,MKT_REQUEST_SUBTYPE_HLS_MSG:404}},Ue=1,Be=500,Ve=7168,Ge=1,Ke=3,ze=(new Date).getTime(),Fe={accsResolveStack:[],accsRejectStack:[],protocolBufferStack:[],msgSize:0,msgIdArgs:[]},He=null,We=function(){function e(e){this.serviceId=e.serviceId,this.conn=e.conn,this.context=e.context}return e.prototype.__sendAllCacheMsg=function(){var e=new Uint8Array(Oe.concatBuffer(Fe.protocolBufferStack));Fe.protocolBufferStack=[],Fe.msgSize=0,this.conn.send(this.serviceId,e,!0).then((function(e){for(var t=Fe.accsResolveStack.length,n=null,r=0;r<t;r++)(n=Fe.accsResolveStack[r])&&n(e);Fe.accsResolveStack=[]})).catch((function(e){var t=Fe.accsResolveStack.splice(0,1)[0];t&&t(e)}))},e.prototype.sendInfoMsg=function(e){return e.msgType=Se,e.type=Ae,this.sendMsg(e)},e.prototype.sendRequestMsg=function(e){return e.msgType=Se,e.type=Ee,this.sendMsg(e)},e.prototype.sendCommandMsg=function(e){return e.msgType=Se,e.type=Ie,this.sendMsg(e)},e.prototype.sendP2pMsg=function(e){return e.msgType=Se,e.type=Ce,this.sendMsg(e)},e.prototype.sendMsg=function(e){var t=this;return new Promise((function(n,r){var o=(new Date).getTime(),i=Oe.encode(e);if(clearTimeout(He),He=null,Fe.msgSize+i.buffer.byteLength>Ve&&t.__sendAllCacheMsg(),o-ze>Be)t.serviceId?(t.conn.send(t.serviceId,i,!0).then((function(t){t.msgProtocolData=e,n(t)})).catch((function(e){return r(e)})),Fe.msgSize=0,ze=o):console.warn("没有serviceId");else{var s=i.buffer;Fe.protocolBufferStack.push(s),Fe.accsResolveStack.push(n),Fe.accsRejectStack.push(r),Fe.msgSize=new Uint8Array(Oe.concatBuffer(Fe.protocolBufferStack)).length,He=setTimeout((function(){t.__sendAllCacheMsg()}),Be)}}))},e}(),Je=function(e){return new We(e)},Ye=n(91);const qe=Ye.Reader,Qe=Ye.Writer,Xe=Ye.util,Ze=Ye.roots.default||(Ye.roots.default={});Ze.Header=(()=>{function e(e){if(this.extParams={},this.sysExtParams={},e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.topic="",e.prototype.priority=0,e.prototype.statusCode=0,e.prototype.sdkVersion="",e.prototype.appVersion="",e.prototype.messageId="",e.prototype.subType=0,e.prototype.userId="",e.prototype.token="",e.prototype.monitorTag=0,e.prototype.config=null,e.prototype.platform=0,e.prototype.extParams=Xe.emptyObject,e.prototype.sysExtParams=Xe.emptyObject,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=Qe.create()),null!=e.topic&&Object.hasOwnProperty.call(e,"topic")&&t.uint32(10).string(e.topic),null!=e.priority&&Object.hasOwnProperty.call(e,"priority")&&t.uint32(16).int32(e.priority),null!=e.statusCode&&Object.hasOwnProperty.call(e,"statusCode")&&t.uint32(24).int32(e.statusCode),null!=e.sdkVersion&&Object.hasOwnProperty.call(e,"sdkVersion")&&t.uint32(34).string(e.sdkVersion),null!=e.appVersion&&Object.hasOwnProperty.call(e,"appVersion")&&t.uint32(42).string(e.appVersion),null!=e.messageId&&Object.hasOwnProperty.call(e,"messageId")&&t.uint32(50).string(e.messageId),null!=e.subType&&Object.hasOwnProperty.call(e,"subType")&&t.uint32(56).int32(e.subType),null!=e.userId&&Object.hasOwnProperty.call(e,"userId")&&t.uint32(66).string(e.userId),null!=e.token&&Object.hasOwnProperty.call(e,"token")&&t.uint32(74).string(e.token),null!=e.monitorTag&&Object.hasOwnProperty.call(e,"monitorTag")&&t.uint32(80).int32(e.monitorTag),null!=e.config&&Object.hasOwnProperty.call(e,"config")&&Ze.Header.Config.encode(e.config,t.uint32(90).fork()).ldelim(),null!=e.platform&&Object.hasOwnProperty.call(e,"platform")&&t.uint32(96).int32(e.platform),null!=e.extParams&&Object.hasOwnProperty.call(e,"extParams"))for(let n=Object.keys(e.extParams),r=0;r<n.length;++r)t.uint32(106).fork().uint32(10).string(n[r]).uint32(18).string(e.extParams[n[r]]).ldelim();if(null!=e.sysExtParams&&Object.hasOwnProperty.call(e,"sysExtParams"))for(let n=Object.keys(e.sysExtParams),r=0;r<n.length;++r)t.uint32(114).fork().uint32(10).string(n[r]).uint32(18).string(e.sysExtParams[n[r]]).ldelim();return t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof qe||(e=qe.create(e));let n,r=void 0===t?e.len:e.pos+t,o=new Ze.Header;for(;e.pos<r;){let t=e.uint32();switch(t>>>3){case 1:o.topic=e.string();break;case 2:o.priority=e.int32();break;case 3:o.statusCode=e.int32();break;case 4:o.sdkVersion=e.string();break;case 5:o.appVersion=e.string();break;case 6:o.messageId=e.string();break;case 7:o.subType=e.int32();break;case 8:o.userId=e.string();break;case 9:o.token=e.string();break;case 10:o.monitorTag=e.int32();break;case 11:o.config=Ze.Header.Config.decode(e,e.uint32());break;case 12:o.platform=e.int32();break;case 13:e.skip().pos++,o.extParams===Xe.emptyObject&&(o.extParams={}),n=e.string(),e.pos++,o.extParams[n]=e.string();break;case 14:e.skip().pos++,o.sysExtParams===Xe.emptyObject&&(o.sysExtParams={}),n=e.string(),e.pos++,o.sysExtParams[n]=e.string();break;default:e.skipType(7&t)}}return o},e.decodeDelimited=function(e){return e instanceof qe||(e=new qe(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.topic&&e.hasOwnProperty("topic")&&!Xe.isString(e.topic))return"topic: string expected";if(null!=e.priority&&e.hasOwnProperty("priority")&&!Xe.isInteger(e.priority))return"priority: integer expected";if(null!=e.statusCode&&e.hasOwnProperty("statusCode")&&!Xe.isInteger(e.statusCode))return"statusCode: integer expected";if(null!=e.sdkVersion&&e.hasOwnProperty("sdkVersion")&&!Xe.isString(e.sdkVersion))return"sdkVersion: string expected";if(null!=e.appVersion&&e.hasOwnProperty("appVersion")&&!Xe.isString(e.appVersion))return"appVersion: string expected";if(null!=e.messageId&&e.hasOwnProperty("messageId")&&!Xe.isString(e.messageId))return"messageId: string expected";if(null!=e.subType&&e.hasOwnProperty("subType")&&!Xe.isInteger(e.subType))return"subType: integer expected";if(null!=e.userId&&e.hasOwnProperty("userId")&&!Xe.isString(e.userId))return"userId: string expected";if(null!=e.token&&e.hasOwnProperty("token")&&!Xe.isString(e.token))return"token: string expected";if(null!=e.monitorTag&&e.hasOwnProperty("monitorTag")&&!Xe.isInteger(e.monitorTag))return"monitorTag: integer expected";if(null!=e.config&&e.hasOwnProperty("config")){let t=Ze.Header.Config.verify(e.config);if(t)return"config."+t}if(null!=e.platform&&e.hasOwnProperty("platform")&&!Xe.isInteger(e.platform))return"platform: integer expected";if(null!=e.extParams&&e.hasOwnProperty("extParams")){if(!Xe.isObject(e.extParams))return"extParams: object expected";let t=Object.keys(e.extParams);for(let n=0;n<t.length;++n)if(!Xe.isString(e.extParams[t[n]]))return"extParams: string{k:string} expected"}if(null!=e.sysExtParams&&e.hasOwnProperty("sysExtParams")){if(!Xe.isObject(e.sysExtParams))return"sysExtParams: object expected";let t=Object.keys(e.sysExtParams);for(let n=0;n<t.length;++n)if(!Xe.isString(e.sysExtParams[t[n]]))return"sysExtParams: string{k:string} expected"}return null},e.fromObject=function(e){if(e instanceof Ze.Header)return e;let t=new Ze.Header;if(null!=e.topic&&(t.topic=String(e.topic)),null!=e.priority&&(t.priority=0|e.priority),null!=e.statusCode&&(t.statusCode=0|e.statusCode),null!=e.sdkVersion&&(t.sdkVersion=String(e.sdkVersion)),null!=e.appVersion&&(t.appVersion=String(e.appVersion)),null!=e.messageId&&(t.messageId=String(e.messageId)),null!=e.subType&&(t.subType=0|e.subType),null!=e.userId&&(t.userId=String(e.userId)),null!=e.token&&(t.token=String(e.token)),null!=e.monitorTag&&(t.monitorTag=0|e.monitorTag),null!=e.config){if("object"!=typeof e.config)throw TypeError(".Header.config: object expected");t.config=Ze.Header.Config.fromObject(e.config)}if(null!=e.platform&&(t.platform=0|e.platform),e.extParams){if("object"!=typeof e.extParams)throw TypeError(".Header.extParams: object expected");t.extParams={};for(let n=Object.keys(e.extParams),r=0;r<n.length;++r)t.extParams[n[r]]=String(e.extParams[n[r]])}if(e.sysExtParams){if("object"!=typeof e.sysExtParams)throw TypeError(".Header.sysExtParams: object expected");t.sysExtParams={};for(let n=Object.keys(e.sysExtParams),r=0;r<n.length;++r)t.sysExtParams[n[r]]=String(e.sysExtParams[n[r]])}return t},e.toObject=function(e,t){t||(t={});let n,r={};if((t.objects||t.defaults)&&(r.extParams={},r.sysExtParams={}),t.defaults&&(r.topic="",r.priority=0,r.statusCode=0,r.sdkVersion="",r.appVersion="",r.messageId="",r.subType=0,r.userId="",r.token="",r.monitorTag=0,r.config=null,r.platform=0),null!=e.topic&&e.hasOwnProperty("topic")&&(r.topic=e.topic),null!=e.priority&&e.hasOwnProperty("priority")&&(r.priority=e.priority),null!=e.statusCode&&e.hasOwnProperty("statusCode")&&(r.statusCode=e.statusCode),null!=e.sdkVersion&&e.hasOwnProperty("sdkVersion")&&(r.sdkVersion=e.sdkVersion),null!=e.appVersion&&e.hasOwnProperty("appVersion")&&(r.appVersion=e.appVersion),null!=e.messageId&&e.hasOwnProperty("messageId")&&(r.messageId=e.messageId),null!=e.subType&&e.hasOwnProperty("subType")&&(r.subType=e.subType),null!=e.userId&&e.hasOwnProperty("userId")&&(r.userId=e.userId),null!=e.token&&e.hasOwnProperty("token")&&(r.token=e.token),null!=e.monitorTag&&e.hasOwnProperty("monitorTag")&&(r.monitorTag=e.monitorTag),null!=e.config&&e.hasOwnProperty("config")&&(r.config=Ze.Header.Config.toObject(e.config,t)),null!=e.platform&&e.hasOwnProperty("platform")&&(r.platform=e.platform),e.extParams&&(n=Object.keys(e.extParams)).length){r.extParams={};for(let t=0;t<n.length;++t)r.extParams[n[t]]=e.extParams[n[t]]}if(e.sysExtParams&&(n=Object.keys(e.sysExtParams)).length){r.sysExtParams={};for(let t=0;t<n.length;++t)r.sysExtParams[n[t]]=e.sysExtParams[n[t]]}return r},e.prototype.toJSON=function(){return this.constructor.toObject(this,Ye.util.toJSONOptions)},e.Config=function(){function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.configVersion=0,e.prototype.delayRate=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=Qe.create()),null!=e.configVersion&&Object.hasOwnProperty.call(e,"configVersion")&&t.uint32(8).int32(e.configVersion),null!=e.delayRate&&Object.hasOwnProperty.call(e,"delayRate")&&t.uint32(16).int32(e.delayRate),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof qe||(e=qe.create(e));let n=void 0===t?e.len:e.pos+t,r=new Ze.Header.Config;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.configVersion=e.int32();break;case 2:r.delayRate=e.int32();break;default:e.skipType(7&t)}}return r},e.decodeDelimited=function(e){return e instanceof qe||(e=new qe(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.configVersion&&e.hasOwnProperty("configVersion")&&!Xe.isInteger(e.configVersion)?"configVersion: integer expected":null!=e.delayRate&&e.hasOwnProperty("delayRate")&&!Xe.isInteger(e.delayRate)?"delayRate: integer expected":null},e.fromObject=function(e){if(e instanceof Ze.Header.Config)return e;let t=new Ze.Header.Config;return null!=e.configVersion&&(t.configVersion=0|e.configVersion),null!=e.delayRate&&(t.delayRate=0|e.delayRate),t},e.toObject=function(e,t){t||(t={});let n={};return t.defaults&&(n.configVersion=0,n.delayRate=0),null!=e.configVersion&&e.hasOwnProperty("configVersion")&&(n.configVersion=e.configVersion),null!=e.delayRate&&e.hasOwnProperty("delayRate")&&(n.delayRate=e.delayRate),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,Ye.util.toJSONOptions)},e}(),e})();var $e=function(){function e(e){this.Message=Ze.Header,this.MessageData=null,this.userId=e.userId,this.token=e.token;var t={};void 0!==e.msgType&&(t.msgType=e.msgType),void 0!==e.type&&(t.type=e.type),t.typeVersion=1,t.DUP=e.DUP,t.Qos=e.Qos,t.retain=e.retain||0,t.version=1,t.serializeType=1,t.sysCode=e.sysCode,t.bizCode=e.namespace,this.protocolData=t}return e.prototype.setMsgHeader=function(e,t,n){void 0===n&&(n=1);var r={};r.userId=this.userId||"",r.token=this.token||"",r.topic=e.toString(),"number"==typeof t&&(r.subType=t),r.priority=n,r.statusCode=100,r.sdkVersion="h5_".concat("3.4.2"),r.appVersion="LibMessageKitSdk/".concat((new Date).getTime()),r.messageId=this._generateMessageId();var o=this.Message.create(r),i=this.Message.encode(o).finish();this.protocolData.msgHeader=o,this.protocolData.msgHeaderBuffer=i.buffer,this.MessageData=o},e.prototype.decodeMsgHeader=function(e){return Ze.Header.decode(e)},e.prototype.getprotocolData=function(){return this.protocolData},e.prototype._generateMessageId=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))},e}();const et=Ye.Reader,tt=Ye.Writer,nt=Ye.util,rt=Ye.roots.default||(Ye.roots.default={});rt.Msg=(()=>{function e(e){if(this.sendTags=[],e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.from="",e.prototype.to="",e.prototype.timestamp=nt.Long?nt.Long.fromBits(0,0,!1):0,e.prototype.sendFullTags=!1,e.prototype.sendTags=nt.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=tt.create()),null!=e.from&&Object.hasOwnProperty.call(e,"from")&&t.uint32(18).string(e.from),null!=e.to&&Object.hasOwnProperty.call(e,"to")&&t.uint32(26).string(e.to),null!=e.timestamp&&Object.hasOwnProperty.call(e,"timestamp")&&t.uint32(32).int64(e.timestamp),null!=e.sendFullTags&&Object.hasOwnProperty.call(e,"sendFullTags")&&t.uint32(40).bool(e.sendFullTags),null!=e.sendTags&&e.sendTags.length)for(let n=0;n<e.sendTags.length;++n)t.uint32(50).string(e.sendTags[n]);return t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof et||(e=et.create(e));let n=void 0===t?e.len:e.pos+t,r=new rt.Msg;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 2:r.from=e.string();break;case 3:r.to=e.string();break;case 4:r.timestamp=e.int64();break;case 5:r.sendFullTags=e.bool();break;case 6:r.sendTags&&r.sendTags.length||(r.sendTags=[]),r.sendTags.push(e.string());break;default:e.skipType(7&t)}}return r},e.decodeDelimited=function(e){return e instanceof et||(e=new et(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.from&&e.hasOwnProperty("from")&&!nt.isString(e.from))return"from: string expected";if(null!=e.to&&e.hasOwnProperty("to")&&!nt.isString(e.to))return"to: string expected";if(null!=e.timestamp&&e.hasOwnProperty("timestamp")&&!(nt.isInteger(e.timestamp)||e.timestamp&&nt.isInteger(e.timestamp.low)&&nt.isInteger(e.timestamp.high)))return"timestamp: integer|Long expected";if(null!=e.sendFullTags&&e.hasOwnProperty("sendFullTags")&&"boolean"!=typeof e.sendFullTags)return"sendFullTags: boolean expected";if(null!=e.sendTags&&e.hasOwnProperty("sendTags")){if(!Array.isArray(e.sendTags))return"sendTags: array expected";for(let t=0;t<e.sendTags.length;++t)if(!nt.isString(e.sendTags[t]))return"sendTags: string[] expected"}return null},e.fromObject=function(e){if(e instanceof rt.Msg)return e;let t=new rt.Msg;if(null!=e.from&&(t.from=String(e.from)),null!=e.to&&(t.to=String(e.to)),null!=e.timestamp&&(nt.Long?(t.timestamp=nt.Long.fromValue(e.timestamp)).unsigned=!1:"string"==typeof e.timestamp?t.timestamp=parseInt(e.timestamp,10):"number"==typeof e.timestamp?t.timestamp=e.timestamp:"object"==typeof e.timestamp&&(t.timestamp=new nt.LongBits(e.timestamp.low>>>0,e.timestamp.high>>>0).toNumber())),null!=e.sendFullTags&&(t.sendFullTags=Boolean(e.sendFullTags)),e.sendTags){if(!Array.isArray(e.sendTags))throw TypeError(".Msg.sendTags: array expected");t.sendTags=[];for(let n=0;n<e.sendTags.length;++n)t.sendTags[n]=String(e.sendTags[n])}return t},e.toObject=function(e,t){t||(t={});let n={};if((t.arrays||t.defaults)&&(n.sendTags=[]),t.defaults){if(n.from="",n.to="",nt.Long){let e=new nt.Long(0,0,!1);n.timestamp=t.longs===String?e.toString():t.longs===Number?e.toNumber():e}else n.timestamp=t.longs===String?"0":0;n.sendFullTags=!1}if(null!=e.from&&e.hasOwnProperty("from")&&(n.from=e.from),null!=e.to&&e.hasOwnProperty("to")&&(n.to=e.to),null!=e.timestamp&&e.hasOwnProperty("timestamp")&&("number"==typeof e.timestamp?n.timestamp=t.longs===String?String(e.timestamp):e.timestamp:n.timestamp=t.longs===String?nt.Long.prototype.toString.call(e.timestamp):t.longs===Number?new nt.LongBits(e.timestamp.low>>>0,e.timestamp.high>>>0).toNumber():e.timestamp),null!=e.sendFullTags&&e.hasOwnProperty("sendFullTags")&&(n.sendFullTags=e.sendFullTags),e.sendTags&&e.sendTags.length){n.sendTags=[];for(let t=0;t<e.sendTags.length;++t)n.sendTags[t]=e.sendTags[t]}return n},e.prototype.toJSON=function(){return this.constructor.toObject(this,Ye.util.toJSONOptions)},e})(),rt.Count=(()=>{function e(e){if(this.expression={},e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.expression=nt.emptyObject,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=tt.create()),null!=e.expression&&Object.hasOwnProperty.call(e,"expression"))for(let n=Object.keys(e.expression),r=0;r<n.length;++r)t.uint32(10).fork().uint32(10).string(n[r]).uint32(17).double(e.expression[n[r]]).ldelim();return t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof et||(e=et.create(e));let n,r=void 0===t?e.len:e.pos+t,o=new rt.Count;for(;e.pos<r;){let t=e.uint32();switch(t>>>3){case 1:e.skip().pos++,o.expression===nt.emptyObject&&(o.expression={}),n=e.string(),e.pos++,o.expression[n]=e.double();break;default:e.skipType(7&t)}}return o},e.decodeDelimited=function(e){return e instanceof et||(e=new et(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.expression&&e.hasOwnProperty("expression")){if(!nt.isObject(e.expression))return"expression: object expected";let t=Object.keys(e.expression);for(let n=0;n<t.length;++n)if("number"!=typeof e.expression[t[n]])return"expression: number{k:string} expected"}return null},e.fromObject=function(e){if(e instanceof rt.Count)return e;let t=new rt.Count;if(e.expression){if("object"!=typeof e.expression)throw TypeError(".Count.expression: object expected");t.expression={};for(let n=Object.keys(e.expression),r=0;r<n.length;++r)t.expression[n[r]]=Number(e.expression[n[r]])}return t},e.toObject=function(e,t){t||(t={});let n,r={};if((t.objects||t.defaults)&&(r.expression={}),e.expression&&(n=Object.keys(e.expression)).length){r.expression={};for(let o=0;o<n.length;++o)r.expression[n[o]]=t.json&&!isFinite(e.expression[n[o]])?String(e.expression[n[o]]):e.expression[n[o]]}return r},e.prototype.toJSON=function(){return this.constructor.toObject(this,Ye.util.toJSONOptions)},e})(),rt.Command=(()=>{function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.permission=0,e.prototype.periodTime=0,e.prototype.type=0,e.prototype.subType=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=tt.create()),null!=e.permission&&Object.hasOwnProperty.call(e,"permission")&&t.uint32(16).int32(e.permission),null!=e.periodTime&&Object.hasOwnProperty.call(e,"periodTime")&&t.uint32(24).int32(e.periodTime),null!=e.type&&Object.hasOwnProperty.call(e,"type")&&t.uint32(32).int32(e.type),null!=e.subType&&Object.hasOwnProperty.call(e,"subType")&&t.uint32(40).int32(e.subType),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof et||(e=et.create(e));let n=void 0===t?e.len:e.pos+t,r=new rt.Command;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 2:r.permission=e.int32();break;case 3:r.periodTime=e.int32();break;case 4:r.type=e.int32();break;case 5:r.subType=e.int32();break;default:e.skipType(7&t)}}return r},e.decodeDelimited=function(e){return e instanceof et||(e=new et(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.permission&&e.hasOwnProperty("permission")&&!nt.isInteger(e.permission)?"permission: integer expected":null!=e.periodTime&&e.hasOwnProperty("periodTime")&&!nt.isInteger(e.periodTime)?"periodTime: integer expected":null!=e.type&&e.hasOwnProperty("type")&&!nt.isInteger(e.type)?"type: integer expected":null!=e.subType&&e.hasOwnProperty("subType")&&!nt.isInteger(e.subType)?"subType: integer expected":null},e.fromObject=function(e){if(e instanceof rt.Command)return e;let t=new rt.Command;return null!=e.permission&&(t.permission=0|e.permission),null!=e.periodTime&&(t.periodTime=0|e.periodTime),null!=e.type&&(t.type=0|e.type),null!=e.subType&&(t.subType=0|e.subType),t},e.toObject=function(e,t){t||(t={});let n={};return t.defaults&&(n.permission=0,n.periodTime=0,n.type=0,n.subType=0),null!=e.permission&&e.hasOwnProperty("permission")&&(n.permission=e.permission),null!=e.periodTime&&e.hasOwnProperty("periodTime")&&(n.periodTime=e.periodTime),null!=e.type&&e.hasOwnProperty("type")&&(n.type=e.type),null!=e.subType&&e.hasOwnProperty("subType")&&(n.subType=e.subType),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,Ye.util.toJSONOptions)},e})(),rt.Request=(()=>{function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.index=nt.Long?nt.Long.fromBits(0,0,!1):0,e.prototype.pageSize=0,e.prototype.role=0,e.prototype.bizTag="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=tt.create()),null!=e.index&&Object.hasOwnProperty.call(e,"index")&&t.uint32(8).int64(e.index),null!=e.pageSize&&Object.hasOwnProperty.call(e,"pageSize")&&t.uint32(16).int32(e.pageSize),null!=e.role&&Object.hasOwnProperty.call(e,"role")&&t.uint32(24).int32(e.role),null!=e.bizTag&&Object.hasOwnProperty.call(e,"bizTag")&&t.uint32(34).string(e.bizTag),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof et||(e=et.create(e));let n=void 0===t?e.len:e.pos+t,r=new rt.Request;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.index=e.int64();break;case 2:r.pageSize=e.int32();break;case 3:r.role=e.int32();break;case 4:r.bizTag=e.string();break;default:e.skipType(7&t)}}return r},e.decodeDelimited=function(e){return e instanceof et||(e=new et(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.index&&e.hasOwnProperty("index")&&!(nt.isInteger(e.index)||e.index&&nt.isInteger(e.index.low)&&nt.isInteger(e.index.high))?"index: integer|Long expected":null!=e.pageSize&&e.hasOwnProperty("pageSize")&&!nt.isInteger(e.pageSize)?"pageSize: integer expected":null!=e.role&&e.hasOwnProperty("role")&&!nt.isInteger(e.role)?"role: integer expected":null!=e.bizTag&&e.hasOwnProperty("bizTag")&&!nt.isString(e.bizTag)?"bizTag: string expected":null},e.fromObject=function(e){if(e instanceof rt.Request)return e;let t=new rt.Request;return null!=e.index&&(nt.Long?(t.index=nt.Long.fromValue(e.index)).unsigned=!1:"string"==typeof e.index?t.index=parseInt(e.index,10):"number"==typeof e.index?t.index=e.index:"object"==typeof e.index&&(t.index=new nt.LongBits(e.index.low>>>0,e.index.high>>>0).toNumber())),null!=e.pageSize&&(t.pageSize=0|e.pageSize),null!=e.role&&(t.role=0|e.role),null!=e.bizTag&&(t.bizTag=String(e.bizTag)),t},e.toObject=function(e,t){t||(t={});let n={};if(t.defaults){if(nt.Long){let e=new nt.Long(0,0,!1);n.index=t.longs===String?e.toString():t.longs===Number?e.toNumber():e}else n.index=t.longs===String?"0":0;n.pageSize=0,n.role=0,n.bizTag=""}return null!=e.index&&e.hasOwnProperty("index")&&("number"==typeof e.index?n.index=t.longs===String?String(e.index):e.index:n.index=t.longs===String?nt.Long.prototype.toString.call(e.index):t.longs===Number?new nt.LongBits(e.index.low>>>0,e.index.high>>>0).toNumber():e.index),null!=e.pageSize&&e.hasOwnProperty("pageSize")&&(n.pageSize=e.pageSize),null!=e.role&&e.hasOwnProperty("role")&&(n.role=e.role),null!=e.bizTag&&e.hasOwnProperty("bizTag")&&(n.bizTag=e.bizTag),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,Ye.util.toJSONOptions)},e})(),rt.Subscribe=(()=>{function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.from="",e.prototype.role=0,e.prototype.bizTag="",e.prototype.period=0,e.prototype.ext="",e.prototype.timestamp=nt.Long?nt.Long.fromBits(0,0,!1):0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=tt.create()),null!=e.from&&Object.hasOwnProperty.call(e,"from")&&t.uint32(10).string(e.from),null!=e.role&&Object.hasOwnProperty.call(e,"role")&&t.uint32(16).int32(e.role),null!=e.bizTag&&Object.hasOwnProperty.call(e,"bizTag")&&t.uint32(26).string(e.bizTag),null!=e.period&&Object.hasOwnProperty.call(e,"period")&&t.uint32(32).int32(e.period),null!=e.ext&&Object.hasOwnProperty.call(e,"ext")&&t.uint32(42).string(e.ext),null!=e.timestamp&&Object.hasOwnProperty.call(e,"timestamp")&&t.uint32(48).int64(e.timestamp),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof et||(e=et.create(e));let n=void 0===t?e.len:e.pos+t,r=new rt.Subscribe;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.from=e.string();break;case 2:r.role=e.int32();break;case 3:r.bizTag=e.string();break;case 4:r.period=e.int32();break;case 5:r.ext=e.string();break;case 6:r.timestamp=e.int64();break;default:e.skipType(7&t)}}return r},e.decodeDelimited=function(e){return e instanceof et||(e=new et(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.from&&e.hasOwnProperty("from")&&!nt.isString(e.from)?"from: string expected":null!=e.role&&e.hasOwnProperty("role")&&!nt.isInteger(e.role)?"role: integer expected":null!=e.bizTag&&e.hasOwnProperty("bizTag")&&!nt.isString(e.bizTag)?"bizTag: string expected":null!=e.period&&e.hasOwnProperty("period")&&!nt.isInteger(e.period)?"period: integer expected":null!=e.ext&&e.hasOwnProperty("ext")&&!nt.isString(e.ext)?"ext: string expected":null!=e.timestamp&&e.hasOwnProperty("timestamp")&&!(nt.isInteger(e.timestamp)||e.timestamp&&nt.isInteger(e.timestamp.low)&&nt.isInteger(e.timestamp.high))?"timestamp: integer|Long expected":null},e.fromObject=function(e){if(e instanceof rt.Subscribe)return e;let t=new rt.Subscribe;return null!=e.from&&(t.from=String(e.from)),null!=e.role&&(t.role=0|e.role),null!=e.bizTag&&(t.bizTag=String(e.bizTag)),null!=e.period&&(t.period=0|e.period),null!=e.ext&&(t.ext=String(e.ext)),null!=e.timestamp&&(nt.Long?(t.timestamp=nt.Long.fromValue(e.timestamp)).unsigned=!1:"string"==typeof e.timestamp?t.timestamp=parseInt(e.timestamp,10):"number"==typeof e.timestamp?t.timestamp=e.timestamp:"object"==typeof e.timestamp&&(t.timestamp=new nt.LongBits(e.timestamp.low>>>0,e.timestamp.high>>>0).toNumber())),t},e.toObject=function(e,t){t||(t={});let n={};if(t.defaults)if(n.from="",n.role=0,n.bizTag="",n.period=0,n.ext="",nt.Long){let e=new nt.Long(0,0,!1);n.timestamp=t.longs===String?e.toString():t.longs===Number?e.toNumber():e}else n.timestamp=t.longs===String?"0":0;return null!=e.from&&e.hasOwnProperty("from")&&(n.from=e.from),null!=e.role&&e.hasOwnProperty("role")&&(n.role=e.role),null!=e.bizTag&&e.hasOwnProperty("bizTag")&&(n.bizTag=e.bizTag),null!=e.period&&e.hasOwnProperty("period")&&(n.period=e.period),null!=e.ext&&e.hasOwnProperty("ext")&&(n.ext=e.ext),null!=e.timestamp&&e.hasOwnProperty("timestamp")&&("number"==typeof e.timestamp?n.timestamp=t.longs===String?String(e.timestamp):e.timestamp:n.timestamp=t.longs===String?nt.Long.prototype.toString.call(e.timestamp):t.longs===Number?new nt.LongBits(e.timestamp.low>>>0,e.timestamp.high>>>0).toNumber():e.timestamp),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,Ye.util.toJSONOptions)},e})(),rt.P2p=(()=>{function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.traceId="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=tt.create()),null!=e.traceId&&Object.hasOwnProperty.call(e,"traceId")&&t.uint32(10).string(e.traceId),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof et||(e=et.create(e));let n=void 0===t?e.len:e.pos+t,r=new rt.P2p;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.traceId=e.string();break;default:e.skipType(7&t)}}return r},e.decodeDelimited=function(e){return e instanceof et||(e=new et(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.traceId&&e.hasOwnProperty("traceId")&&!nt.isString(e.traceId)?"traceId: string expected":null},e.fromObject=function(e){if(e instanceof rt.P2p)return e;let t=new rt.P2p;return null!=e.traceId&&(t.traceId=String(e.traceId)),t},e.toObject=function(e,t){t||(t={});let n={};return t.defaults&&(n.traceId=""),null!=e.traceId&&e.hasOwnProperty("traceId")&&(n.traceId=e.traceId),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,Ye.util.toJSONOptions)},e})(),rt.Report=(()=>{function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.bizTag="",e.prototype.preSubType=0,e.prototype.source=0,e.prototype.timestamp=nt.Long?nt.Long.fromBits(0,0,!1):0,e.prototype.ext="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=tt.create()),null!=e.bizTag&&Object.hasOwnProperty.call(e,"bizTag")&&t.uint32(10).string(e.bizTag),null!=e.preSubType&&Object.hasOwnProperty.call(e,"preSubType")&&t.uint32(16).int32(e.preSubType),null!=e.source&&Object.hasOwnProperty.call(e,"source")&&t.uint32(24).int32(e.source),null!=e.timestamp&&Object.hasOwnProperty.call(e,"timestamp")&&t.uint32(32).int64(e.timestamp),null!=e.ext&&Object.hasOwnProperty.call(e,"ext")&&t.uint32(42).string(e.ext),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof et||(e=et.create(e));let n=void 0===t?e.len:e.pos+t,r=new rt.Report;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.bizTag=e.string();break;case 2:r.preSubType=e.int32();break;case 3:r.source=e.int32();break;case 4:r.timestamp=e.int64();break;case 5:r.ext=e.string();break;default:e.skipType(7&t)}}return r},e.decodeDelimited=function(e){return e instanceof et||(e=new et(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.bizTag&&e.hasOwnProperty("bizTag")&&!nt.isString(e.bizTag)?"bizTag: string expected":null!=e.preSubType&&e.hasOwnProperty("preSubType")&&!nt.isInteger(e.preSubType)?"preSubType: integer expected":null!=e.source&&e.hasOwnProperty("source")&&!nt.isInteger(e.source)?"source: integer expected":null!=e.timestamp&&e.hasOwnProperty("timestamp")&&!(nt.isInteger(e.timestamp)||e.timestamp&&nt.isInteger(e.timestamp.low)&&nt.isInteger(e.timestamp.high))?"timestamp: integer|Long expected":null!=e.ext&&e.hasOwnProperty("ext")&&!nt.isString(e.ext)?"ext: string expected":null},e.fromObject=function(e){if(e instanceof rt.Report)return e;let t=new rt.Report;return null!=e.bizTag&&(t.bizTag=String(e.bizTag)),null!=e.preSubType&&(t.preSubType=0|e.preSubType),null!=e.source&&(t.source=0|e.source),null!=e.timestamp&&(nt.Long?(t.timestamp=nt.Long.fromValue(e.timestamp)).unsigned=!1:"string"==typeof e.timestamp?t.timestamp=parseInt(e.timestamp,10):"number"==typeof e.timestamp?t.timestamp=e.timestamp:"object"==typeof e.timestamp&&(t.timestamp=new nt.LongBits(e.timestamp.low>>>0,e.timestamp.high>>>0).toNumber())),null!=e.ext&&(t.ext=String(e.ext)),t},e.toObject=function(e,t){t||(t={});let n={};if(t.defaults){if(n.bizTag="",n.preSubType=0,n.source=0,nt.Long){let e=new nt.Long(0,0,!1);n.timestamp=t.longs===String?e.toString():t.longs===Number?e.toNumber():e}else n.timestamp=t.longs===String?"0":0;n.ext=""}return null!=e.bizTag&&e.hasOwnProperty("bizTag")&&(n.bizTag=e.bizTag),null!=e.preSubType&&e.hasOwnProperty("preSubType")&&(n.preSubType=e.preSubType),null!=e.source&&e.hasOwnProperty("source")&&(n.source=e.source),null!=e.timestamp&&e.hasOwnProperty("timestamp")&&("number"==typeof e.timestamp?n.timestamp=t.longs===String?String(e.timestamp):e.timestamp:n.timestamp=t.longs===String?nt.Long.prototype.toString.call(e.timestamp):t.longs===Number?new nt.LongBits(e.timestamp.low>>>0,e.timestamp.high>>>0).toNumber():e.timestamp),null!=e.ext&&e.hasOwnProperty("ext")&&(n.ext=e.ext),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,Ye.util.toJSONOptions)},e})();var ot={Message:rt.Count,MessageData:null,setMsgBody:function(e,t){var n;this.MessageData=this.Message.create({expression:(n={},n[e]=t,n)})},decodeMsgBody:function(e){return rt.Count.decode(e)}},it={Message:rt.Request,MessageData:null,setMsgBody:function(e,t){var n={};e&&(n.index=parseInt(e)),t&&(n.pageSize=parseInt(t)),this.MessageData=this.Message.create(n)},decodeMsgBody:function(e){return rt.Request.decode(e)}},st={Message:rt.Msg,MessageData:null,setMsgBody:function(e,t,n,r){var o={};e&&(o.from=e),t&&(o.to=t),n&&(o.sendTags=n),n&&(o.sendTags=n),o.sendFullTags=r,o.timestamp=(new Date).getTime(),this.MessageData=this.Message.create(o)},decodeMsgBody:function(e){return this.Message.decode(e)}},at={Message:rt.P2p,MessageData:null,setMsgBody:function(e){var t={};e&&(t.traceId=e),this.MessageData=this.Message.create(t)},decodeMsgBody:function(e){return this.Message.decode(e)}},ct={Message:rt.Subscribe,MessageData:null,setMsgBody:function(e,t,n,r){var o={};e&&(o.from=e),t&&(o.role=parseInt(t,10)),n&&(o.bizTag=n),r&&(o.period=parseInt(r,10)),this.MessageData=this.Message.create(o)},decodeMsgBody:function(e){return rt.Subscribe.decode(e)}},ut={Message:rt.Command,MessageData:null,setMsgBody:function(e,t,n,r){var o=rt.Command,i={};e&&(i.permission=e),t&&(i.periodTime=t),n&&(i.type=n),r&&(i.subType=r),this.MessageData=o.create(i)},decodeMsgBody:function(e){return rt.Command.decode(e)}},lt=new(function(){function e(){this.duration=3e3,this.delay=!1,this.timer=null,this.stopPolling=!1}return e.prototype.delayPolling=function(){var e=this;this.delay=!0,this.timer&&clearInterval(this.timer),this.timer=setTimeout((function(){e.delay=!1}),this.duration)},e.prototype.setDuration=function(e){"number"==typeof e&&(this.duration=e)},e.prototype.setStopPolling=function(e){this.stopPolling=e,!0===e&&this.handleTimer&&clearTimeout(this.handleTimer)},e.prototype.runPolling=function(e){var t=this;this.stopPolling||(this.delay?this.handleTimer=setTimeout(this.runPolling.bind(this,e),this.duration):e().then((function(n){t.handleTimer=setTimeout(t.runPolling.bind(t,e),t.duration)})).catch((function(n){console.error(JSON.stringify(n)),t.handleTimer=setTimeout(t.runPolling.bind(t,e),2e4)})))},e}()),pt=new ue;function ft(e,t,n){var r={api:e,v:"1.0",data:t};return n&&(r.appKey=n),u.log("MTOP REQUEST:",r),pt.request(r).then((function(e){return Object.assign(e,{mode:"mtop"})})).catch((function(e){throw e}))}function dt(e){return new Uint8Array(e.split("").map((function(e){return e.charCodeAt(0)})))}var ht=function(e){var t=e.length;if(t<1)return 0;for(var n=0,r=0;r<t;r++){n=(n<<5)-n+e.charCodeAt(r),n&=n}return n},mt=function(e){return Object.keys(e).map((function(t){return e[t]}))},gt=4001,yt=-3403,bt=-3404,vt=-3409,wt=-3406,Tt=-3408,Ot=1e3,St="ready",kt="subscribe",Mt="unsubscribe",_t="userlist",Pt="topicstatus",xt="message",At="history",Nt="count",It="join",Et="bizInfo",Ct="hisBizInfo",jt="p2pMessage",Rt="sessionExpired",Lt="close",Dt="open",Ut="error",Bt="reconnection",Vt="bizReqMessage",Gt="hisInfoMessage",Kt="infoMessage",zt="cmdMessage",Ft="reqMessage";const Ht=Ye.Reader,Wt=Ye.Writer,Jt=Ye.util,Yt=Ye.roots.default||(Ye.roots.default={}),qt=Yt.Monitor=(()=>{function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.sdkVersion="",e.prototype.data="",e.prototype.protoVersion=0,e.prototype.monitorType=0,e.prototype.sdkType=0,e.prototype.statusReport=null,e.prototype.ackReport=null,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=Wt.create()),null!=e.sdkVersion&&Object.hasOwnProperty.call(e,"sdkVersion")&&t.uint32(10).string(e.sdkVersion),null!=e.data&&Object.hasOwnProperty.call(e,"data")&&t.uint32(18).string(e.data),null!=e.protoVersion&&Object.hasOwnProperty.call(e,"protoVersion")&&t.uint32(24).uint32(e.protoVersion),null!=e.monitorType&&Object.hasOwnProperty.call(e,"monitorType")&&t.uint32(32).int32(e.monitorType),null!=e.sdkType&&Object.hasOwnProperty.call(e,"sdkType")&&t.uint32(40).int32(e.sdkType),null!=e.statusReport&&Object.hasOwnProperty.call(e,"statusReport")&&Yt.StatusReport.encode(e.statusReport,t.uint32(50).fork()).ldelim(),null!=e.ackReport&&Object.hasOwnProperty.call(e,"ackReport")&&Yt.AckReport.encode(e.ackReport,t.uint32(58).fork()).ldelim(),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof Ht||(e=Ht.create(e));let n=void 0===t?e.len:e.pos+t,r=new Yt.Monitor;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.sdkVersion=e.string();break;case 2:r.data=e.string();break;case 3:r.protoVersion=e.uint32();break;case 4:r.monitorType=e.int32();break;case 5:r.sdkType=e.int32();break;case 6:r.statusReport=Yt.StatusReport.decode(e,e.uint32());break;case 7:r.ackReport=Yt.AckReport.decode(e,e.uint32());break;default:e.skipType(7&t)}}return r},e.decodeDelimited=function(e){return e instanceof Ht||(e=new Ht(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.sdkVersion&&e.hasOwnProperty("sdkVersion")&&!Jt.isString(e.sdkVersion))return"sdkVersion: string expected";if(null!=e.data&&e.hasOwnProperty("data")&&!Jt.isString(e.data))return"data: string expected";if(null!=e.protoVersion&&e.hasOwnProperty("protoVersion")&&!Jt.isInteger(e.protoVersion))return"protoVersion: integer expected";if(null!=e.monitorType&&e.hasOwnProperty("monitorType"))switch(e.monitorType){default:return"monitorType: enum value expected";case 0:case 1:}if(null!=e.sdkType&&e.hasOwnProperty("sdkType"))switch(e.sdkType){default:return"sdkType: enum value expected";case 0:case 1:case 2:}if(null!=e.statusReport&&e.hasOwnProperty("statusReport")){let t=Yt.StatusReport.verify(e.statusReport);if(t)return"statusReport."+t}if(null!=e.ackReport&&e.hasOwnProperty("ackReport")){let t=Yt.AckReport.verify(e.ackReport);if(t)return"ackReport."+t}return null},e.fromObject=function(e){if(e instanceof Yt.Monitor)return e;let t=new Yt.Monitor;switch(null!=e.sdkVersion&&(t.sdkVersion=String(e.sdkVersion)),null!=e.data&&(t.data=String(e.data)),null!=e.protoVersion&&(t.protoVersion=e.protoVersion>>>0),e.monitorType){case"STATUS":case 0:t.monitorType=0;break;case"ACK":case 1:t.monitorType=1}switch(e.sdkType){case"Android":case 0:t.sdkType=0;break;case"iOS":case 1:t.sdkType=1;break;case"Js":case 2:t.sdkType=2}if(null!=e.statusReport){if("object"!=typeof e.statusReport)throw TypeError(".Monitor.statusReport: object expected");t.statusReport=Yt.StatusReport.fromObject(e.statusReport)}if(null!=e.ackReport){if("object"!=typeof e.ackReport)throw TypeError(".Monitor.ackReport: object expected");t.ackReport=Yt.AckReport.fromObject(e.ackReport)}return t},e.toObject=function(e,t){t||(t={});let n={};return t.defaults&&(n.sdkVersion="",n.data="",n.protoVersion=0,n.monitorType=t.enums===String?"STATUS":0,n.sdkType=t.enums===String?"Android":0,n.statusReport=null,n.ackReport=null),null!=e.sdkVersion&&e.hasOwnProperty("sdkVersion")&&(n.sdkVersion=e.sdkVersion),null!=e.data&&e.hasOwnProperty("data")&&(n.data=e.data),null!=e.protoVersion&&e.hasOwnProperty("protoVersion")&&(n.protoVersion=e.protoVersion),null!=e.monitorType&&e.hasOwnProperty("monitorType")&&(n.monitorType=t.enums===String?Yt.MonitorType[e.monitorType]:e.monitorType),null!=e.sdkType&&e.hasOwnProperty("sdkType")&&(n.sdkType=t.enums===String?Yt.SdkType[e.sdkType]:e.sdkType),null!=e.statusReport&&e.hasOwnProperty("statusReport")&&(n.statusReport=Yt.StatusReport.toObject(e.statusReport,t)),null!=e.ackReport&&e.hasOwnProperty("ackReport")&&(n.ackReport=Yt.AckReport.toObject(e.ackReport,t)),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,Ye.util.toJSONOptions)},e})();Yt.MonitorType=function(){const e={},t=Object.create(e);return t[e[0]="STATUS"]=0,t[e[1]="ACK"]=1,t}(),Yt.SdkType=function(){const e={},t=Object.create(e);return t[e[0]="Android"]=0,t[e[1]="iOS"]=1,t[e[2]="Js"]=2,t}();Yt.StatusReport=(()=>{function e(e){if(this.subscription=[],e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.subscription=Jt.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=Wt.create()),null!=e.subscription&&e.subscription.length)for(let n=0;n<e.subscription.length;++n)Yt.Subscription.encode(e.subscription[n],t.uint32(26).fork()).ldelim();return t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof Ht||(e=Ht.create(e));let n=void 0===t?e.len:e.pos+t,r=new Yt.StatusReport;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 3:r.subscription&&r.subscription.length||(r.subscription=[]),r.subscription.push(Yt.Subscription.decode(e,e.uint32()));break;default:e.skipType(7&t)}}return r},e.decodeDelimited=function(e){return e instanceof Ht||(e=new Ht(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.subscription&&e.hasOwnProperty("subscription")){if(!Array.isArray(e.subscription))return"subscription: array expected";for(let t=0;t<e.subscription.length;++t){let n=Yt.Subscription.verify(e.subscription[t]);if(n)return"subscription."+n}}return null},e.fromObject=function(e){if(e instanceof Yt.StatusReport)return e;let t=new Yt.StatusReport;if(e.subscription){if(!Array.isArray(e.subscription))throw TypeError(".StatusReport.subscription: array expected");t.subscription=[];for(let n=0;n<e.subscription.length;++n){if("object"!=typeof e.subscription[n])throw TypeError(".StatusReport.subscription: object expected");t.subscription[n]=Yt.Subscription.fromObject(e.subscription[n])}}return t},e.toObject=function(e,t){t||(t={});let n={};if((t.arrays||t.defaults)&&(n.subscription=[]),e.subscription&&e.subscription.length){n.subscription=[];for(let r=0;r<e.subscription.length;++r)n.subscription[r]=Yt.Subscription.toObject(e.subscription[r],t)}return n},e.prototype.toJSON=function(){return this.constructor.toObject(this,Ye.util.toJSONOptions)},e})(),Yt.Subscription=(()=>{function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.namespace=0,e.prototype.topic="",e.prototype.subscribeTime=Jt.Long?Jt.Long.fromBits(0,0,!0):0,e.prototype.bizScene="",e.prototype.isTimeAdjusted=!1,e.prototype.deltaTime=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=Wt.create()),null!=e.namespace&&Object.hasOwnProperty.call(e,"namespace")&&t.uint32(8).uint32(e.namespace),null!=e.topic&&Object.hasOwnProperty.call(e,"topic")&&t.uint32(18).string(e.topic),null!=e.subscribeTime&&Object.hasOwnProperty.call(e,"subscribeTime")&&t.uint32(24).uint64(e.subscribeTime),null!=e.bizScene&&Object.hasOwnProperty.call(e,"bizScene")&&t.uint32(34).string(e.bizScene),null!=e.isTimeAdjusted&&Object.hasOwnProperty.call(e,"isTimeAdjusted")&&t.uint32(40).bool(e.isTimeAdjusted),null!=e.deltaTime&&Object.hasOwnProperty.call(e,"deltaTime")&&t.uint32(48).uint32(e.deltaTime),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof Ht||(e=Ht.create(e));let n=void 0===t?e.len:e.pos+t,r=new Yt.Subscription;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.namespace=e.uint32();break;case 2:r.topic=e.string();break;case 3:r.subscribeTime=e.uint64();break;case 4:r.bizScene=e.string();break;case 5:r.isTimeAdjusted=e.bool();break;case 6:r.deltaTime=e.uint32();break;default:e.skipType(7&t)}}return r},e.decodeDelimited=function(e){return e instanceof Ht||(e=new Ht(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.namespace&&e.hasOwnProperty("namespace")&&!Jt.isInteger(e.namespace)?"namespace: integer expected":null!=e.topic&&e.hasOwnProperty("topic")&&!Jt.isString(e.topic)?"topic: string expected":null!=e.subscribeTime&&e.hasOwnProperty("subscribeTime")&&!(Jt.isInteger(e.subscribeTime)||e.subscribeTime&&Jt.isInteger(e.subscribeTime.low)&&Jt.isInteger(e.subscribeTime.high))?"subscribeTime: integer|Long expected":null!=e.bizScene&&e.hasOwnProperty("bizScene")&&!Jt.isString(e.bizScene)?"bizScene: string expected":null!=e.isTimeAdjusted&&e.hasOwnProperty("isTimeAdjusted")&&"boolean"!=typeof e.isTimeAdjusted?"isTimeAdjusted: boolean expected":null!=e.deltaTime&&e.hasOwnProperty("deltaTime")&&!Jt.isInteger(e.deltaTime)?"deltaTime: integer expected":null},e.fromObject=function(e){if(e instanceof Yt.Subscription)return e;let t=new Yt.Subscription;return null!=e.namespace&&(t.namespace=e.namespace>>>0),null!=e.topic&&(t.topic=String(e.topic)),null!=e.subscribeTime&&(Jt.Long?(t.subscribeTime=Jt.Long.fromValue(e.subscribeTime)).unsigned=!0:"string"==typeof e.subscribeTime?t.subscribeTime=parseInt(e.subscribeTime,10):"number"==typeof e.subscribeTime?t.subscribeTime=e.subscribeTime:"object"==typeof e.subscribeTime&&(t.subscribeTime=new Jt.LongBits(e.subscribeTime.low>>>0,e.subscribeTime.high>>>0).toNumber(!0))),null!=e.bizScene&&(t.bizScene=String(e.bizScene)),null!=e.isTimeAdjusted&&(t.isTimeAdjusted=Boolean(e.isTimeAdjusted)),null!=e.deltaTime&&(t.deltaTime=e.deltaTime>>>0),t},e.toObject=function(e,t){t||(t={});let n={};if(t.defaults){if(n.namespace=0,n.topic="",Jt.Long){let e=new Jt.Long(0,0,!0);n.subscribeTime=t.longs===String?e.toString():t.longs===Number?e.toNumber():e}else n.subscribeTime=t.longs===String?"0":0;n.bizScene="",n.isTimeAdjusted=!1,n.deltaTime=0}return null!=e.namespace&&e.hasOwnProperty("namespace")&&(n.namespace=e.namespace),null!=e.topic&&e.hasOwnProperty("topic")&&(n.topic=e.topic),null!=e.subscribeTime&&e.hasOwnProperty("subscribeTime")&&("number"==typeof e.subscribeTime?n.subscribeTime=t.longs===String?String(e.subscribeTime):e.subscribeTime:n.subscribeTime=t.longs===String?Jt.Long.prototype.toString.call(e.subscribeTime):t.longs===Number?new Jt.LongBits(e.subscribeTime.low>>>0,e.subscribeTime.high>>>0).toNumber(!0):e.subscribeTime),null!=e.bizScene&&e.hasOwnProperty("bizScene")&&(n.bizScene=e.bizScene),null!=e.isTimeAdjusted&&e.hasOwnProperty("isTimeAdjusted")&&(n.isTimeAdjusted=e.isTimeAdjusted),null!=e.deltaTime&&e.hasOwnProperty("deltaTime")&&(n.deltaTime=e.deltaTime),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,Ye.util.toJSONOptions)},e})(),Yt.AckReport=(()=>{function e(e){if(this.broadcastMsgAckGroup=[],this.unicastMsgAckGroup=[],e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.broadcastMsgAckGroup=Jt.emptyArray,e.prototype.unicastMsgAckGroup=Jt.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=Wt.create()),null!=e.broadcastMsgAckGroup&&e.broadcastMsgAckGroup.length)for(let n=0;n<e.broadcastMsgAckGroup.length;++n)Yt.MessageAckGroup.encode(e.broadcastMsgAckGroup[n],t.uint32(10).fork()).ldelim();if(null!=e.unicastMsgAckGroup&&e.unicastMsgAckGroup.length)for(let n=0;n<e.unicastMsgAckGroup.length;++n)Yt.MessageAckGroup.encode(e.unicastMsgAckGroup[n],t.uint32(18).fork()).ldelim();return t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof Ht||(e=Ht.create(e));let n=void 0===t?e.len:e.pos+t,r=new Yt.AckReport;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.broadcastMsgAckGroup&&r.broadcastMsgAckGroup.length||(r.broadcastMsgAckGroup=[]),r.broadcastMsgAckGroup.push(Yt.MessageAckGroup.decode(e,e.uint32()));break;case 2:r.unicastMsgAckGroup&&r.unicastMsgAckGroup.length||(r.unicastMsgAckGroup=[]),r.unicastMsgAckGroup.push(Yt.MessageAckGroup.decode(e,e.uint32()));break;default:e.skipType(7&t)}}return r},e.decodeDelimited=function(e){return e instanceof Ht||(e=new Ht(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.broadcastMsgAckGroup&&e.hasOwnProperty("broadcastMsgAckGroup")){if(!Array.isArray(e.broadcastMsgAckGroup))return"broadcastMsgAckGroup: array expected";for(let t=0;t<e.broadcastMsgAckGroup.length;++t){let n=Yt.MessageAckGroup.verify(e.broadcastMsgAckGroup[t]);if(n)return"broadcastMsgAckGroup."+n}}if(null!=e.unicastMsgAckGroup&&e.hasOwnProperty("unicastMsgAckGroup")){if(!Array.isArray(e.unicastMsgAckGroup))return"unicastMsgAckGroup: array expected";for(let t=0;t<e.unicastMsgAckGroup.length;++t){let n=Yt.MessageAckGroup.verify(e.unicastMsgAckGroup[t]);if(n)return"unicastMsgAckGroup."+n}}return null},e.fromObject=function(e){if(e instanceof Yt.AckReport)return e;let t=new Yt.AckReport;if(e.broadcastMsgAckGroup){if(!Array.isArray(e.broadcastMsgAckGroup))throw TypeError(".AckReport.broadcastMsgAckGroup: array expected");t.broadcastMsgAckGroup=[];for(let n=0;n<e.broadcastMsgAckGroup.length;++n){if("object"!=typeof e.broadcastMsgAckGroup[n])throw TypeError(".AckReport.broadcastMsgAckGroup: object expected");t.broadcastMsgAckGroup[n]=Yt.MessageAckGroup.fromObject(e.broadcastMsgAckGroup[n])}}if(e.unicastMsgAckGroup){if(!Array.isArray(e.unicastMsgAckGroup))throw TypeError(".AckReport.unicastMsgAckGroup: array expected");t.unicastMsgAckGroup=[];for(let n=0;n<e.unicastMsgAckGroup.length;++n){if("object"!=typeof e.unicastMsgAckGroup[n])throw TypeError(".AckReport.unicastMsgAckGroup: object expected");t.unicastMsgAckGroup[n]=Yt.MessageAckGroup.fromObject(e.unicastMsgAckGroup[n])}}return t},e.toObject=function(e,t){t||(t={});let n={};if((t.arrays||t.defaults)&&(n.broadcastMsgAckGroup=[],n.unicastMsgAckGroup=[]),e.broadcastMsgAckGroup&&e.broadcastMsgAckGroup.length){n.broadcastMsgAckGroup=[];for(let r=0;r<e.broadcastMsgAckGroup.length;++r)n.broadcastMsgAckGroup[r]=Yt.MessageAckGroup.toObject(e.broadcastMsgAckGroup[r],t)}if(e.unicastMsgAckGroup&&e.unicastMsgAckGroup.length){n.unicastMsgAckGroup=[];for(let r=0;r<e.unicastMsgAckGroup.length;++r)n.unicastMsgAckGroup[r]=Yt.MessageAckGroup.toObject(e.unicastMsgAckGroup[r],t)}return n},e.prototype.toJSON=function(){return this.constructor.toObject(this,Ye.util.toJSONOptions)},e})(),Yt.MessageAckGroup=(()=>{function e(e){if(this.record=[],e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.subscription=null,e.prototype.record=Jt.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=Wt.create()),null!=e.subscription&&Object.hasOwnProperty.call(e,"subscription")&&Yt.Subscription.encode(e.subscription,t.uint32(10).fork()).ldelim(),null!=e.record&&e.record.length)for(let n=0;n<e.record.length;++n)Yt.MessageAckRecord.encode(e.record[n],t.uint32(18).fork()).ldelim();return t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof Ht||(e=Ht.create(e));let n=void 0===t?e.len:e.pos+t,r=new Yt.MessageAckGroup;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.subscription=Yt.Subscription.decode(e,e.uint32());break;case 2:r.record&&r.record.length||(r.record=[]),r.record.push(Yt.MessageAckRecord.decode(e,e.uint32()));break;default:e.skipType(7&t)}}return r},e.decodeDelimited=function(e){return e instanceof Ht||(e=new Ht(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.subscription&&e.hasOwnProperty("subscription")){let t=Yt.Subscription.verify(e.subscription);if(t)return"subscription."+t}if(null!=e.record&&e.hasOwnProperty("record")){if(!Array.isArray(e.record))return"record: array expected";for(let t=0;t<e.record.length;++t){let n=Yt.MessageAckRecord.verify(e.record[t]);if(n)return"record."+n}}return null},e.fromObject=function(e){if(e instanceof Yt.MessageAckGroup)return e;let t=new Yt.MessageAckGroup;if(null!=e.subscription){if("object"!=typeof e.subscription)throw TypeError(".MessageAckGroup.subscription: object expected");t.subscription=Yt.Subscription.fromObject(e.subscription)}if(e.record){if(!Array.isArray(e.record))throw TypeError(".MessageAckGroup.record: array expected");t.record=[];for(let n=0;n<e.record.length;++n){if("object"!=typeof e.record[n])throw TypeError(".MessageAckGroup.record: object expected");t.record[n]=Yt.MessageAckRecord.fromObject(e.record[n])}}return t},e.toObject=function(e,t){t||(t={});let n={};if((t.arrays||t.defaults)&&(n.record=[]),t.defaults&&(n.subscription=null),null!=e.subscription&&e.hasOwnProperty("subscription")&&(n.subscription=Yt.Subscription.toObject(e.subscription,t)),e.record&&e.record.length){n.record=[];for(let r=0;r<e.record.length;++r)n.record[r]=Yt.MessageAckRecord.toObject(e.record[r],t)}return n},e.prototype.toJSON=function(){return this.constructor.toObject(this,Ye.util.toJSONOptions)},e})(),Yt.MessageAckRecord=(()=>{function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.messageId="",e.prototype.accsMessageId="",e.prototype.messageSubType=0,e.prototype.receiveTime=Jt.Long?Jt.Long.fromBits(0,0,!0):0,e.prototype.delay=0,e.prototype.isTimeAdjusted=!1,e.prototype.deltaTime=0,e.prototype.accsStatus=0,e.prototype.stepList="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=Wt.create()),null!=e.messageId&&Object.hasOwnProperty.call(e,"messageId")&&t.uint32(10).string(e.messageId),null!=e.accsMessageId&&Object.hasOwnProperty.call(e,"accsMessageId")&&t.uint32(18).string(e.accsMessageId),null!=e.messageSubType&&Object.hasOwnProperty.call(e,"messageSubType")&&t.uint32(24).uint32(e.messageSubType),null!=e.receiveTime&&Object.hasOwnProperty.call(e,"receiveTime")&&t.uint32(32).uint64(e.receiveTime),null!=e.delay&&Object.hasOwnProperty.call(e,"delay")&&t.uint32(40).uint32(e.delay),null!=e.isTimeAdjusted&&Object.hasOwnProperty.call(e,"isTimeAdjusted")&&t.uint32(48).bool(e.isTimeAdjusted),null!=e.deltaTime&&Object.hasOwnProperty.call(e,"deltaTime")&&t.uint32(56).uint32(e.deltaTime),null!=e.accsStatus&&Object.hasOwnProperty.call(e,"accsStatus")&&t.uint32(64).uint32(e.accsStatus),null!=e.stepList&&Object.hasOwnProperty.call(e,"stepList")&&t.uint32(74).string(e.stepList),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof Ht||(e=Ht.create(e));let n=void 0===t?e.len:e.pos+t,r=new Yt.MessageAckRecord;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.messageId=e.string();break;case 2:r.accsMessageId=e.string();break;case 3:r.messageSubType=e.uint32();break;case 4:r.receiveTime=e.uint64();break;case 5:r.delay=e.uint32();break;case 6:r.isTimeAdjusted=e.bool();break;case 7:r.deltaTime=e.uint32();break;case 8:r.accsStatus=e.uint32();break;case 9:r.stepList=e.string();break;default:e.skipType(7&t)}}return r},e.decodeDelimited=function(e){return e instanceof Ht||(e=new Ht(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.messageId&&e.hasOwnProperty("messageId")&&!Jt.isString(e.messageId)?"messageId: string expected":null!=e.accsMessageId&&e.hasOwnProperty("accsMessageId")&&!Jt.isString(e.accsMessageId)?"accsMessageId: string expected":null!=e.messageSubType&&e.hasOwnProperty("messageSubType")&&!Jt.isInteger(e.messageSubType)?"messageSubType: integer expected":null!=e.receiveTime&&e.hasOwnProperty("receiveTime")&&!(Jt.isInteger(e.receiveTime)||e.receiveTime&&Jt.isInteger(e.receiveTime.low)&&Jt.isInteger(e.receiveTime.high))?"receiveTime: integer|Long expected":null!=e.delay&&e.hasOwnProperty("delay")&&!Jt.isInteger(e.delay)?"delay: integer expected":null!=e.isTimeAdjusted&&e.hasOwnProperty("isTimeAdjusted")&&"boolean"!=typeof e.isTimeAdjusted?"isTimeAdjusted: boolean expected":null!=e.deltaTime&&e.hasOwnProperty("deltaTime")&&!Jt.isInteger(e.deltaTime)?"deltaTime: integer expected":null!=e.accsStatus&&e.hasOwnProperty("accsStatus")&&!Jt.isInteger(e.accsStatus)?"accsStatus: integer expected":null!=e.stepList&&e.hasOwnProperty("stepList")&&!Jt.isString(e.stepList)?"stepList: string expected":null},e.fromObject=function(e){if(e instanceof Yt.MessageAckRecord)return e;let t=new Yt.MessageAckRecord;return null!=e.messageId&&(t.messageId=String(e.messageId)),null!=e.accsMessageId&&(t.accsMessageId=String(e.accsMessageId)),null!=e.messageSubType&&(t.messageSubType=e.messageSubType>>>0),null!=e.receiveTime&&(Jt.Long?(t.receiveTime=Jt.Long.fromValue(e.receiveTime)).unsigned=!0:"string"==typeof e.receiveTime?t.receiveTime=parseInt(e.receiveTime,10):"number"==typeof e.receiveTime?t.receiveTime=e.receiveTime:"object"==typeof e.receiveTime&&(t.receiveTime=new Jt.LongBits(e.receiveTime.low>>>0,e.receiveTime.high>>>0).toNumber(!0))),null!=e.delay&&(t.delay=e.delay>>>0),null!=e.isTimeAdjusted&&(t.isTimeAdjusted=Boolean(e.isTimeAdjusted)),null!=e.deltaTime&&(t.deltaTime=e.deltaTime>>>0),null!=e.accsStatus&&(t.accsStatus=e.accsStatus>>>0),null!=e.stepList&&(t.stepList=String(e.stepList)),t},e.toObject=function(e,t){t||(t={});let n={};if(t.defaults){if(n.messageId="",n.accsMessageId="",n.messageSubType=0,Jt.Long){let e=new Jt.Long(0,0,!0);n.receiveTime=t.longs===String?e.toString():t.longs===Number?e.toNumber():e}else n.receiveTime=t.longs===String?"0":0;n.delay=0,n.isTimeAdjusted=!1,n.deltaTime=0,n.accsStatus=0,n.stepList=""}return null!=e.messageId&&e.hasOwnProperty("messageId")&&(n.messageId=e.messageId),null!=e.accsMessageId&&e.hasOwnProperty("accsMessageId")&&(n.accsMessageId=e.accsMessageId),null!=e.messageSubType&&e.hasOwnProperty("messageSubType")&&(n.messageSubType=e.messageSubType),null!=e.receiveTime&&e.hasOwnProperty("receiveTime")&&("number"==typeof e.receiveTime?n.receiveTime=t.longs===String?String(e.receiveTime):e.receiveTime:n.receiveTime=t.longs===String?Jt.Long.prototype.toString.call(e.receiveTime):t.longs===Number?new Jt.LongBits(e.receiveTime.low>>>0,e.receiveTime.high>>>0).toNumber(!0):e.receiveTime),null!=e.delay&&e.hasOwnProperty("delay")&&(n.delay=e.delay),null!=e.isTimeAdjusted&&e.hasOwnProperty("isTimeAdjusted")&&(n.isTimeAdjusted=e.isTimeAdjusted),null!=e.deltaTime&&e.hasOwnProperty("deltaTime")&&(n.deltaTime=e.deltaTime),null!=e.accsStatus&&e.hasOwnProperty("accsStatus")&&(n.accsStatus=e.accsStatus),null!=e.stepList&&e.hasOwnProperty("stepList")&&(n.stepList=e.stepList),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,Ye.util.toJSONOptions)},e})();var Qt;!function(e){e.ACCS="1",e.MTOP="2",e.TO_C="99"}(Qt||(Qt={}));var Xt,Zt=new function(){var e=this;this.time={valid:!1,deltaTime:0},this.init=function(t){return e.checkTime({appKey:t}).then((function(t){var n=t.deltaTime,r=t.valid;e.time={deltaTime:n,valid:r}})).catch((function(e){}))},this.checkTime=function(e){var t=e.appKey;return new Promise((function(e){var n=Date.now();ft("mtop.common.gettimestamp",{},t).then((function(t){var r,o=+(null===(r=null==t?void 0:t.data)||void 0===r?void 0:r.t),i=Date.now(),s=parseInt(o+(i-n)/2-i,10);e({deltaTime:s,valid:!0})})).catch((function(e){throw u.log("reporter checkTime error",e),e}))}))}};!function(e){e.ACCS="1",e.MTOP="2",e.TO_C="99"}(Xt||(Xt={}));var $t,en=new function(){var e=this;this.pm=null,this.canUse=!1,this.isReporting=!1,this.timer=null,this.time={valid:!1,deltaTime:0},this.startTime=Date.now(),this.reportConfig=void 0,this.receiveBroadcastMsg={},this.receiveUnicastMsg={},this.init=function(t){e.pm=t,e.time=Zt.time},this.addReceiveMsg=function(t){var n,r,o,i,s,a,c=t.protocolData,u=t.accsDataId,l=t.messageType;if(e.canUse){var p=null===(n=null==c?void 0:c.msgHeader)||void 0===n?void 0:n.messageId,f=Date.now()+e.time.deltaTime;if(p){var d,h={messageId:p,accsMessageId:null!=u?u:"",messageSubType:null!==(o=null===(r=null==c?void 0:c.msgHeader)||void 0===r?void 0:r.subType)&&void 0!==o?o:0,receiveTime:Date.now()+e.time.deltaTime,delay:f-Number(null!==(a=null===(s=null===(i=c.msgHeader)||void 0===i?void 0:i.sysExtParams)||void 0===s?void 0:s.sendTime)&&void 0!==a?a:0),isTimeAdjusted:e.time.valid,deltaTime:e.time.deltaTime,accsStatus:1,stepList:l};c.type===Ce?e.receiveUnicastMsg[p]?(d=e.receiveUnicastMsg[p].stepList.split(",")).find((function(e){return e===l}))||(d.push(l),e.receiveUnicastMsg[p].stepList=d.join(",")):e.receiveUnicastMsg[p]=h:e.receiveBroadcastMsg[p]?(d=e.receiveBroadcastMsg[p].stepList.split(",")).find((function(e){return e===l}))||(d.push(l),e.receiveBroadcastMsg[p].stepList=d.join(",")):e.receiveBroadcastMsg[p]=h}}},this.clearReceiveMsg=function(){Object.keys(e.receiveBroadcastMsg).length>0&&(e.receiveBroadcastMsg={}),Object.keys(e.receiveUnicastMsg).length>0&&(e.receiveUnicastMsg={})},this.start=function(t){e.isReporting||(e.checkCanUse(t),u.log("PM reporter canUse:",e.canUse),e.canUse?(u.log(">>> 端侧监控开启 <<<"),e.canUse=!0,e.isReporting=!0,e.startTime=Date.now(),e.timer=setInterval((function(){e.reportStatus()}),1e3)):e.canUse=!1)},this.stop=function(){u.log(">>> 端侧监控结束 <<<"),e.canUse=!1,e.isReporting=!1,e.clearReceiveMsg(),e.timer&&clearInterval(e.timer)},this.reportStatus=function(){var t,n,r;if(e.canUse&&(null===(n=null===(t=e.pm)||void 0===t?void 0:t.messageKitWS)||void 0===n?void 0:n.conn)){var o=e.canUse?{namespace:e.pm.options.namespace,topic:e.pm.options.topic,subscribeTime:e.startTime,bizScene:String(e.pm.options.namespace),isTimeAdjusted:e.time.valid,deltaTime:parseInt(String(e.time.deltaTime),10)}:void 0,i=mt(e.receiveBroadcastMsg),s=mt(e.receiveUnicastMsg);if(!o&&0===i.length&&0===s.length)return;var a={sdkVersion:"3.4.2",data:"",protoVersion:2,sdkType:Yt.SdkType.Js,statusReport:{subscription:[o]},ackReport:{broadcastMsgAckGroup:[{subscription:o,record:i}],unicastMsgAckGroup:[{subscription:o,record:s}]}},c=qt.verify(a);if(c)return void u.log("reporter reportStatus verify reportJSON error",c);u.log("reporter data",a);var l=qt.encode(a).finish();null===(r=e.pm.messageKitWS)||void 0===r||r.conn.send("pmmonitor",l,{}).then((function(){e.clearReceiveMsg()})).catch((function(e){u.log("reporter send err",e)}))}},this.checkCanUse=function(t){var n,r,o=(null==t?void 0:t.reportConfig)||{},i=(null==t?void 0:t.deviceId)||"",s=o.sampleMode||"",a=o.sampleDenominator||"",c=o.sample||"",u=null===(r=null===(n=e.pm)||void 0===n?void 0:n.options)||void 0===r?void 0:r.topic;if(s&&a&&c){if(u&&1==+s){var l=ht(u);if(Math.abs(l)%+a<+c)return e.reportConfig={deviceId:i,sampleMode:s,sampleDenominator:a,sample:c},void(e.canUse=!0)}if(i&&2==+s){var p=ht(i);if(Math.abs(p)%+a<+c)return e.reportConfig={deviceId:i,sampleMode:s,sampleDenominator:a,sample:c},void(e.canUse=!0)}}e.canUse=!1}},tn=new Array(500),nn=Date.now(),rn=function(){function e(e){this.context=e.context,this.baseMsg=e.baseMsg,this.source=null}return e.prototype.setSource=function(e){this.source=e},e.prototype.clearMsg=function(){tn=new Array(500)},e.prototype.fireEventCallBack=function(e){var t=e.dataUint8,n=e._flag,r=e.accsDataId,o=e.messageType,i=e.canReport,s=Number(n);s||(s=0);var a=[];try{a=Oe.decode(t)}catch(e){throw u.log("解析数据包出错，错误码-3403",{errorCode:yt,type:"DECODE_ERR",msg:"解包错误",context:this.context,protocolData:{},source:this.source}),e}for(var c,l=a.length,p=0;p<l;p++){c=a[p];var f=void 0;try{f=this.baseMsg.decodeMsgHeader(new Uint8Array(c.msgHeaderBuffer)),c.msgHeader=f,f.statusCode===gt&&lt.setDuration(2e4),i&&en.addReceiveMsg({protocolData:c,accsDataId:r,messageType:o}),0===s&&-1===tn.indexOf(f.messageId)?(tn.push(f.messageId),this.processProtocolData({protocolData:c,messageType:Xt.TO_C,canReport:i,accsDataId:r})):1===s?c.msgHeader.subType===De.SYS_SUBTYPE.MTK_MSG_SYS_COMMON&&(tn.push(f.messageId),this.processProtocolData({protocolData:c,messageType:Xt.TO_C,canReport:i,accsDataId:r})):u.log("消息重复投递，错误码 -3406",{errorCode:wt,type:"REPEAT_ERR",msg:"消息重复投递错误",context:this.context,protocolData:c,source:this.source})}catch(e){throw u.log("解析header出错，错误码 -3404、-3405",{errorCode:bt,type:"PARSE_ERR",msg:"解析错误",context:this.context,protocolData:c,source:this.source}),e}}},e.prototype.processProtocolData=function(e){var t=e.protocolData,n=e.messageType,r=e.canReport,o=e.accsDataId,i=t.msgType,s=t.msgHeader;if(s.statusCode&&1e3!==s.statusCode)u.log("错误码不为1000，则丢弃，上报ack，错误码-3409",{errorCode:vt,type:"CHECK_ERR",msg:"消息类型校验错误",context:this.context,protocolData:t,source:this.source});else{if(t.sysCode!==Ue||t.bizCode!==this.context.namespace||s.topic!==this.context.topic&&t.type!==Ce)return u.log("sysCode校验:",t.sysCode!==Ue,"bizCode校验:",t.bizCode!==this.context.namespace,"topic校验:",s.topic!==this.context.topic),void u.log("类型无法识别，则丢弃，上报ack，错误码-3409",{errorCode:Tt,type:"SEND_ERR",msg:"消息投递错误",context:this.context,protocolData:t,source:this.source});if(i===Se)t.type===Ae?this.infoHandle({protocolData:t,messageType:n,canReport:r,accsDataId:o}):t.type===Ie?this.cmdHandle({protocolData:t,messageType:n,canReport:r,accsDataId:o}):t.type===Ce?this.p2pHandle({protocolData:t,messageType:n,canReport:r,accsDataId:o}):u.log("类型无法识别，则丢弃，上报ack，错误码-3409",{errorCode:vt,type:"CHECK_ERR",msg:"消息类型校验错误",context:this.context,protocolData:t,source:this.source});else if(i===ke||i===_e||i===xe){if(t.msgHeader.subType===De.REQUEST_SUBTYPE.MKT_REQUEST_SUBTYPE_HLS_MSG&&t.msgDataBuffer.byteLength>0)return void this.fireEventCallBack({dataUint8:new Uint8Array(t.msgDataBuffer),_flag:1,messageType:n,canReport:r})}else u.log("类型无法识别，则丢弃，上报ack，错误码-3409",{errorCode:vt,type:"CHECK_ERR",msg:"消息类型校验错误",context:this.context,protocolData:t,source:this.source})}},e.prototype.infoHandle=function(e){var t=e.protocolData,n=e.messageType,r=e.canReport,o=e.accsDataId;try{var i=st.decodeMsgBody(new Uint8Array(t.msgBodyBuffer));t.msgBody=i,u.log("STEP3 解析后的消息: ",t),null!==t.msgBody.sendTags&&""!==t.msgBody.sendTags.join("")&&-1===t.msgBody.sendTags.indexOf(this.context.bizTag)&&u.log("业务通道bizTag投递错误",{errorCode:Tt,type:"SEND_ERR",msg:"消息投递错误",context:this.context,protocolData:t,source:this.source}),+i.timestamp<nn+Zt.time.deltaTime-1e4?(u.log("hisInfoMessage",t),this.context.emit(Gt,t)):(r&&en.addReceiveMsg({protocolData:t,accsDataId:o,messageType:n}),this.context.emit(Kt,t)),u.log("ack",{errorCode:Ot,type:"SEND_SUCCESS",msg:"消息投递成功",context:this.context,protocolData:t,source:this.source})}catch(e){throw u.log("解析body出错，错误码 -3404、-3405",{errorCode:bt,type:"PARSE_ERR",msg:"解析错误",context:this.context,protocolData:t,source:this.source}),e}},e.prototype.p2pHandle=function(e){var t,n=e.protocolData,r=e.messageType,o=e.canReport,i=e.accsDataId;try{var s=at.decodeMsgBody(new Uint8Array(n.msgBodyBuffer));n.msgBody=s,n.msgData=JSON.parse((t=n.msgDataBuffer,[].slice.call(new Uint8Array(t),0).map((function(e){return String.fromCharCode(e)})).join(""))),u.log("STEP3 解析后的消息: ",n),o&&en.addReceiveMsg({protocolData:n,accsDataId:i,messageType:r}),this.context.emit(jt,n),u.log("ack",{errorCode:Ot,type:"SEND_SUCCESS",msg:"消息投递成功",context:this.context,protocolData:n,source:this.source})}catch(e){throw u.log("解析body出错，错误码 -3404、-3405",{errorCode:bt,type:"PARSE_ERR",msg:"解析错误",context:this.context,protocolData:n,source:this.source}),e}},e.prototype.cmdHandle=function(e){var t=e.protocolData;try{var n=ut.decodeMsgBody(new Uint8Array(t.msgBodyBuffer));t.msgBody=n,u.log("STEP3 解析后的消息: ",t),this.context.emit(zt,t)}catch(e){throw u.log("解析body出错，错误码 -3404、-3405",{errorCode:bt,type:"PARSE_ERR",msg:"解析错误",context:this.context,protocolData:t,source:this.source}),e}},e}(),on=function(){return(on=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},sn=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},an=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s},cn=function(){function e(e){var t=this;this.connect=null,this.conn=null,this.prevConnection=null,this.init=function(e){return void 0===e&&(e={}),t.connect?new Promise((function(e){e(t.connect)})):ee.init(on(on({appKey:t.appKey,getToken:t.options.getToken(),reconnect:!0,accsHeartbeat:!0},t._accsExtParams),e)).then((function(e){t.options.updateToken(e.token),t.conn=t.connect=e,t.conn.onOpen=function(n){t.emit(Dt,e,n)},t.conn.onClose=function(e){t.emit(Lt,e)},t.conn.onError=function(e){t.emit(Ut,e)},t.conn.onReconnect=function(n){var r=n.token,o=n.prevToken,i=(n.duration,sn(n,["token","prevToken","duration"]));t.emit(Bt,e,i),t.unSubscribeWhenReInit(o).then((function(){t.options.updateToken(r),t.updateSubscribe()}))},t.msgManager=Je({conn:t.conn,serviceId:t.serviceId,context:t}),t.msgEmitter=new rn({context:t,baseMsg:t.msg}),t.serviceId&&t.conn.onMessage(t.serviceId,(function(e){u.log("STEP1 接收消息: ".concat(t.serviceId),"数据: ",e),lt.delayPolling(),e.getBinaryArray().then((function(n){var r,o;u.log("STEP2 二进制数据解码: ",n),t.msgEmitter.setSource(1),t.msgEmitter.fireEventCallBack({dataUint8:n,messageType:Xt.ACCS,accsDataId:e.dataId,canReport:(o=null===(r=null==e?void 0:e.decodedExtHeader)||void 0===r?void 0:r[0],!0===o||"true"===o)})})).catch((function(e){throw e}))}))})).catch((function(e){t.emit(Ut,e)}))},this.options=e,this.emit=e.emit,this.appKey=e.opts.appKey,this.topic=e.opts.topic,this.serviceId=e.opts.serviceId,this.namespace=e.opts.namespace,this.bizTag=e.opts.bizTag,this.userId=e.opts.userId,this.nick=e.opts.nick,this._accsExtParams=e.opts.accsExtParams||{},this.unSubscribeWhenReInit=e.unSubscribeWhenReInit,this.updateSubscribe=e.updateSubscribe,this.msg=new $e({Qos:Re,DUP:0,sysCode:Ue,namespace:this.namespace,type:0,userId:this.userId,token:"",msgType:-1}),this.msg.setMsgHeader(this.topic,null,1)}return e.prototype.reInit=function(e){var t=this;return void 0===e&&(e={}),this.prevConnection=this.connect,this.connect=null,this.init(e).then((function(e){var n;return t.unSubscribeWhenReInit(null===(n=t.prevConnection)||void 0===n?void 0:n.token),e}))},e.prototype.destroy=function(){this.unSubscribe(),this.connect=null,this.conn&&this.conn.close(),this.conn&&this.conn.heartCheck&&this.conn.heartCheck.stop()},e.prototype.subscribe=function(){var e=this.msg.getprotocolData();e.msgType=Me;var t=an([this.nick,null,this.bizTag,null],4),n=t[0],r=t[1],o=t[2],i=t[3];ct.setMsgBody(n,r,o,i);var s=ct.Message.encode(ct.MessageData).finish();return e.msgBodyBuffer=s.buffer,this.msgManager&&this.msgManager.sendMsg(e)},e.prototype.updateTopic=function(e){this.topic=e,this.msg.setMsgHeader(this.topic,null,1)},e.prototype.unSubscribe=function(){this.msg.setMsgHeader(this.topic,null,1);var e=this.msg.getprotocolData();e.msgType=Pe;var t=an([this.nick,null,this.bizTag,null],4),n=t[0],r=t[1],o=t[2],i=t[3];ct.setMsgBody(n,r,o,i);var s=ct.Message.encode(ct.MessageData).finish();return e.msgBodyBuffer=s.buffer,this.msgManager&&this.msgManager.sendMsg(e)},e.prototype.sendInfoMsg=function(e,t,n,r,o,i){void 0===i&&(i=!1),"string"==typeof r&&(r=dt(r).buffer),o||this.bizTag&&(o=[this.bizTag]),this.msg.setMsgHeader(this.topic,e,1);var s=this.msg.getprotocolData();return s.type=Ae,s.Qos=Le,st.setMsgBody(t,n,o,i),s.msgBodyBuffer=st.Message.encode(st.MessageData).finish().buffer,s.msgDataBuffer=r,this.msgManager&&this.msgManager.sendInfoMsg(s)},e.prototype.sendP2pMsg=function(e,t){this.msg.setMsgHeader(this.topic,null,1);var n=this.msg.getprotocolData();return n.type=Ce,n.Qos=Le,at.setMsgBody(e),n.msgBodyBuffer=at.Message.encode(at.MessageData).finish().buffer,n.msgDataBuffer=t,this.msgManager&&this.msgManager.sendP2pMsg(n)},e.prototype.sendRequestMsg=function(e,t,n){void 0===n&&(n=20),this.msg.setMsgHeader(this.topic,e,1);var r=this.msg.getprotocolData();return r.type=Ee,r.Qos=Le,it.setMsgBody(String(t),String(n)),r.msgBodyBuffer=it.Message.encode(it.MessageData).finish().buffer,this.msgManager&&this.msgManager.sendRequestMsg(r)},e.prototype.count=function(e){void 0===e&&(e=1),this.msg.setMsgHeader(this.topic,De.SYS_SUBTYPE.MTK_MSG_SYS_DIG,1);var t=this.msg.getprotocolData();return t.type=Ne,t.Qos=Le,ot.setMsgBody("dig",e),t.msgBodyBuffer=ot.Message.encode(ot.MessageData).finish().buffer,this.msgManager&&this.msgManager.sendCountMsg(t)},e}();!function(e){e[e.ACCS=1]="ACCS",e[e.A_M=3]="A_M"}($t||($t={}));var un={powermsg:"mtop.taobao.powermsg.h5.msg.pullnativemsg",countmsg:"mtop.taobao.powermsg.h5.msg.count",pulltopicstatmsg:"mtop.taobao.powermsg.h5.msg.pulltopicstat",pulltopicuserlistmsg:"mtop.taobao.powermsg.h5.msg.pulltopicuserlist",pullhistorymsg:"mtop.taobao.powermsg.h5.msg.pullhistorymsg",sendMsg:"mtop.taobao.powermsg.h5.msg.sendmsg",subscribemsg:"mtop.taobao.powermsg.h5.msg.subscribe",unsubscribemsg:"mtop.taobao.powermsg.h5.msg.unsubscribe"},ln={powermsg:"mtop.taobao.powermsg.bc.msg.pullnativemsg",countmsg:"mtop.taobao.powermsg.bc.msg.count",pulltopicstatmsg:"mtop.taobao.powermsg.bc.msg.pulltopicstat",pulltopicuserlistmsg:"mtop.taobao.powermsg.bc.msg.pulltopicuserlist",pullhistorymsg:"mtop.taobao.powermsg.bc.msg.pullhistorymsg",sendMsg:"mtop.taobao.powermsg.bc.message.sendmsg",subscribemsg:"mtop.taobao.powermsg.bc.msg.subscribe",unsubscribemsg:"mtop.taobao.powermsg.bc.msg.unsubscribe"},pn={powermsg:"mtop.taobao.powermsg.weixin.msg.pullnativemsg",countmsg:"mtop.taobao.powermsg.weixin.msg.count",pulltopicstatmsg:"mtop.taobao.powermsg.weixin.msg.pulltopicstat",pulltopicuserlistmsg:"mtop.taobao.powermsg.weixin.msg.pulltopicuserlist",pullhistorymsg:"mtop.taobao.powermsg.weixin.msg.pullhistorymsg",sendMsg:"mtop.taobao.powermsg.weixin.msg.sendmsg",subscribemsg:"mtop.taobao.powermsg.weixin.msg.subscribe",unsubscribemsg:"mtop.taobao.powermsg.weixin.msg.unsubscribe"},fn={powermsg:"mtop.taobao.powermsg.interact.msg.pullnativemsg",countmsg:"mtop.taobao.powermsg.interact.msg.count",pulltopicstatmsg:"mtop.taobao.powermsg.interact.msg.pulltopicstat",pulltopicuserlistmsg:"mtop.taobao.powermsg.interact.msg.pulltopicuserlist",pullhistorymsg:"mtop.taobao.powermsg.interact.msg.pullhistorymsg",sendMsg:"mtop.taobao.powermsg.interact.msg.sendmsg",subscribemsg:"mtop.taobao.powermsg.interact.msg.subscribe",unsubscribemsg:"mtop.taobao.powermsg.interact.msg.unsubscribe"};var dn,hn=function(){return(hn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},mn=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},gn=function(){function e(e){var t=this;this.subscribeTimestamp=null,this.offset=0,this.requestDuration=0,this.isPolling=!1,this.init=function(){return Promise.resolve()},this.fetchMsg=function(){var e,n=(new Date).getTime(),o=isNaN(lt.duration)?20:Math.ceil(lt.duration/1e3),i={topic:t.topic,offset:t.offset,pagesize:o,tag:t.bizTag,bizcode:t.namespace,sdkversion:null===(e=t.msg.MessageData)||void 0===e?void 0:e.sdkVersion,role:t.role,token:t.options.token};return ft(t.apis.powermsg,i,t.mtopAppKey).then((function(e){var o,i,s,a=e.data,c=a.timestampList.length;t.requestDuration=1e3*new Date((new Date).getTime()-n).getSeconds(),t.offset=+a.offset,lt.setDuration(1e3*+a.period),t.updateRole(Number(e.data.role)),t.msgEmitter.setSource(2);for(var u=0;u<c;u++){var l=a.timestampList[u];s=dt(r(l.data.replace(/[\s]/g,"")));var p=null===(o=Object.keys(l.msgId2DataId))||void 0===o?void 0:o[0],f="1"===(null===(i=a.traceMsgIds)||void 0===i?void 0:i[p]);t.msgEmitter.fireEventCallBack({dataUint8:s,messageType:Xt.MTOP,canReport:f})}return a.timestampList[c-1]&&(t.offset=+a.timestampList[c-1].offset),lt.duration-t.requestDuration>0?lt.duration-t.requestDuration:0}))},this.options=e,this.emit=e.emit,this.updateRole=e.updateRole,this.appKey=e.opts.appKey,this.topic=e.opts.topic,this.serviceId=e.opts.serviceId,this.namespace=e.opts.namespace,this.bizTag=e.opts.bizTag,this.nick=e.opts.nick,this.userId=e.opts.userId,this.deviceId=e.opts.deviceId,this.role=e.opts.mode,this.ext=e.opts.ext,this.mtopAppKey=e.opts.mtopAppKey,lt.setDuration(e.opts.interval);var n=e.opts.clusterApis||{};this.apis=Object.assign(function(e){if(ae())return pn;switch(e){case"bc":return ln;case"interact":return fn;case"ali":default:return un}}(e.opts.cluster),n),this.msg=new $e({Qos:Re,DUP:0,sysCode:Ue,namespace:this.namespace,type:0,msgType:-1}),this.msg.setMsgHeader(this.topic,null),this.msgEmitter=new rn({baseMsg:this.msg,context:this})}return e.prototype.destroy=function(){this.unSubscribe()},e.prototype.subscribe=function(e){var t,n=this;void 0===e&&(e={}),this.subscribeTimestamp=(new Date).getTime();var r={namespace:this.namespace,topic:this.topic,role:this.role,sdkVersion:null===(t=this.msg.MessageData)||void 0===t?void 0:t.sdkVersion,tag:this.bizTag,timestamp:this.subscribeTimestamp,ext:(null==e?void 0:e.ext)||this.ext||this.subscribeTimestamp,from:this.nick,appKey:this.appKey,utdId:this.deviceId,token:this.options.token,isSec:0};return lt.setStopPolling(!1),ft(this.apis.subscribemsg,r,this.mtopAppKey).then((function(t){return n.emit(kt,{role:t.data.role,period:t.data.period,isVisibilitychange:e.isVisibilitychange}),n.options.opts.mode===$t.A_M&&n.polling(),en.isReporting||en.start(t.data),t})).catch((function(t){n.emit(kt,{err:t,isVisibilitychange:e.isVisibilitychange}),lt.setDuration(2e4),n.polling(),console.warn(t)}))},e.prototype.updateTopic=function(e){this.topic=e},e.prototype.unSubscribe=function(e){var t,n=this;void 0===e&&(e={});var r=e.ext,o=mn(e,["ext"]),i=hn({namespace:this.namespace,topic:this.topic,role:this.role,sdkVersion:null===(t=this.msg.MessageData)||void 0===t?void 0:t.sdkVersion,tag:this.bizTag,timestamp:(new Date).getTime(),ext:r||this.ext||this.subscribeTimestamp,from:this.nick,appkey:this.appKey,utdId:this.deviceId,token:this.options.token},o);return this.isPolling=!1,lt.setStopPolling(!0),ft(this.apis.unsubscribemsg,i,this.mtopAppKey).then((function(t){var r=t instanceof Object?hn(hn({},t),{isVisibilitychange:e.isVisibilitychange}):void 0;return n.emit(Mt,r),t}))},e.prototype.polling=function(){this.isPolling||(lt.setStopPolling(!1),this.isPolling=!0,lt.runPolling(this.fetchMsg))},e.prototype.sendInfoMsg=function(e,t,n,r,o,i){var s,a;void 0===i&&(i=!1),st.setMsgBody(t,n,o,i);var c={namespace:this.namespace,topic:this.topic,sdkVersion:null===(s=this.msg.MessageData)||void 0===s?void 0:s.sdkVersion,subType:e,bizData:r,msgId:this.msg._generateMessageId(),tagList:JSON.stringify(null===(a=st.MessageData)||void 0===a?void 0:a.sendTags),qos:je,from:t};return ft(this.apis.sendMsg,c,this.mtopAppKey)},e.prototype.sendP2pMsg=function(){console.warn("暂时不支持p2p通过mtop发送！")},e.prototype.sendRequestMsg=function(e,t,n){var r,o;void 0===n&&(n=20);var i={},s="";switch(e){case De.REQUEST_SUBTYPE.MKT_REQUEST_SUBTYPE_STAT:i={topic:this.topic,sdkversion:null===(r=this.msg.MessageData)||void 0===r?void 0:r.sdkVersion},s=this.apis.pulltopicstatmsg;break;case De.REQUEST_SUBTYPE.MKT_REQUEST_SUBTYPE_USER:i={topic:this.topic,sdkversion:null===(o=this.msg.MessageData)||void 0===o?void 0:o.sdkVersion,offset:this.offset,pagesize:n},s=this.apis.pulltopicuserlistmsg;break;case De.REQUEST_SUBTYPE.MKT_REQUEST_SUBTYPE_HLS_MSG:return this.sendRequestHlsMsg(n);default:throw new Error("未知的请求类型:".concat(e))}return ft(s,i,this.mtopAppKey)},e.prototype.sendRequestHlsMsg=function(e){var t=this,n={topic:this.topic,offset:this.offset,pagesize:e,bizCode:this.namespace};return ft(this.apis.pullhistorymsg,n,this.mtopAppKey).then((function(e){if(t.msgEmitter.setSource(2),e.data.data){var n=dt(r(e.data.data.replace(/[\s]/g,"")));t.msgEmitter.fireEventCallBack({dataUint8:n,messageType:Xt.MTOP,canReport:!1})}}))},e.prototype.count=function(e){var t;void 0===e&&(e=1);var n={namespace:this.namespace,topic:this.topic,sdkVersion:null===(t=this.msg.MessageData)||void 0===t?void 0:t.sdkVersion,tag:this.bizTag,countMap:JSON.stringify({dig:e})};return ft(this.apis.countmsg,n,this.mtopAppKey)},e}(),yn=(dn=function(e,t){return(dn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}dn(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),bn=function(){return(bn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function vn(e,t,n){if(-1===["subscribe","unSubscribe"].indexOf(t))throw"api ".concat(t," 不存在");return e.messageKitMtop[t](n)}var wn=function(e){function t(t){var n,r=e.call(this)||this;if(r.token="",r.unSubscribeWhenReInit=function(e){var t,n=r.messageKitWS,o=n.namespace,i=n.topic,s=n.msg,a=n.bizTag,c=n.nick,u=n.appKey,l=r.role;return vn(r,"unSubscribe",{namespace:o,topic:i,role:l,tag:a,from:c,appKey:u,token:e,sdkVersion:null===(t=s.MessageData)||void 0===t?void 0:t.sdkVersion}).then((function(){r.subscribed=!1}))},r.listenVisibilitychange=function(){"undefined"!=typeof document&&document.addEventListener("visibilitychange",(function(){r.hasBindUnSub&&("hidden"===document.visibilityState?r.unSubscribe({isVisibilitychange:!0}):"visible"===document.visibilityState&&r.subscribe({isVisibilitychange:!0}))}))},r.subscribe=function(e){r.subscribed||(r.subscribed=!0,!r.hasBindUnSub&&r.autoUnSub&&(r.hasBindUnSub=!0),vn(r,"subscribe",{isVisibilitychange:null==e?void 0:e.isVisibilitychange}),r.role===$t.A_M&&r.messageKitMtop.polling())},r.updateRole=function(e){if(r.role!==e&&("undefined"!=typeof my?my.connectSocket:"undefined"!=typeof window&&window.WebSocket))switch(r.role=e,e){case Ge:r.messageKitMtop.destroy(),r.messageKitWS.init().then((function(){vn(r,"subscribe")}));break;case Ke:r.messageKitWS.init().then((function(){vn(r,"subscribe"),r.messageKitMtop.polling()}))}},r.getToken=function(){if("function"==typeof r.options.getToken)return r.options.getToken;throw new Error("请传入getToken，参考getToken方法：https://yuque.antfin.com/mtbsdkdocs/accsjssdkdocs/pgfngg")},r.subscribed=!1,void 0===t.namespace)throw new Error("namespace必填");if(!t.appKey)throw new Error("appKey必填");if(!t.topic)throw new Error("topic必填");"string"==typeof t.miniAppType&&(n=t.miniAppType,ce=n),r.options=bn(bn({},t),{serviceId:t.serviceId||"powermsg",bizTag:t.bizTag||"",cluster:t.cluster||"ali",deviceId:ee.getAccsDeviceId()}),r.userId=t.userId||"",r.mode=t.mode||$t.A_M,r.role=t.mode,r.autoUnSub="true"===String(t.autoUnSub),r.namespace=t.namespace;var o={token:r.token,opts:r.options,emit:r.emit.bind(r),getToken:r.getToken,updateRole:r.updateRole,updateToken:r.updateToken,updateSubscribe:r.subscribe,unSubscribeWhenReInit:r.unSubscribeWhenReInit};return r.messageKitWS=new cn(o),r.messageKitMtop=new gn(o),r.messageKitWS.init().then((function(){r.emit(St)})),r.on(kt,(function(e){lt.setDuration(1e3*+e.period),r.updateRole(Number(e.role||r.role))})),r.listenVisibilitychange(),r}return yn(t,e),t.prototype.reInit=function(e){var t=this;void 0===e&&(e={}),this.messageKitWS.reInit(e).then((function(){t.subscribed&&(t.subscribed=!1,t.role=t.mode,t.subscribe())}))},t.prototype.unSubscribe=function(e){if(this.subscribed)return this.subscribed=!1,vn(this,"unSubscribe",{isVisibilitychange:null==e?void 0:e.isVisibilitychange})},t.prototype.resubscribe=function(e){this.subscribed=!1,this.role=this.mode,this.messageKitMtop.updateTopic(e),this.messageKitWS.updateTopic(e),this.subscribe()},t.prototype.sendInfoMsg=function(e,t,n,r,o,i){var a=this;void 0===i&&(i=!1);var c=this.mode===$t.ACCS?this.messageKitWS:this.messageKitMtop,l=r;return this.mode!==$t.ACCS&&(l=s.encode64buf(r)),u.log("SEND MESSAGE DATA","subType:",e,"from",t,"to",n,"adapterData",l,"tags",o,"isFullTags",i),c.sendInfoMsg(e,t,n,l,o,i).catch((function(e){e.ret&&e.ret[0].indexOf("FAIL_SYS_SESSION_EXPIRED")>-1&&a.emit(Rt,e)}))},t.prototype.sendRequestMsg=function(e,t,n){return(this.mode===$t.ACCS?this.messageKitWS:this.messageKitMtop).sendRequestMsg(e,t,n)},t.prototype.sendP2pMsg=function(e,t){return(this.mode===$t.ACCS?this.messageKitWS:this.messageKitMtop).sendP2pMsg(e,t)},t.prototype.count=function(e){(this.mode===$t.ACCS?this.messageKitWS:this.messageKitMtop).count(e)},t.prototype.updateToken=function(e){this.token=e},t.getAccsDeviceId=ee.getAccsDeviceId,t}(we.a);const Tn=Ye.Reader,On=Ye.Writer,Sn=Ye.util,kn=Ye.roots.default||(Ye.roots.default={});kn.TopicUser=(()=>{function e(e){if(this.user=[],e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.user=Sn.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=On.create()),null!=e.user&&e.user.length)for(let n=0;n<e.user.length;++n)kn.TopicUser.User.encode(e.user[n],t.uint32(10).fork()).ldelim();return t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof Tn||(e=Tn.create(e));let n=void 0===t?e.len:e.pos+t,r=new kn.TopicUser;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.user&&r.user.length||(r.user=[]),r.user.push(kn.TopicUser.User.decode(e,e.uint32()));break;default:e.skipType(7&t)}}return r},e.decodeDelimited=function(e){return e instanceof Tn||(e=new Tn(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.user&&e.hasOwnProperty("user")){if(!Array.isArray(e.user))return"user: array expected";for(let t=0;t<e.user.length;++t){let n=kn.TopicUser.User.verify(e.user[t]);if(n)return"user."+n}}return null},e.fromObject=function(e){if(e instanceof kn.TopicUser)return e;let t=new kn.TopicUser;if(e.user){if(!Array.isArray(e.user))throw TypeError(".TopicUser.user: array expected");t.user=[];for(let n=0;n<e.user.length;++n){if("object"!=typeof e.user[n])throw TypeError(".TopicUser.user: object expected");t.user[n]=kn.TopicUser.User.fromObject(e.user[n])}}return t},e.toObject=function(e,t){t||(t={});let n={};if((t.arrays||t.defaults)&&(n.user=[]),e.user&&e.user.length){n.user=[];for(let r=0;r<e.user.length;++r)n.user[r]=kn.TopicUser.User.toObject(e.user[r],t)}return n},e.prototype.toJSON=function(){return this.constructor.toObject(this,Ye.util.toJSONOptions)},e.User=function(){function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.userId="",e.prototype.nick="",e.prototype.addTime=Sn.Long?Sn.Long.fromBits(0,0,!1):0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=On.create()),null!=e.userId&&Object.hasOwnProperty.call(e,"userId")&&t.uint32(10).string(e.userId),null!=e.nick&&Object.hasOwnProperty.call(e,"nick")&&t.uint32(18).string(e.nick),null!=e.addTime&&Object.hasOwnProperty.call(e,"addTime")&&t.uint32(24).int64(e.addTime),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof Tn||(e=Tn.create(e));let n=void 0===t?e.len:e.pos+t,r=new kn.TopicUser.User;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.userId=e.string();break;case 2:r.nick=e.string();break;case 3:r.addTime=e.int64();break;default:e.skipType(7&t)}}return r},e.decodeDelimited=function(e){return e instanceof Tn||(e=new Tn(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.userId&&e.hasOwnProperty("userId")&&!Sn.isString(e.userId)?"userId: string expected":null!=e.nick&&e.hasOwnProperty("nick")&&!Sn.isString(e.nick)?"nick: string expected":null!=e.addTime&&e.hasOwnProperty("addTime")&&!(Sn.isInteger(e.addTime)||e.addTime&&Sn.isInteger(e.addTime.low)&&Sn.isInteger(e.addTime.high))?"addTime: integer|Long expected":null},e.fromObject=function(e){if(e instanceof kn.TopicUser.User)return e;let t=new kn.TopicUser.User;return null!=e.userId&&(t.userId=String(e.userId)),null!=e.nick&&(t.nick=String(e.nick)),null!=e.addTime&&(Sn.Long?(t.addTime=Sn.Long.fromValue(e.addTime)).unsigned=!1:"string"==typeof e.addTime?t.addTime=parseInt(e.addTime,10):"number"==typeof e.addTime?t.addTime=e.addTime:"object"==typeof e.addTime&&(t.addTime=new Sn.LongBits(e.addTime.low>>>0,e.addTime.high>>>0).toNumber())),t},e.toObject=function(e,t){t||(t={});let n={};if(t.defaults)if(n.userId="",n.nick="",Sn.Long){let e=new Sn.Long(0,0,!1);n.addTime=t.longs===String?e.toString():t.longs===Number?e.toNumber():e}else n.addTime=t.longs===String?"0":0;return null!=e.userId&&e.hasOwnProperty("userId")&&(n.userId=e.userId),null!=e.nick&&e.hasOwnProperty("nick")&&(n.nick=e.nick),null!=e.addTime&&e.hasOwnProperty("addTime")&&("number"==typeof e.addTime?n.addTime=t.longs===String?String(e.addTime):e.addTime:n.addTime=t.longs===String?Sn.Long.prototype.toString.call(e.addTime):t.longs===Number?new Sn.LongBits(e.addTime.low>>>0,e.addTime.high>>>0).toNumber():e.addTime),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,Ye.util.toJSONOptions)},e}(),e})(),kn.TopicStat=(()=>{function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.visitNum=0,e.prototype.onlineNum=0,e.prototype.totalNum=0,e.prototype.msgNum=0,e.prototype.digNum=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=On.create()),null!=e.visitNum&&Object.hasOwnProperty.call(e,"visitNum")&&t.uint32(8).int32(e.visitNum),null!=e.onlineNum&&Object.hasOwnProperty.call(e,"onlineNum")&&t.uint32(16).int32(e.onlineNum),null!=e.totalNum&&Object.hasOwnProperty.call(e,"totalNum")&&t.uint32(24).int32(e.totalNum),null!=e.msgNum&&Object.hasOwnProperty.call(e,"msgNum")&&t.uint32(32).int32(e.msgNum),null!=e.digNum&&Object.hasOwnProperty.call(e,"digNum")&&t.uint32(40).int32(e.digNum),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof Tn||(e=Tn.create(e));let n=void 0===t?e.len:e.pos+t,r=new kn.TopicStat;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.visitNum=e.int32();break;case 2:r.onlineNum=e.int32();break;case 3:r.totalNum=e.int32();break;case 4:r.msgNum=e.int32();break;case 5:r.digNum=e.int32();break;default:e.skipType(7&t)}}return r},e.decodeDelimited=function(e){return e instanceof Tn||(e=new Tn(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.visitNum&&e.hasOwnProperty("visitNum")&&!Sn.isInteger(e.visitNum)?"visitNum: integer expected":null!=e.onlineNum&&e.hasOwnProperty("onlineNum")&&!Sn.isInteger(e.onlineNum)?"onlineNum: integer expected":null!=e.totalNum&&e.hasOwnProperty("totalNum")&&!Sn.isInteger(e.totalNum)?"totalNum: integer expected":null!=e.msgNum&&e.hasOwnProperty("msgNum")&&!Sn.isInteger(e.msgNum)?"msgNum: integer expected":null!=e.digNum&&e.hasOwnProperty("digNum")&&!Sn.isInteger(e.digNum)?"digNum: integer expected":null},e.fromObject=function(e){if(e instanceof kn.TopicStat)return e;let t=new kn.TopicStat;return null!=e.visitNum&&(t.visitNum=0|e.visitNum),null!=e.onlineNum&&(t.onlineNum=0|e.onlineNum),null!=e.totalNum&&(t.totalNum=0|e.totalNum),null!=e.msgNum&&(t.msgNum=0|e.msgNum),null!=e.digNum&&(t.digNum=0|e.digNum),t},e.toObject=function(e,t){t||(t={});let n={};return t.defaults&&(n.visitNum=0,n.onlineNum=0,n.totalNum=0,n.msgNum=0,n.digNum=0),null!=e.visitNum&&e.hasOwnProperty("visitNum")&&(n.visitNum=e.visitNum),null!=e.onlineNum&&e.hasOwnProperty("onlineNum")&&(n.onlineNum=e.onlineNum),null!=e.totalNum&&e.hasOwnProperty("totalNum")&&(n.totalNum=e.totalNum),null!=e.msgNum&&e.hasOwnProperty("msgNum")&&(n.msgNum=e.msgNum),null!=e.digNum&&e.hasOwnProperty("digNum")&&(n.digNum=e.digNum),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,Ye.util.toJSONOptions)},e})(),kn.TextMessage=(()=>{function e(e){if(this.params={},e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.message="",e.prototype.params=Sn.emptyObject,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=On.create()),null!=e.message&&Object.hasOwnProperty.call(e,"message")&&t.uint32(10).string(e.message),null!=e.params&&Object.hasOwnProperty.call(e,"params"))for(let n=Object.keys(e.params),r=0;r<n.length;++r)t.uint32(18).fork().uint32(10).string(n[r]).uint32(18).string(e.params[n[r]]).ldelim();return t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof Tn||(e=Tn.create(e));let n,r=void 0===t?e.len:e.pos+t,o=new kn.TextMessage;for(;e.pos<r;){let t=e.uint32();switch(t>>>3){case 1:o.message=e.string();break;case 2:e.skip().pos++,o.params===Sn.emptyObject&&(o.params={}),n=e.string(),e.pos++,o.params[n]=e.string();break;default:e.skipType(7&t)}}return o},e.decodeDelimited=function(e){return e instanceof Tn||(e=new Tn(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.message&&e.hasOwnProperty("message")&&!Sn.isString(e.message))return"message: string expected";if(null!=e.params&&e.hasOwnProperty("params")){if(!Sn.isObject(e.params))return"params: object expected";let t=Object.keys(e.params);for(let n=0;n<t.length;++n)if(!Sn.isString(e.params[t[n]]))return"params: string{k:string} expected"}return null},e.fromObject=function(e){if(e instanceof kn.TextMessage)return e;let t=new kn.TextMessage;if(null!=e.message&&(t.message=String(e.message)),e.params){if("object"!=typeof e.params)throw TypeError(".TextMessage.params: object expected");t.params={};for(let n=Object.keys(e.params),r=0;r<n.length;++r)t.params[n[r]]=String(e.params[n[r]])}return t},e.toObject=function(e,t){t||(t={});let n,r={};if((t.objects||t.defaults)&&(r.params={}),t.defaults&&(r.message=""),null!=e.message&&e.hasOwnProperty("message")&&(r.message=e.message),e.params&&(n=Object.keys(e.params)).length){r.params={};for(let t=0;t<n.length;++t)r.params[n[t]]=e.params[n[t]]}return r},e.prototype.toJSON=function(){return this.constructor.toObject(this,Ye.util.toJSONOptions)},e})(),kn.CountInfo=(()=>{function e(e){if(this.value={},e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.value=Sn.emptyObject,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=On.create()),null!=e.value&&Object.hasOwnProperty.call(e,"value"))for(let n=Object.keys(e.value),r=0;r<n.length;++r)t.uint32(10).fork().uint32(10).string(n[r]).uint32(16).int64(e.value[n[r]]).ldelim();return t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof Tn||(e=Tn.create(e));let n,r=void 0===t?e.len:e.pos+t,o=new kn.CountInfo;for(;e.pos<r;){let t=e.uint32();switch(t>>>3){case 1:e.skip().pos++,o.value===Sn.emptyObject&&(o.value={}),n=e.string(),e.pos++,o.value[n]=e.int64();break;default:e.skipType(7&t)}}return o},e.decodeDelimited=function(e){return e instanceof Tn||(e=new Tn(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.value&&e.hasOwnProperty("value")){if(!Sn.isObject(e.value))return"value: object expected";let t=Object.keys(e.value);for(let n=0;n<t.length;++n)if(!(Sn.isInteger(e.value[t[n]])||e.value[t[n]]&&Sn.isInteger(e.value[t[n]].low)&&Sn.isInteger(e.value[t[n]].high)))return"value: integer|Long{k:string} expected"}return null},e.fromObject=function(e){if(e instanceof kn.CountInfo)return e;let t=new kn.CountInfo;if(e.value){if("object"!=typeof e.value)throw TypeError(".CountInfo.value: object expected");t.value={};for(let n=Object.keys(e.value),r=0;r<n.length;++r)Sn.Long?(t.value[n[r]]=Sn.Long.fromValue(e.value[n[r]])).unsigned=!1:"string"==typeof e.value[n[r]]?t.value[n[r]]=parseInt(e.value[n[r]],10):"number"==typeof e.value[n[r]]?t.value[n[r]]=e.value[n[r]]:"object"==typeof e.value[n[r]]&&(t.value[n[r]]=new Sn.LongBits(e.value[n[r]].low>>>0,e.value[n[r]].high>>>0).toNumber())}return t},e.toObject=function(e,t){t||(t={});let n,r={};if((t.objects||t.defaults)&&(r.value={}),e.value&&(n=Object.keys(e.value)).length){r.value={};for(let o=0;o<n.length;++o)"number"==typeof e.value[n[o]]?r.value[n[o]]=t.longs===String?String(e.value[n[o]]):e.value[n[o]]:r.value[n[o]]=t.longs===String?Sn.Long.prototype.toString.call(e.value[n[o]]):t.longs===Number?new Sn.LongBits(e.value[n[o]].low>>>0,e.value[n[o]].high>>>0).toNumber():e.value[n[o]]}return r},e.prototype.toJSON=function(){return this.constructor.toObject(this,Ye.util.toJSONOptions)},e})(),kn.JoinNotify=(()=>{function e(e){if(this.addUsers={},e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.totalCount=0,e.prototype.onlineCount=0,e.prototype.addUsers=Sn.emptyObject,e.prototype.pageViewCount=Sn.Long?Sn.Long.fromBits(0,0,!1):0,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=On.create()),null!=e.totalCount&&Object.hasOwnProperty.call(e,"totalCount")&&t.uint32(8).int32(e.totalCount),null!=e.onlineCount&&Object.hasOwnProperty.call(e,"onlineCount")&&t.uint32(16).int32(e.onlineCount),null!=e.addUsers&&Object.hasOwnProperty.call(e,"addUsers"))for(let n=Object.keys(e.addUsers),r=0;r<n.length;++r)t.uint32(26).fork().uint32(10).string(n[r]).uint32(18).string(e.addUsers[n[r]]).ldelim();return null!=e.pageViewCount&&Object.hasOwnProperty.call(e,"pageViewCount")&&t.uint32(32).int64(e.pageViewCount),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof Tn||(e=Tn.create(e));let n,r=void 0===t?e.len:e.pos+t,o=new kn.JoinNotify;for(;e.pos<r;){let t=e.uint32();switch(t>>>3){case 1:o.totalCount=e.int32();break;case 2:o.onlineCount=e.int32();break;case 3:e.skip().pos++,o.addUsers===Sn.emptyObject&&(o.addUsers={}),n=e.string(),e.pos++,o.addUsers[n]=e.string();break;case 4:o.pageViewCount=e.int64();break;default:e.skipType(7&t)}}return o},e.decodeDelimited=function(e){return e instanceof Tn||(e=new Tn(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.totalCount&&e.hasOwnProperty("totalCount")&&!Sn.isInteger(e.totalCount))return"totalCount: integer expected";if(null!=e.onlineCount&&e.hasOwnProperty("onlineCount")&&!Sn.isInteger(e.onlineCount))return"onlineCount: integer expected";if(null!=e.addUsers&&e.hasOwnProperty("addUsers")){if(!Sn.isObject(e.addUsers))return"addUsers: object expected";let t=Object.keys(e.addUsers);for(let n=0;n<t.length;++n)if(!Sn.isString(e.addUsers[t[n]]))return"addUsers: string{k:string} expected"}return null!=e.pageViewCount&&e.hasOwnProperty("pageViewCount")&&!(Sn.isInteger(e.pageViewCount)||e.pageViewCount&&Sn.isInteger(e.pageViewCount.low)&&Sn.isInteger(e.pageViewCount.high))?"pageViewCount: integer|Long expected":null},e.fromObject=function(e){if(e instanceof kn.JoinNotify)return e;let t=new kn.JoinNotify;if(null!=e.totalCount&&(t.totalCount=0|e.totalCount),null!=e.onlineCount&&(t.onlineCount=0|e.onlineCount),e.addUsers){if("object"!=typeof e.addUsers)throw TypeError(".JoinNotify.addUsers: object expected");t.addUsers={};for(let n=Object.keys(e.addUsers),r=0;r<n.length;++r)t.addUsers[n[r]]=String(e.addUsers[n[r]])}return null!=e.pageViewCount&&(Sn.Long?(t.pageViewCount=Sn.Long.fromValue(e.pageViewCount)).unsigned=!1:"string"==typeof e.pageViewCount?t.pageViewCount=parseInt(e.pageViewCount,10):"number"==typeof e.pageViewCount?t.pageViewCount=e.pageViewCount:"object"==typeof e.pageViewCount&&(t.pageViewCount=new Sn.LongBits(e.pageViewCount.low>>>0,e.pageViewCount.high>>>0).toNumber())),t},e.toObject=function(e,t){t||(t={});let n,r={};if((t.objects||t.defaults)&&(r.addUsers={}),t.defaults)if(r.totalCount=0,r.onlineCount=0,Sn.Long){let e=new Sn.Long(0,0,!1);r.pageViewCount=t.longs===String?e.toString():t.longs===Number?e.toNumber():e}else r.pageViewCount=t.longs===String?"0":0;if(null!=e.totalCount&&e.hasOwnProperty("totalCount")&&(r.totalCount=e.totalCount),null!=e.onlineCount&&e.hasOwnProperty("onlineCount")&&(r.onlineCount=e.onlineCount),e.addUsers&&(n=Object.keys(e.addUsers)).length){r.addUsers={};for(let t=0;t<n.length;++t)r.addUsers[n[t]]=e.addUsers[n[t]]}return null!=e.pageViewCount&&e.hasOwnProperty("pageViewCount")&&("number"==typeof e.pageViewCount?r.pageViewCount=t.longs===String?String(e.pageViewCount):e.pageViewCount:r.pageViewCount=t.longs===String?Sn.Long.prototype.toString.call(e.pageViewCount):t.longs===Number?new Sn.LongBits(e.pageViewCount.low>>>0,e.pageViewCount.high>>>0).toNumber():e.pageViewCount),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,Ye.util.toJSONOptions)},e})(),kn.PullMsgInfo=(()=>{function e(e){if(this.pullMsg=[],e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.offset=Sn.Long?Sn.Long.fromBits(0,0,!1):0,e.prototype.role=0,e.prototype.period=0,e.prototype.pullMsg=Sn.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=On.create()),null!=e.offset&&Object.hasOwnProperty.call(e,"offset")&&t.uint32(8).int64(e.offset),null!=e.role&&Object.hasOwnProperty.call(e,"role")&&t.uint32(16).int32(e.role),null!=e.period&&Object.hasOwnProperty.call(e,"period")&&t.uint32(24).int32(e.period),null!=e.pullMsg&&e.pullMsg.length)for(let n=0;n<e.pullMsg.length;++n)kn.PullMsgInfo.PullMsg.encode(e.pullMsg[n],t.uint32(34).fork()).ldelim();return t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof Tn||(e=Tn.create(e));let n=void 0===t?e.len:e.pos+t,r=new kn.PullMsgInfo;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.offset=e.int64();break;case 2:r.role=e.int32();break;case 3:r.period=e.int32();break;case 4:r.pullMsg&&r.pullMsg.length||(r.pullMsg=[]),r.pullMsg.push(kn.PullMsgInfo.PullMsg.decode(e,e.uint32()));break;default:e.skipType(7&t)}}return r},e.decodeDelimited=function(e){return e instanceof Tn||(e=new Tn(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.offset&&e.hasOwnProperty("offset")&&!(Sn.isInteger(e.offset)||e.offset&&Sn.isInteger(e.offset.low)&&Sn.isInteger(e.offset.high)))return"offset: integer|Long expected";if(null!=e.role&&e.hasOwnProperty("role")&&!Sn.isInteger(e.role))return"role: integer expected";if(null!=e.period&&e.hasOwnProperty("period")&&!Sn.isInteger(e.period))return"period: integer expected";if(null!=e.pullMsg&&e.hasOwnProperty("pullMsg")){if(!Array.isArray(e.pullMsg))return"pullMsg: array expected";for(let t=0;t<e.pullMsg.length;++t){let n=kn.PullMsgInfo.PullMsg.verify(e.pullMsg[t]);if(n)return"pullMsg."+n}}return null},e.fromObject=function(e){if(e instanceof kn.PullMsgInfo)return e;let t=new kn.PullMsgInfo;if(null!=e.offset&&(Sn.Long?(t.offset=Sn.Long.fromValue(e.offset)).unsigned=!1:"string"==typeof e.offset?t.offset=parseInt(e.offset,10):"number"==typeof e.offset?t.offset=e.offset:"object"==typeof e.offset&&(t.offset=new Sn.LongBits(e.offset.low>>>0,e.offset.high>>>0).toNumber())),null!=e.role&&(t.role=0|e.role),null!=e.period&&(t.period=0|e.period),e.pullMsg){if(!Array.isArray(e.pullMsg))throw TypeError(".PullMsgInfo.pullMsg: array expected");t.pullMsg=[];for(let n=0;n<e.pullMsg.length;++n){if("object"!=typeof e.pullMsg[n])throw TypeError(".PullMsgInfo.pullMsg: object expected");t.pullMsg[n]=kn.PullMsgInfo.PullMsg.fromObject(e.pullMsg[n])}}return t},e.toObject=function(e,t){t||(t={});let n={};if((t.arrays||t.defaults)&&(n.pullMsg=[]),t.defaults){if(Sn.Long){let e=new Sn.Long(0,0,!1);n.offset=t.longs===String?e.toString():t.longs===Number?e.toNumber():e}else n.offset=t.longs===String?"0":0;n.role=0,n.period=0}if(null!=e.offset&&e.hasOwnProperty("offset")&&("number"==typeof e.offset?n.offset=t.longs===String?String(e.offset):e.offset:n.offset=t.longs===String?Sn.Long.prototype.toString.call(e.offset):t.longs===Number?new Sn.LongBits(e.offset.low>>>0,e.offset.high>>>0).toNumber():e.offset),null!=e.role&&e.hasOwnProperty("role")&&(n.role=e.role),null!=e.period&&e.hasOwnProperty("period")&&(n.period=e.period),e.pullMsg&&e.pullMsg.length){n.pullMsg=[];for(let r=0;r<e.pullMsg.length;++r)n.pullMsg[r]=kn.PullMsgInfo.PullMsg.toObject(e.pullMsg[r],t)}return n},e.prototype.toJSON=function(){return this.constructor.toObject(this,Ye.util.toJSONOptions)},e.PullMsg=function(){function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.offset=Sn.Long?Sn.Long.fromBits(0,0,!1):0,e.prototype.messages=Sn.newBuffer([]),e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=On.create()),null!=e.offset&&Object.hasOwnProperty.call(e,"offset")&&t.uint32(8).int64(e.offset),null!=e.messages&&Object.hasOwnProperty.call(e,"messages")&&t.uint32(18).bytes(e.messages),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof Tn||(e=Tn.create(e));let n=void 0===t?e.len:e.pos+t,r=new kn.PullMsgInfo.PullMsg;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.offset=e.int64();break;case 2:r.messages=e.bytes();break;default:e.skipType(7&t)}}return r},e.decodeDelimited=function(e){return e instanceof Tn||(e=new Tn(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.offset&&e.hasOwnProperty("offset")&&!(Sn.isInteger(e.offset)||e.offset&&Sn.isInteger(e.offset.low)&&Sn.isInteger(e.offset.high))?"offset: integer|Long expected":null!=e.messages&&e.hasOwnProperty("messages")&&!(e.messages&&"number"==typeof e.messages.length||Sn.isString(e.messages))?"messages: buffer expected":null},e.fromObject=function(e){if(e instanceof kn.PullMsgInfo.PullMsg)return e;let t=new kn.PullMsgInfo.PullMsg;return null!=e.offset&&(Sn.Long?(t.offset=Sn.Long.fromValue(e.offset)).unsigned=!1:"string"==typeof e.offset?t.offset=parseInt(e.offset,10):"number"==typeof e.offset?t.offset=e.offset:"object"==typeof e.offset&&(t.offset=new Sn.LongBits(e.offset.low>>>0,e.offset.high>>>0).toNumber())),null!=e.messages&&("string"==typeof e.messages?Sn.base64.decode(e.messages,t.messages=Sn.newBuffer(Sn.base64.length(e.messages)),0):e.messages.length&&(t.messages=e.messages)),t},e.toObject=function(e,t){t||(t={});let n={};if(t.defaults){if(Sn.Long){let e=new Sn.Long(0,0,!1);n.offset=t.longs===String?e.toString():t.longs===Number?e.toNumber():e}else n.offset=t.longs===String?"0":0;t.bytes===String?n.messages="":(n.messages=[],t.bytes!==Array&&(n.messages=Sn.newBuffer(n.messages)))}return null!=e.offset&&e.hasOwnProperty("offset")&&("number"==typeof e.offset?n.offset=t.longs===String?String(e.offset):e.offset:n.offset=t.longs===String?Sn.Long.prototype.toString.call(e.offset):t.longs===Number?new Sn.LongBits(e.offset.low>>>0,e.offset.high>>>0).toNumber():e.offset),null!=e.messages&&e.hasOwnProperty("messages")&&(n.messages=t.bytes===String?Sn.base64.encode(e.messages,0,e.messages.length):t.bytes===Array?Array.prototype.slice.call(e.messages):e.messages),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,Ye.util.toJSONOptions)},e}(),e})(),kn.Config=(()=>{function e(e){if(e)for(let t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.version=0,e.prototype.namespace=0,e.prototype.appKey="",e.prototype.sdkVersion="",e.prototype.content="",e.prototype.isValid=!1,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=On.create()),null!=e.version&&Object.hasOwnProperty.call(e,"version")&&t.uint32(8).int32(e.version),null!=e.namespace&&Object.hasOwnProperty.call(e,"namespace")&&t.uint32(16).int32(e.namespace),null!=e.appKey&&Object.hasOwnProperty.call(e,"appKey")&&t.uint32(26).string(e.appKey),null!=e.sdkVersion&&Object.hasOwnProperty.call(e,"sdkVersion")&&t.uint32(34).string(e.sdkVersion),null!=e.content&&Object.hasOwnProperty.call(e,"content")&&t.uint32(42).string(e.content),null!=e.isValid&&Object.hasOwnProperty.call(e,"isValid")&&t.uint32(48).bool(e.isValid),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof Tn||(e=Tn.create(e));let n=void 0===t?e.len:e.pos+t,r=new kn.Config;for(;e.pos<n;){let t=e.uint32();switch(t>>>3){case 1:r.version=e.int32();break;case 2:r.namespace=e.int32();break;case 3:r.appKey=e.string();break;case 4:r.sdkVersion=e.string();break;case 5:r.content=e.string();break;case 6:r.isValid=e.bool();break;default:e.skipType(7&t)}}return r},e.decodeDelimited=function(e){return e instanceof Tn||(e=new Tn(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.version&&e.hasOwnProperty("version")&&!Sn.isInteger(e.version)?"version: integer expected":null!=e.namespace&&e.hasOwnProperty("namespace")&&!Sn.isInteger(e.namespace)?"namespace: integer expected":null!=e.appKey&&e.hasOwnProperty("appKey")&&!Sn.isString(e.appKey)?"appKey: string expected":null!=e.sdkVersion&&e.hasOwnProperty("sdkVersion")&&!Sn.isString(e.sdkVersion)?"sdkVersion: string expected":null!=e.content&&e.hasOwnProperty("content")&&!Sn.isString(e.content)?"content: string expected":null!=e.isValid&&e.hasOwnProperty("isValid")&&"boolean"!=typeof e.isValid?"isValid: boolean expected":null},e.fromObject=function(e){if(e instanceof kn.Config)return e;let t=new kn.Config;return null!=e.version&&(t.version=0|e.version),null!=e.namespace&&(t.namespace=0|e.namespace),null!=e.appKey&&(t.appKey=String(e.appKey)),null!=e.sdkVersion&&(t.sdkVersion=String(e.sdkVersion)),null!=e.content&&(t.content=String(e.content)),null!=e.isValid&&(t.isValid=Boolean(e.isValid)),t},e.toObject=function(e,t){t||(t={});let n={};return t.defaults&&(n.version=0,n.namespace=0,n.appKey="",n.sdkVersion="",n.content="",n.isValid=!1),null!=e.version&&e.hasOwnProperty("version")&&(n.version=e.version),null!=e.namespace&&e.hasOwnProperty("namespace")&&(n.namespace=e.namespace),null!=e.appKey&&e.hasOwnProperty("appKey")&&(n.appKey=e.appKey),null!=e.sdkVersion&&e.hasOwnProperty("sdkVersion")&&(n.sdkVersion=e.sdkVersion),null!=e.content&&e.hasOwnProperty("content")&&(n.content=e.content),null!=e.isValid&&e.hasOwnProperty("isValid")&&(n.isValid=e.isValid),n},e.prototype.toJSON=function(){return this.constructor.toObject(this,Ye.util.toJSONOptions)},e})();var Mn=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),_n=function(e){function t(t){var n=e.call(this,t)||this;return n.addEventListener=function(){var e=function(e,t){var r,o;void 0===t&&(t=!1);var i,a,c,l=e.msgHeader,p=e.msgBody,f=l.subType;if(f===De.SYS_SUBTYPE.MTK_MSG_SYS_COMMON)(d=(i=kn,a=e.msgDataBuffer,{message:(c=i.TextMessage.decode(new Uint8Array(a))).message,params:c.params})).userId=null!==(r=null==l?void 0:l.userId)&&void 0!==r?r:"",d.from=null!==(o=p.from)&&void 0!==o?o:"",d.timestamp=+((null==p?void 0:p.timestamp)||0),u.log("STEP4 文本消息 message data解码",d),t?n.emit(At,d):n.emit(xt,d);else if(f===De.SYS_SUBTYPE.MTK_MSG_SYS_DIG){var d=function(e,t){var n=e.CountInfo.decode(new Uint8Array(t));return{count:Number(n.value.dig)}}(kn,e.msgDataBuffer);t||n.emit(Nt,d)}else if(f===De.SYS_SUBTYPE.MTK_MSG_SYS_JOIN||f===De.SYS_SUBTYPE.MTK_MSG_SYS_JOIN_OLD){d=function(e,t){return e.JoinNotify.decode(new Uint8Array(t)).toJSON()}(kn,e.msgDataBuffer);n.emit(It,d)}else t?(e.msgData=s.decode64buf(e.msgDataBuffer),n.emit(Ct,e)):(e.msgData=s.decode64buf(e.msgDataBuffer),n.emit(Et,e))};n.on(Kt,(function(t){e(t)})),n.on(Gt,(function(t){e(t,!0)})),n.on(Ft,(function(e){var t,r,o,i=e.msgHeader.subType;if(i===De.REQUEST_SUBTYPE.MKT_REQUEST_SUBTYPE_USER){var s=function(e,t){var n=e.TopicUser.decode(new Uint8Array(t)).user,r=[];return n.forEach((function(e){r.push({userId:e.userId,nick:e.nick,timestamp:e.addTime||0})})),r}(kn,e.msgDataBuffer);n.emit(_t,s)}else if(i===De.REQUEST_SUBTYPE.MKT_REQUEST_SUBTYPE_STAT){s=(t=kn,r=e.msgDataBuffer,{digNum:(o=t.TopicStat.decode(new Uint8Array(r))).digNum,msgNum:o.msgNum,onlineNum:o.onlineNum,totalNum:o.totalNum,visitNum:o.visitNum});n.emit(Pt,s)}else n.emit(Vt,{data:e})}))},n.checkDependencies(),n.from=t.from||"null",n.addEventListener(),n.initBaXia(),u.init(!0===(null==t?void 0:t.debug)),pt.init(null==t?void 0:t.mtop),function(e){var t,n;try{(null===(n=null===(t=null===lib||void 0===lib?void 0:lib.mtop)||void 0===t?void 0:t.middlewares)||void 0===n?void 0:n.push)?(u.log("mtopProcessBizInfo success: "),lib.mtop.middlewares.push((function(t){var n=this.params,r=this.options;try{if(n.api.indexOf("powermsg")>-1){var o="namespace=".concat(e);if(r.H5Request){var i=n.ext_querys||{};i["x-biz-type"]="powermsg",i["x-biz-info"]=o,n.ext_querys=i,this.__processRequestUrl(t)}else if(r.WindVaneRequest){var s=n.ext_headers||{};s["x-biz-type"]="powermsg",s["x-biz-info"]=o,n.ext_headers=s,t()}else t()}else t()}catch(e){t()}}))):u.log("mtopProcessBizInfo error: lib.mtop.middlewares.push is not function")}catch(e){console.log("没有检测到lib.mtop.middlewares, 请求无法区分，业务正常使用不受影响")}}(t.namespace),Zt.init(t.appKey).finally((function(){en.init(n)})),u.log("PowerMsg 入参:",t),n}return Mn(t,e),t.prototype.initBaXia=function(){if(!se()&&!ae()){var e=function(){window.baxiaCommon.init({appendTo:"header",checkApiPath:function(e){return e.indexOf("powermsg")>-1}})},t=window.baxiaCommon&&"function"==typeof window.baxiaCommon.init,n=window.AWSC&&"function"==typeof window.AWSC.use,r=t&&n;r?e():function(e,t){var n=document.createElement("script");n.setAttribute("type","text/javascript"),n.setAttribute("async","true"),n.setAttribute("crossorigin","anonymous");var r=n.getAttribute("readyState");r?n.addEventListener("readystatechange",(function(){"loaded"!==r&&"complete"!==r||t()})):n.addEventListener("load",(function(){t()})),n.src=e,document.getElementsByTagName("head")[0].appendChild(n)}("https://g.alicdn.com/??/AWSC/AWSC/awsc.js,/sd/baxia-entry/baxiaCommon.js",(function(){return r&&e()}))}},t.prototype.sendMessage=function(e,t,n,r,o,i){void 0===e&&(e=""),void 0===t&&(t=this.from);var s=De.SYS_SUBTYPE.MTK_MSG_SYS_COMMON,a=kn.TextMessage,c={message:e,params:{}},u=r||{};for(var l in u)c.params&&(c.params[l]=u[l].toString());var p=a.create(c),f=a.encode(p).finish();return this.sendInfoMsg(s,t,n,f,o,i)},t.prototype.sendBizMessage=function(e,t,n,r,o,i){return void 0===e&&(e=""),void 0===n&&(n=this.from),void 0===i&&(i=!1),this.sendInfoMsg(t,n,r,s.encode64(s.utf16to8(e)),o,i)},t.prototype.requestTopicUserList=function(e,t){var n=this;void 0===t&&(t=20),this.sendRequestMsg(De.REQUEST_SUBTYPE.MKT_REQUEST_SUBTYPE_USER,e,t).then((function(e){"mtop"===e.mode&&n.emit(_t,e.data.result)}))},t.prototype.requestTopicStatus=function(){var e=this;this.sendRequestMsg(De.REQUEST_SUBTYPE.MKT_REQUEST_SUBTYPE_STAT).then((function(t){"mtop"===t.mode&&e.emit(Pt,t.data)}))},t.prototype.requestHistoryMsgList=function(e){void 0===e&&(e=20),this.sendRequestMsg(De.REQUEST_SUBTYPE.MKT_REQUEST_SUBTYPE_HLS_MSG,0,e)},t.prototype.checkDependencies=function(){var e;if(function(e){var t;return!(!(null==e?void 0:e.request)||"function"!=typeof e.request||!(null===(t=null==e?void 0:e.config)||void 0===t?void 0:t.subDomain))}(this.options.mtop));else if(se()||ae()||!(null===(e=null==Pn?void 0:Pn.lib)||void 0===e?void 0:e.mtop)){if(!se()&&!ae())throw new Error("缺少mtop，请引入全局mtop或通过 new PowerMsg({mtop}) 初始化传入")}else;},t}(wn),Pn="undefined"==typeof window?{}:window;Pn.lib||(Pn.lib={}),Pn.lib.PowerMsg=_n;var xn,An,Nn=_n;!function(e){e.PM="pm",e.CDN="cdn"}(xn||(xn={})),function(e){!function(e){e[e.CONNECTION=1]="CONNECTION",e[e.CLOSE=0]="CLOSE"}(e.AccsStatus||(e.AccsStatus={})),function(e){e[e.OFFLINE=0]="OFFLINE",e[e.WIFI=1]="WIFI",e[e.G_2=2]="G_2",e[e.G_3=3]="G_3",e[e.G_4=4]="G_4",e[e.G_5=5]="G_5",e[e.UNKNOWN=6]="UNKNOWN"}(e.NetworkStatus||(e.NetworkStatus={})),function(e){e[e.SUBSCRIBE=0]="SUBSCRIBE",e[e.UNSUBSCRIBE=1]="UNSUBSCRIBE",e[e.NORMAL=2]="NORMAL",e[e.ON_PAUSE=3]="ON_PAUSE",e[e.ON_RESUME=4]="ON_RESUME"}(e.HeartbeatStage||(e.HeartbeatStage={})),function(e){e.STEP1="step1",e.STEP2="step2",e.STEP100="step100"}(e.MessageSteps||(e.MessageSteps={}))}(An||(An={}));var In,En,Cn,jn=se()?my.canIUse("isIDE")&&my.isIDE:!ae()&&"wapa"===(null===(Cn=null===(En=null===(In=window.lib)||void 0===In?void 0:In.mtop)||void 0===En?void 0:En.config)||void 0===Cn?void 0:Cn.subDomain);function Rn(e,t,n){var r;try{r=JSON.parse(e,t)}catch(t){console.warn("jsonParse value error ",e,t),r=null!=n?n:[]}return r}function Ln(e){return"true"===e||!0===e}var Dn=new ue;var Un=function(e){null==e&&(e=(new Date).getTime()),this.N=624,this.M=397,this.MATRIX_A=2567483615,this.UPPER_MASK=2147483648,this.LOWER_MASK=2147483647,this.mt=new Array(this.N),this.mti=this.N+1,e.constructor==Array?this.init_by_array(e,e.length):this.init_seed(e)};Un.prototype.init_seed=function(e){for(this.mt[0]=e>>>0,this.mti=1;this.mti<this.N;this.mti++){e=this.mt[this.mti-1]^this.mt[this.mti-1]>>>30;this.mt[this.mti]=(1812433253*((4294901760&e)>>>16)<<16)+1812433253*(65535&e)+this.mti,this.mt[this.mti]>>>=0}},Un.prototype.init_by_array=function(e,t){var n,r,o;for(this.init_seed(19650218),n=1,r=0,o=this.N>t?this.N:t;o;o--){var i=this.mt[n-1]^this.mt[n-1]>>>30;this.mt[n]=(this.mt[n]^(1664525*((4294901760&i)>>>16)<<16)+1664525*(65535&i))+e[r]+r,this.mt[n]>>>=0,r++,++n>=this.N&&(this.mt[0]=this.mt[this.N-1],n=1),r>=t&&(r=0)}for(o=this.N-1;o;o--){i=this.mt[n-1]^this.mt[n-1]>>>30;this.mt[n]=(this.mt[n]^(1566083941*((4294901760&i)>>>16)<<16)+1566083941*(65535&i))-n,this.mt[n]>>>=0,++n>=this.N&&(this.mt[0]=this.mt[this.N-1],n=1)}this.mt[0]=2147483648},Un.prototype.random_int=function(){var e,t=new Array(0,this.MATRIX_A);if(this.mti>=this.N){var n;for(this.mti==this.N+1&&this.init_seed(5489),n=0;n<this.N-this.M;n++)e=this.mt[n]&this.UPPER_MASK|this.mt[n+1]&this.LOWER_MASK,this.mt[n]=this.mt[n+this.M]^e>>>1^t[1&e];for(;n<this.N-1;n++)e=this.mt[n]&this.UPPER_MASK|this.mt[n+1]&this.LOWER_MASK,this.mt[n]=this.mt[n+(this.M-this.N)]^e>>>1^t[1&e];e=this.mt[this.N-1]&this.UPPER_MASK|this.mt[0]&this.LOWER_MASK,this.mt[this.N-1]=this.mt[this.M-1]^e>>>1^t[1&e],this.mti=0}return e=this.mt[this.mti++],e^=e>>>11,e^=e<<7&2636928640,e^=e<<15&4022730752,(e^=e>>>18)>>>0},Un.prototype.random_int31=function(){return this.random_int()>>>1},Un.prototype.random_incl=function(){return this.random_int()*(1/4294967295)},Un.prototype.random=function(){return this.random_int()*(1/4294967296)},Un.prototype.random_excl=function(){return(this.random_int()+.5)*(1/4294967296)},Un.prototype.random_long=function(){return(67108864*(this.random_int()>>>5)+(this.random_int()>>>6))*(1/9007199254740992)};var Bn=new Un(Math.random()*Number.MAX_SAFE_INTEGER);function Vn(e){for(var t=e.length;t--;)e[t]=Math.floor(256*Bn.random());return e}var Gn=se()||ae()?{getRandomValues:Vn}:window.crypto;var Kn=new function(){var e=this;this.time={valid:!1,deltaTime:0},this.init=function(t){return e.checkTime({appKey:t}).then((function(t){var n=t.deltaTime,r=t.valid;e.time={deltaTime:n,valid:r}})).catch((function(){}))},this.checkTime=function(e){return e.appKey,new Promise((function(e){var t=Date.now();Dn.request({api:"mtop.common.gettimestamp",v:"1.0",data:{}}).then((function(n){var r,o=+(null===(r=null==n?void 0:n.data)||void 0===r?void 0:r.t),i=Date.now(),s=parseInt(o+(i-t)/2-i,10);e({deltaTime:s,valid:!0})})).catch((function(e){throw console.log("reporter checkTime error",e),e}))}))}},zn=function(){return(zn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Fn=function(e){var t=this;this.topic="",this.sessionId=([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(function(e){return(e^Gn.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)})),this.time={valid:!1,deltaTime:0},this.receiveMsg={},this.statusList=[],this.subTypeColorRate={10086:1e5,10101:1e3,880000146:1e4,880000152:1e5,880000155:1e5},this.loopParams={reportInterval:2e4,timer:void 0,lastSubscribeTime:0,lastReportTime:-1,pauseTime:0,resumeTime:0},this.updateTopic=function(e){t.topic=e},this.updateSubTypeColorRate=function(e){t.subTypeColorRate=e},this.updateLoopParams=function(e){t.loopParams=zn(zn({},t.loopParams),e)},this.send=function(e,n){var r,o=t,i=o.topic,s=o.bizCode,a=o.sessionId,c=o.deviceId,u=o.loopParams,l=o.pm,p=u.lastReportTime,f=u.pauseTime,d=u.resumeTime,h=u.lastSubscribeTime,m=Date.now(),g=m-h-(d-f),y=-1===p?0:m-p;(r={sessionId:a,topic:i,bizCode:s,timestamp:Date.now()+t.time.deltaTime,stage:e,deviceId:c,remainTime:g,incRemainTime:y,statusList:JSON.stringify(t.statusList),receiveMsg:JSON.stringify(t.receiveMsg),appKey:l.options.appKey},Dn.request({api:"mtop.taobao.content.log.h5.live.heartbeat.report",v:"1.0",type:"POST",dataType:"json",data:r}).then((function(e){if("SUCCESS"!==e.ret[0].split("::")[0]){var t=JSON.stringify(e.responseHeaders||{});throw new Error("".concat(e.ret[0]," : ").concat(t))}return Object.assign(e,{mode:"mtop"})})).catch((function(e){throw e}))).then((function(e){var r=e.data.reportInterval,o=void 0===r?"20":r;t.updateLoopParams({reportInterval:1e3*Number(o),lastReportTime:m,pauseTime:0,resumeTime:0}),t.clearReportData(),n&&(t.loopParams.timer&&(clearTimeout(t.loopParams.timer),t.loopParams.timer=void 0),t.loopParams.timer=setTimeout((function(){t.send(An.HeartbeatStage.NORMAL,!0)}),t.loopParams.reportInterval))})).catch((function(){}))},this.addPMReceiveMsg=function(e){var n,r,o={data:{t:(null===(n=function(e){if(e)return parseInt("".concat(e/1e3))}(e.msgBody.timestamp))||void 0===n?void 0:n.toString())||"",id:(null===(r=null==e?void 0:e.msgHeader)||void 0===r?void 0:r.messageId)||""},originData:e,messageType:xn.PM};t.addReceiveMsg(zn(zn({},o),{type:An.MessageSteps.STEP2})),t.addReceiveMsg(zn(zn({},o),{type:An.MessageSteps.STEP100}))},this.addCDNReceiveMsg=function(e,n,r){var o={data:{t:"".concat(n),id:e.msgId},originData:e,messageType:xn.CDN};t.addReceiveMsg(zn(zn({},o),{type:r}))},this.addReceiveMsg=function(e){var n,r,o,i=e.type,s=e.data,a=e.originData;if(e.messageType===xn.PM){var c=a;r=c.msgHeader.subType,o=c.msgHeader.messageId}else{var u=a;r=u.subType,o=u.msgId}if(r&&t.subTypeColorRate[r]){var l=t.subTypeColorRate[r];Math.abs(function(e){var t=e.length;if(t<1)return 0;for(var n=0,r=0;r<t;r++)n=(n<<5)-n+e.charCodeAt(r),n&=n;return n}(o+t.deviceId))%1e5<l&&(t.receiveMsg[i]?null===(n=t.receiveMsg[i])||void 0===n||n.push(s):t.receiveMsg[i]=[s])}},this.clearReportData=function(){t.receiveMsg={},t.statusList=[]},this.updateStatusList=function(){t.getReportNetworkStatus().then((function(e){var n=(t.getAccsStatus()<<0)+(e<<8)+65536;t.statusList.push("".concat(n))}))},this.getAccsStatus=function(){var e;return Ln(null===(e=t.pm.messageKitWS.conn)||void 0===e?void 0:e.getStatus())?An.AccsStatus.CONNECTION:An.AccsStatus.CLOSE},this.getReportNetworkStatus=function(){return new Promise((function(e){be().then((function(t){var n=function(e){switch(e){case de.UNKNOWN:return An.NetworkStatus.UNKNOWN;case de.OFFLINE:return An.NetworkStatus.OFFLINE;case de.WIFI:return An.NetworkStatus.WIFI;case de.G_5:return An.NetworkStatus.G_5;case de.G_4:return An.NetworkStatus.G_4;case de.G_3:return An.NetworkStatus.G_3;case de.G_2:return An.NetworkStatus.G_2;default:return An.NetworkStatus.UNKNOWN}}(t);e(n)}))}))},this.pm=e.pm,this.deviceId=e.deviceId,this.bizCode=e.bizCode,this.version=e.version,this.time=Kn.time,this.pm.on("ready",(function(){setInterval((function(){return t.updateStatusList()}),1e3)}))};function Hn(e,t){var n=function(e){for(var t=window.atob(e),n=t.length,r=new Uint8Array(n),o=0;o<n;o++)r[o]=t.charCodeAt(o);return r.buffer}(e);return new TextDecoder(t).decode(n)}var Wn=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Jn=function(){return(Jn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Yn="undefined"==typeof window?{}:window,qn=function(e){function t(t){var n=e.call(this,t)||this;n.cdnLoopParams={topic:"",lastPullTime:0,currentTime:0,pullInterval:5,pauseTime:0,resumeTime:0,timer:void 0,delayTimer:void 0},n.cdnDataStack={},n.cdnAdapter={},n.cdnAddListener=function(){n.on(kt,(function(e){if(n.cdnUpdateTopic(),Ln(e.isVisibilitychange)){n.cdnLoopParams.resumeTime=Date.now();var t=n.cdnLoopParams,r=t.resumeTime-t.pauseTime,o=1e3*t.pullInterval;if(r>o)n.cdnRunLoop();else{var i=o-r;n.cdnLoopParams.delayTimer&&clearTimeout(n.cdnLoopParams.delayTimer),n.cdnLoopParams.delayTimer=setTimeout((function(){n.cdnRunLoop()}),i)}}else n.cdnRunLoop();n.cdnReport.updateLoopParams({lastSubscribeTime:Date.now()}),Ln(e.isVisibilitychange)?(n.cdnReport.send(An.HeartbeatStage.ON_RESUME),n.cdnReport.updateLoopParams({resumeTime:Date.now()})):n.cdnReport.send(An.HeartbeatStage.SUBSCRIBE,!0)})),n.on(Mt,(function(e){n.cdnStopLoop(),Ln(e.isVisibilitychange)&&(n.cdnLoopParams.pauseTime=Date.now(),n.cdnStopLoop()),Ln(e.isVisibilitychange)?(n.cdnReport.send(An.HeartbeatStage.ON_PAUSE),n.cdnReport.updateLoopParams({pauseTime:Date.now()})):n.cdnReport.send(An.HeartbeatStage.UNSUBSCRIBE)})),n.on(Gt,(function(e){n.cdnUpdateDataStack(xn.PM,e),n.cdnReport.addPMReceiveMsg(e)})),n.on(Kt,(function(e){n.cdnUpdateDataStack(xn.PM,e),n.cdnReport.addPMReceiveMsg(e)})),n.on(jt,(function(e){n.cdnUpdateDataStack(xn.PM,e),n.cdnReport.addPMReceiveMsg(e)}))},n.cdnUpdateTopic=function(){var e="";[$t.A_M,$t.ACCS].includes(n.mode)&&(e=n.messageKitWS.topic),e===n.cdnLoopParams.topic||n.cdnDataStack[e]||(n.cdnLoopParams.topic=e,n.cdnDataStack[e]={msgDict:{},msgOrderDict:{},oldestIndex:0,len:0,nextIndex:0},n.cdnReport.updateTopic(e))},n.cdnUpdateDataStack=function(e,t){var r=function(e){var t=e.topic,r=e.messageId;e.item,e.type;if(t&&n.cdnDataStack[t]&&r){var o=n.cdnDataStack[t];if(!o.msgDict[r]){if(o.len>=1e4){var i=o.msgOrderDict[o.oldestIndex],s=o.msgDict[i];o.oldestIndex++,o.len--,delete o.msgDict[i],delete o.msgOrderDict[s]}var a=o.nextIndex;o.msgDict[r]=a,o.msgOrderDict[a]=r,o.len++,o.nextIndex++}}};if(e===xn.PM){var o=t,i=o.msgHeader,s=i.messageId;r({topic:i.topic,messageId:s,item:o,type:xn.PM})}else{var a=t;r({topic:a.topic,messageId:a.msgId,item:a,type:xn.CDN})}},n.cdnDataHandler=function(e){e.payloads instanceof Array&&e.payloads.length>0&&e.payloads.forEach((function(e){void 0!==n.cdnDataStack[n.cdnLoopParams.topic].msgDict[e.msgId]||(n.messageEmitter(e),n.cdnUpdateDataStack(xn.CDN,e)),n.cdnReport.addCDNReceiveMsg(e,n.cdnLoopParams.lastPullTime,An.MessageSteps.STEP1)}))},n.messageEmitter=function(e){var t=e.subType,r=function(e){return Hn(function(e){var t=e.length%4;return 0!=t&&(e+="=".repeat(4-t)),e}(e),"utf-8")}(e.data),o=Rn(r);if(t===De.SYS_SUBTYPE.MTK_MSG_SYS_COMMON)n.emit(xt,o);else if(t===De.SYS_SUBTYPE.MTK_MSG_SYS_DIG)n.emit(Nt,o);else if([De.SYS_SUBTYPE.MTK_MSG_SYS_JOIN,De.SYS_SUBTYPE.MTK_MSG_SYS_JOIN_OLD].includes(t))n.emit(It,o);else if(t===De.REQUEST_SUBTYPE.MKT_REQUEST_SUBTYPE_STAT)n.emit(Pt,o);else if(t===De.REQUEST_SUBTYPE.MKT_REQUEST_SUBTYPE_USER)n.emit(_t,o);else{var i={msgData:r,msgHeader:{messageId:e.msgId,subType:e.subType,topic:e.topic}};n.emit(Et,i)}n.cdnReport.addCDNReceiveMsg(e,n.cdnLoopParams.lastPullTime,An.MessageSteps.STEP100)},n.cdnRunLoop=function(){n.cdnLoopParams.timer&&n.cdnStopLoop();var e=Math.floor((Date.now()+Kn.time.deltaTime)/1e3);n.cdnLoopParams=Jn(Jn({},n.cdnLoopParams),{currentTime:e});var t,r,o,i=function(e){var t=e.topic,n=e.lastPullTime,r=e.currentTime;return"//".concat(jn?"pre-alive-interact.alibaba.com":"impaas.alicdn.com","/live/message/").concat(t,"/").concat(n,"/").concat(r)}(n.cdnLoopParams);(t=i,r=n.cdnAdapter.fetch,o=fetch,r&&(o=r),o(t).then((function(e){if(e.ok)return e.text();throw e.statusText})).then((function(e){return Rn(e.replace(/^\w+=/g,""))}))).then((function(e){var t;if(e.hasError)console.log("补偿失败，服务端接口hasError");else{var r=e.pullInterval,o=void 0===r?n.cdnLoopParams.pullInterval:r,i=e.endTime;n.cdnLoopParams=Jn(Jn({},n.cdnLoopParams),{pullInterval:o,lastPullTime:i}),n.cdnReport.updateSubTypeColorRate(null!==(t=e.subTypeColorRate)&&void 0!==t?t:{}),n.cdnDataHandler(e)}})).catch((function(){})).finally((function(){n.cdnLoopParams.timer=setTimeout((function(){n.cdnRunLoop()}),1e3*n.cdnLoopParams.pullInterval)}))},n.cdnStopLoop=function(){clearTimeout(n.cdnLoopParams.timer),n.cdnLoopParams.timer=void 0},n.cdnCheckEnv(t);var r=Nn.getAccsDeviceId();return Kn.init().finally((function(){n.cdnReport=new Fn({deviceId:r,bizCode:t.namespace,version:1,pm:n}),n.cdnUpdateTopic(),n.cdnAddListener()})),n}return Wn(t,e),t.prototype.cdnCheckEnv=function(e){Dn.init(e.mtop),e.fetch&&(this.cdnAdapter.fetch=e.fetch)},t}(Nn);Yn.lib||(Yn.lib={}),Yn.lib.PowerMsgCDN=qn;t.a=qn},91:function(e,t,n){"use strict";e.exports=n(1027)},946:function(e,t,n){"use strict";var r=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var i=arguments[t],s=0,a=i.length;s<a;s++,o++)r[o]=i[s];return r};function o(e){return e&&"function"==typeof e&&(n=(t=e).prototype&&t.prototype.constructor===t&&Object.getOwnPropertyNames(t.prototype).length>1,r=!n&&t.toString(),!(n||/^function\s+[A-Z]/.test(r)||"class"===r.slice(0,5)));var t,n,r}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e){void 0===e&&(e={}),this.multiMode=!1,this.eventListeners={},this.timeoutIds=[],this.intervalIds=[],this.propertyAdded={},this.originalValues={};var t=e.multiMode;window.Proxy||(console.warn("proxy sandbox is not support by current browser"),this.sandboxDisabled=!0),this.multiMode=t,this.sandbox=null}return e.prototype.createProxySandbox=function(e){var t=this,n=this.propertyAdded,i=this.originalValues,s=this.multiMode,a=Object.create(null),c=window,u=window.addEventListener,l=window.removeEventListener,p=window.setInterval,f=window.setTimeout;a.addEventListener=function(e,n){for(var o=[],i=2;i<arguments.length;i++)o[i-2]=arguments[i];return t.eventListeners[e]=t.eventListeners[e]||[],t.eventListeners[e].push(n),u.apply(c,r([e,n],o))},a.removeEventListener=function(e,n){for(var o=[],i=2;i<arguments.length;i++)o[i-2]=arguments[i];var s=t.eventListeners[e]||[];return s.includes(n)&&s.splice(s.indexOf(n),1),l.apply(c,r([e,n],o))},a.setTimeout=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=f.apply(void 0,e);return t.timeoutIds.push(r),r},a.setInterval=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=p.apply(void 0,e);return t.intervalIds.push(r),r};var d=new Proxy(a,{set:function(e,t,r){return c.hasOwnProperty(t)?i.hasOwnProperty(t)||(i[t]=c[t]):n[t]=r,s||(c[t]=r),e[t]=r,!0},get:function(t,n){if(n!==Symbol.unscopables){if(["top","window","self","globalThis"].includes(n))return d;if("hasOwnProperty"===n)return function(e){return!!t[e]||c.hasOwnProperty(e)};var r=t[n];if(void 0!==r)return r;var i=e&&e[n];if(i)return i;var s=c[n];if("eval"===n)return s;if(o(s)){var a=s.bind(c);for(var u in s)a[u]=s[u];return a}return s}},has:function(e,t){return t in e||t in c}});this.sandbox=d},e.prototype.getSandbox=function(){return this.sandbox},e.prototype.getAddedProperties=function(){return this.propertyAdded},e.prototype.execScriptInSandbox=function(e){if(!this.sandboxDisabled){this.sandbox||this.createProxySandbox();try{new Function("sandbox","with (sandbox) {;"+e+"\n}").bind(this.sandbox)(this.sandbox)}catch(e){throw console.error("error occurs when execute script in sandbox: "+e),e}}},e.prototype.clear=function(){var e=this;this.sandboxDisabled||(Object.keys(this.eventListeners).forEach((function(t){(e.eventListeners[t]||[]).forEach((function(e){window.removeEventListener(t,e)}))})),this.timeoutIds.forEach((function(e){return window.clearTimeout(e)})),this.intervalIds.forEach((function(e){return window.clearInterval(e)})),Object.keys(this.originalValues).forEach((function(t){window[t]=e.originalValues[t]})),Object.keys(this.propertyAdded).forEach((function(e){delete window[e]})))},e}();t.default=i},947:function(e,t,n){"use strict";e.exports=p;var r,o=n(601),i=o.LongBits,s=o.base64,a=o.utf8;function c(e,t,n){this.fn=e,this.len=t,this.next=void 0,this.val=n}function u(){}function l(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function p(){this.len=0,this.head=new c(u,0,0),this.tail=this.head,this.states=null}var f=function(){return o.Buffer?function(){return(p.create=function(){return new r})()}:function(){return new p}};function d(e,t,n){t[n]=255&e}function h(e,t){this.len=e,this.next=void 0,this.val=t}function m(e,t,n){for(;e.hi;)t[n++]=127&e.lo|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;e.lo>127;)t[n++]=127&e.lo|128,e.lo=e.lo>>>7;t[n++]=e.lo}function g(e,t,n){t[n]=255&e,t[n+1]=e>>>8&255,t[n+2]=e>>>16&255,t[n+3]=e>>>24}p.create=f(),p.alloc=function(e){return new o.Array(e)},o.Array!==Array&&(p.alloc=o.pool(p.alloc,o.Array.prototype.subarray)),p.prototype._push=function(e,t,n){return this.tail=this.tail.next=new c(e,t,n),this.len+=t,this},h.prototype=Object.create(c.prototype),h.prototype.fn=function(e,t,n){for(;e>127;)t[n++]=127&e|128,e>>>=7;t[n]=e},p.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new h((e>>>=0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this},p.prototype.int32=function(e){return e<0?this._push(m,10,i.fromNumber(e)):this.uint32(e)},p.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)},p.prototype.uint64=function(e){var t=i.from(e);return this._push(m,t.length(),t)},p.prototype.int64=p.prototype.uint64,p.prototype.sint64=function(e){var t=i.from(e).zzEncode();return this._push(m,t.length(),t)},p.prototype.bool=function(e){return this._push(d,1,e?1:0)},p.prototype.fixed32=function(e){return this._push(g,4,e>>>0)},p.prototype.sfixed32=p.prototype.fixed32,p.prototype.fixed64=function(e){var t=i.from(e);return this._push(g,4,t.lo)._push(g,4,t.hi)},p.prototype.sfixed64=p.prototype.fixed64,p.prototype.float=function(e){return this._push(o.float.writeFloatLE,4,e)},p.prototype.double=function(e){return this._push(o.float.writeDoubleLE,8,e)};var y=o.Array.prototype.set?function(e,t,n){t.set(e,n)}:function(e,t,n){for(var r=0;r<e.length;++r)t[n+r]=e[r]};p.prototype.bytes=function(e){var t=e.length>>>0;if(!t)return this._push(d,1,0);if(o.isString(e)){var n=p.alloc(t=s.length(e));s.decode(e,n,0),e=n}return this.uint32(t)._push(y,t,e)},p.prototype.string=function(e){var t=a.length(e);return t?this.uint32(t)._push(a.write,t,e):this._push(d,1,0)},p.prototype.fork=function(){return this.states=new l(this),this.head=this.tail=new c(u,0,0),this.len=0,this},p.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new c(u,0,0),this.len=0),this},p.prototype.ldelim=function(){var e=this.head,t=this.tail,n=this.len;return this.reset().uint32(n),n&&(this.tail.next=e.next,this.tail=t,this.len+=n),this},p.prototype.finish=function(){for(var e=this.head.next,t=this.constructor.alloc(this.len),n=0;e;)e.fn(e.val,t,n),n+=e.len,e=e.next;return t},p._configure=function(e){r=e,p.create=f(),r._configure()}},948:function(e,t,n){"use strict";e.exports=c;var r,o=n(601),i=o.LongBits,s=o.utf8;function a(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function c(e){this.buf=e,this.pos=0,this.len=e.length}var u,l="undefined"!=typeof Uint8Array?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new c(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new c(e);throw Error("illegal buffer")},p=function(){return o.Buffer?function(e){return(c.create=function(e){return o.Buffer.isBuffer(e)?new r(e):l(e)})(e)}:l};function f(){var e=new i(0,0),t=0;if(!(this.len-this.pos>4)){for(;t<3;++t){if(this.pos>=this.len)throw a(this);if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(127&this.buf[this.pos++])<<7*t)>>>0,e}for(;t<4;++t)if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(127&this.buf[this.pos])<<28)>>>0,e.hi=(e.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return e;if(t=0,this.len-this.pos>4){for(;t<5;++t)if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}else for(;t<5;++t){if(this.pos>=this.len)throw a(this);if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}function d(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}function h(){if(this.pos+8>this.len)throw a(this,8);return new i(d(this.buf,this.pos+=4),d(this.buf,this.pos+=4))}c.create=p(),c.prototype._slice=o.Array.prototype.subarray||o.Array.prototype.slice,c.prototype.uint32=(u=4294967295,function(){if(u=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return u;if(u=(u|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return u;if(u=(u|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return u;if(u=(u|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return u;if(u=(u|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return u;if((this.pos+=5)>this.len)throw this.pos=this.len,a(this,10);return u}),c.prototype.int32=function(){return 0|this.uint32()},c.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(1&e)|0},c.prototype.bool=function(){return 0!==this.uint32()},c.prototype.fixed32=function(){if(this.pos+4>this.len)throw a(this,4);return d(this.buf,this.pos+=4)},c.prototype.sfixed32=function(){if(this.pos+4>this.len)throw a(this,4);return 0|d(this.buf,this.pos+=4)},c.prototype.float=function(){if(this.pos+4>this.len)throw a(this,4);var e=o.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e},c.prototype.double=function(){if(this.pos+8>this.len)throw a(this,4);var e=o.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e},c.prototype.bytes=function(){var e=this.uint32(),t=this.pos,n=this.pos+e;if(n>this.len)throw a(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(t,n):t===n?new this.buf.constructor(0):this._slice.call(this.buf,t,n)},c.prototype.string=function(){var e=this.bytes();return s.read(e,0,e.length)},c.prototype.skip=function(e){if("number"==typeof e){if(this.pos+e>this.len)throw a(this,e);this.pos+=e}else do{if(this.pos>=this.len)throw a(this)}while(128&this.buf[this.pos++]);return this},c.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(e=7&this.uint32());)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this},c._configure=function(e){r=e,c.create=p(),r._configure();var t=o.Long?"toLong":"toNumber";o.merge(c.prototype,{int64:function(){return f.call(this)[t](!1)},uint64:function(){return f.call(this)[t](!0)},sint64:function(){return f.call(this).zzDecode()[t](!1)},fixed64:function(){return h.call(this)[t](!0)},sfixed64:function(){return h.call(this)[t](!1)}})}},962:function(e,t,n){"use strict";var r=Object.prototype.hasOwnProperty,o="~";function i(){}function s(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function a(e,t,n,r,i){if("function"!=typeof n)throw new TypeError("The listener must be a function");var a=new s(n,r||e,i),c=o?o+t:t;return e._events[c]?e._events[c].fn?e._events[c]=[e._events[c],a]:e._events[c].push(a):(e._events[c]=a,e._eventsCount++),e}function c(e,t){0==--e._eventsCount?e._events=new i:delete e._events[t]}function u(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(o=!1)),u.prototype.eventNames=function(){var e,t,n=[];if(0===this._eventsCount)return n;for(t in e=this._events)r.call(e,t)&&n.push(o?t.slice(1):t);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(e)):n},u.prototype.listeners=function(e){var t=o?o+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var r=0,i=n.length,s=new Array(i);r<i;r++)s[r]=n[r].fn;return s},u.prototype.listenerCount=function(e){var t=o?o+e:e,n=this._events[t];return n?n.fn?1:n.length:0},u.prototype.emit=function(e,t,n,r,i,s){var a=o?o+e:e;if(!this._events[a])return!1;var c,u,l=this._events[a],p=arguments.length;if(l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),p){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,t),!0;case 3:return l.fn.call(l.context,t,n),!0;case 4:return l.fn.call(l.context,t,n,r),!0;case 5:return l.fn.call(l.context,t,n,r,i),!0;case 6:return l.fn.call(l.context,t,n,r,i,s),!0}for(u=1,c=new Array(p-1);u<p;u++)c[u-1]=arguments[u];l.fn.apply(l.context,c)}else{var f,d=l.length;for(u=0;u<d;u++)switch(l[u].once&&this.removeListener(e,l[u].fn,void 0,!0),p){case 1:l[u].fn.call(l[u].context);break;case 2:l[u].fn.call(l[u].context,t);break;case 3:l[u].fn.call(l[u].context,t,n);break;case 4:l[u].fn.call(l[u].context,t,n,r);break;default:if(!c)for(f=1,c=new Array(p-1);f<p;f++)c[f-1]=arguments[f];l[u].fn.apply(l[u].context,c)}}return!0},u.prototype.on=function(e,t,n){return a(this,e,t,n,!1)},u.prototype.once=function(e,t,n){return a(this,e,t,n,!0)},u.prototype.removeListener=function(e,t,n,r){var i=o?o+e:e;if(!this._events[i])return this;if(!t)return c(this,i),this;var s=this._events[i];if(s.fn)s.fn!==t||r&&!s.once||n&&s.context!==n||c(this,i);else{for(var a=0,u=[],l=s.length;a<l;a++)(s[a].fn!==t||r&&!s[a].once||n&&s[a].context!==n)&&u.push(s[a]);u.length?this._events[i]=1===u.length?u[0]:u:c(this,i)}return this},u.prototype.removeAllListeners=function(e){var t;return e?(t=o?o+e:e,this._events[t]&&c(this,t)):(this._events=new i,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=o,u.EventEmitter=u,e.exports=u}}]);